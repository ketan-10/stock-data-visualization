(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hr(i,t){const e=new Set(i.split(","));return t?s=>e.has(s.toLowerCase()):s=>e.has(s)}const mt={},ci=[],Qt=()=>{},kh=()=>!1,Ls=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),ur=i=>i.startsWith("onUpdate:"),St=Object.assign,cr=(i,t)=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)},Ph=Object.prototype.hasOwnProperty,nt=(i,t)=>Ph.call(i,t),Z=Array.isArray,fi=i=>ks(i)==="[object Map]",Do=i=>ks(i)==="[object Set]",J=i=>typeof i=="function",wt=i=>typeof i=="string",wi=i=>typeof i=="symbol",pt=i=>i!==null&&typeof i=="object",Fo=i=>(pt(i)||J(i))&&J(i.then)&&J(i.catch),Bo=Object.prototype.toString,ks=i=>Bo.call(i),$h=i=>ks(i).slice(8,-1),Vo=i=>ks(i)==="[object Object]",fr=i=>wt(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,Ti=hr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ps=i=>{const t=Object.create(null);return e=>t[e]||(t[e]=i(e))},Nh=/-(\w)/g,mi=Ps(i=>i.replace(Nh,(t,e)=>e?e.toUpperCase():"")),Ah=/\B([A-Z])/g,_i=Ps(i=>i.replace(Ah,"-$1").toLowerCase()),jo=Ps(i=>i.charAt(0).toUpperCase()+i.slice(1)),on=Ps(i=>i?`on${jo(i)}`:""),Pe=(i,t)=>!Object.is(i,t),an=(i,t)=>{for(let e=0;e<i.length;e++)i[e](t)},Ss=(i,t,e)=>{Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value:e})},Dh=i=>{const t=parseFloat(i);return isNaN(t)?i:t},Fh=i=>{const t=wt(i)?Number(i):NaN;return isNaN(t)?i:t};let tl;const Wo=()=>tl||(tl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function dr(i){if(Z(i)){const t={};for(let e=0;e<i.length;e++){const s=i[e],n=wt(s)?Wh(s):dr(s);if(n)for(const r in n)t[r]=n[r]}return t}else if(wt(i)||pt(i))return i}const Bh=/;(?![^(]*\))/g,Vh=/:([^]+)/,jh=/\/\*[^]*?\*\//g;function Wh(i){const t={};return i.replace(jh,"").split(Bh).forEach(e=>{if(e){const s=e.split(Vh);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Kt(i){let t="";if(wt(i))t=i;else if(Z(i))for(let e=0;e<i.length;e++){const s=Kt(i[e]);s&&(t+=s+" ")}else if(pt(i))for(const e in i)i[e]&&(t+=e+" ");return t.trim()}const Hh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Uh=hr(Hh);function Ho(i){return!!i||i===""}const Re=i=>wt(i)?i:i==null?"":Z(i)||pt(i)&&(i.toString===Bo||!J(i.toString))?JSON.stringify(i,Uo,2):String(i),Uo=(i,t)=>t&&t.__v_isRef?Uo(i,t.value):fi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,n],r)=>(e[hn(s,r)+" =>"]=n,e),{})}:Do(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>hn(e))}:wi(t)?hn(t):pt(t)&&!Z(t)&&!Vo(t)?String(t):t,hn=(i,t="")=>{var e;return wi(i)?`Symbol(${(e=i.description)!=null?e:t})`:i};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ut;class Kh{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Ut,!t&&Ut&&(this.index=(Ut.scopes||(Ut.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=Ut;try{return Ut=this,t()}finally{Ut=e}}}on(){Ut=this}off(){Ut=this.parent}stop(t){if(this._active){let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function qh(i,t=Ut){t&&t.active&&t.effects.push(i)}function Zh(){return Ut}function Yh(i){Ut&&Ut.cleanups.push(i)}let Ze;class pr{constructor(t,e,s,n){this.fn=t,this.trigger=e,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,qh(this,n)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,ei();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed&&(Qh(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ii()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Le,e=Ze;try{return Le=!0,Ze=this,this._runnings++,el(this),this.fn()}finally{il(this),this._runnings--,Ze=e,Le=t}}stop(){var t;this.active&&(el(this),il(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function Qh(i){return i.value}function el(i){i._trackId++,i._depsLength=0}function il(i){if(i.deps.length>i._depsLength){for(let t=i._depsLength;t<i.deps.length;t++)Ko(i.deps[t],i);i.deps.length=i._depsLength}}function Ko(i,t){const e=i.get(t);e!==void 0&&t._trackId!==e&&(i.delete(t),i.size===0&&i.cleanup())}let Le=!0,Vn=0;const qo=[];function ei(){qo.push(Le),Le=!1}function ii(){const i=qo.pop();Le=i===void 0?!0:i}function vr(){Vn++}function mr(){for(Vn--;!Vn&&jn.length;)jn.shift()()}function Zo(i,t,e){if(t.get(i)!==i._trackId){t.set(i,i._trackId);const s=i.deps[i._depsLength];s!==t?(s&&Ko(s,i),i.deps[i._depsLength++]=t):i._depsLength++}}const jn=[];function Yo(i,t,e){vr();for(const s of i.keys()){let n;s._dirtyLevel<t&&(n??(n=i.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=t),s._shouldSchedule&&(n??(n=i.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&jn.push(s.scheduler)))}mr()}const Qo=(i,t)=>{const e=new Map;return e.cleanup=i,e.computed=t,e},Wn=new WeakMap,Ye=Symbol(""),Hn=Symbol("");function Vt(i,t,e){if(Le&&Ze){let s=Wn.get(i);s||Wn.set(i,s=new Map);let n=s.get(e);n||s.set(e,n=Qo(()=>s.delete(e))),Zo(Ze,n)}}function be(i,t,e,s,n,r){const l=Wn.get(i);if(!l)return;let o=[];if(t==="clear")o=[...l.values()];else if(e==="length"&&Z(i)){const a=Number(s);l.forEach((h,u)=>{(u==="length"||!wi(u)&&u>=a)&&o.push(h)})}else switch(e!==void 0&&o.push(l.get(e)),t){case"add":Z(i)?fr(e)&&o.push(l.get("length")):(o.push(l.get(Ye)),fi(i)&&o.push(l.get(Hn)));break;case"delete":Z(i)||(o.push(l.get(Ye)),fi(i)&&o.push(l.get(Hn)));break;case"set":fi(i)&&o.push(l.get(Ye));break}vr();for(const a of o)a&&Yo(a,4);mr()}const Xh=hr("__proto__,__v_isRef,__isVue"),Xo=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(wi)),sl=Gh();function Gh(){const i={};return["includes","indexOf","lastIndexOf"].forEach(t=>{i[t]=function(...e){const s=q(this);for(let r=0,l=this.length;r<l;r++)Vt(s,"get",r+"");const n=s[t](...e);return n===-1||n===!1?s[t](...e.map(q)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{i[t]=function(...e){ei(),vr();const s=q(this)[t].apply(this,e);return mr(),ii(),s}}),i}function Jh(i){const t=q(this);return Vt(t,"has",i),t.hasOwnProperty(i)}class Go{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){const n=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(n?r?fu:ia:r?ea:ta).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const l=Z(t);if(!n){if(l&&nt(sl,e))return Reflect.get(sl,e,s);if(e==="hasOwnProperty")return Jh}const o=Reflect.get(t,e,s);return(wi(e)?Xo.has(e):Xh(e))||(n||Vt(t,"get",e),r)?o:Tt(o)?l&&fr(e)?o:o.value:pt(o)?n?sa(o):Zi(o):o}}class Jo extends Go{constructor(t=!1){super(!1,t)}set(t,e,s,n){let r=t[e];if(!this._isShallow){const a=gi(r);if(!Cs(s)&&!gi(s)&&(r=q(r),s=q(s)),!Z(t)&&Tt(r)&&!Tt(s))return a?!1:(r.value=s,!0)}const l=Z(t)&&fr(e)?Number(e)<t.length:nt(t,e),o=Reflect.set(t,e,s,n);return t===q(n)&&(l?Pe(s,r)&&be(t,"set",e,s):be(t,"add",e,s)),o}deleteProperty(t,e){const s=nt(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&be(t,"delete",e,void 0),n}has(t,e){const s=Reflect.has(t,e);return(!wi(e)||!Xo.has(e))&&Vt(t,"has",e),s}ownKeys(t){return Vt(t,"iterate",Z(t)?"length":Ye),Reflect.ownKeys(t)}}class tu extends Go{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const eu=new Jo,iu=new tu,su=new Jo(!0),gr=i=>i,$s=i=>Reflect.getPrototypeOf(i);function es(i,t,e=!1,s=!1){i=i.__v_raw;const n=q(i),r=q(t);e||(Pe(t,r)&&Vt(n,"get",t),Vt(n,"get",r));const{has:l}=$s(n),o=s?gr:e?wr:Di;if(l.call(n,t))return o(i.get(t));if(l.call(n,r))return o(i.get(r));i!==n&&i.get(t)}function is(i,t=!1){const e=this.__v_raw,s=q(e),n=q(i);return t||(Pe(i,n)&&Vt(s,"has",i),Vt(s,"has",n)),i===n?e.has(i):e.has(i)||e.has(n)}function ss(i,t=!1){return i=i.__v_raw,!t&&Vt(q(i),"iterate",Ye),Reflect.get(i,"size",i)}function nl(i){i=q(i);const t=q(this);return $s(t).has.call(t,i)||(t.add(i),be(t,"add",i,i)),this}function rl(i,t){t=q(t);const e=q(this),{has:s,get:n}=$s(e);let r=s.call(e,i);r||(i=q(i),r=s.call(e,i));const l=n.call(e,i);return e.set(i,t),r?Pe(t,l)&&be(e,"set",i,t):be(e,"add",i,t),this}function ll(i){const t=q(this),{has:e,get:s}=$s(t);let n=e.call(t,i);n||(i=q(i),n=e.call(t,i)),s&&s.call(t,i);const r=t.delete(i);return n&&be(t,"delete",i,void 0),r}function ol(){const i=q(this),t=i.size!==0,e=i.clear();return t&&be(i,"clear",void 0,void 0),e}function ns(i,t){return function(s,n){const r=this,l=r.__v_raw,o=q(l),a=t?gr:i?wr:Di;return!i&&Vt(o,"iterate",Ye),l.forEach((h,u)=>s.call(n,a(h),a(u),r))}}function rs(i,t,e){return function(...s){const n=this.__v_raw,r=q(n),l=fi(r),o=i==="entries"||i===Symbol.iterator&&l,a=i==="keys"&&l,h=n[i](...s),u=e?gr:t?wr:Di;return!t&&Vt(r,"iterate",a?Hn:Ye),{next(){const{value:c,done:f}=h.next();return f?{value:c,done:f}:{value:o?[u(c[0]),u(c[1])]:u(c),done:f}},[Symbol.iterator](){return this}}}}function we(i){return function(...t){return i==="delete"?!1:i==="clear"?void 0:this}}function nu(){const i={get(r){return es(this,r)},get size(){return ss(this)},has:is,add:nl,set:rl,delete:ll,clear:ol,forEach:ns(!1,!1)},t={get(r){return es(this,r,!1,!0)},get size(){return ss(this)},has:is,add:nl,set:rl,delete:ll,clear:ol,forEach:ns(!1,!0)},e={get(r){return es(this,r,!0)},get size(){return ss(this,!0)},has(r){return is.call(this,r,!0)},add:we("add"),set:we("set"),delete:we("delete"),clear:we("clear"),forEach:ns(!0,!1)},s={get(r){return es(this,r,!0,!0)},get size(){return ss(this,!0)},has(r){return is.call(this,r,!0)},add:we("add"),set:we("set"),delete:we("delete"),clear:we("clear"),forEach:ns(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{i[r]=rs(r,!1,!1),e[r]=rs(r,!0,!1),t[r]=rs(r,!1,!0),s[r]=rs(r,!0,!0)}),[i,e,t,s]}const[ru,lu,ou,au]=nu();function br(i,t){const e=t?i?au:ou:i?lu:ru;return(s,n,r)=>n==="__v_isReactive"?!i:n==="__v_isReadonly"?i:n==="__v_raw"?s:Reflect.get(nt(e,n)&&n in s?e:s,n,r)}const hu={get:br(!1,!1)},uu={get:br(!1,!0)},cu={get:br(!0,!1)},ta=new WeakMap,ea=new WeakMap,ia=new WeakMap,fu=new WeakMap;function du(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function pu(i){return i.__v_skip||!Object.isExtensible(i)?0:du($h(i))}function Zi(i){return gi(i)?i:yr(i,!1,eu,hu,ta)}function vu(i){return yr(i,!1,su,uu,ea)}function sa(i){return yr(i,!0,iu,cu,ia)}function yr(i,t,e,s,n){if(!pt(i)||i.__v_raw&&!(t&&i.__v_isReactive))return i;const r=n.get(i);if(r)return r;const l=pu(i);if(l===0)return i;const o=new Proxy(i,l===2?s:e);return n.set(i,o),o}function di(i){return gi(i)?di(i.__v_raw):!!(i&&i.__v_isReactive)}function gi(i){return!!(i&&i.__v_isReadonly)}function Cs(i){return!!(i&&i.__v_isShallow)}function na(i){return di(i)||gi(i)}function q(i){const t=i&&i.__v_raw;return t?q(t):i}function ra(i){return Object.isExtensible(i)&&Ss(i,"__v_skip",!0),i}const Di=i=>pt(i)?Zi(i):i,wr=i=>pt(i)?sa(i):i;class la{constructor(t,e,s,n){this.getter=t,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new pr(()=>t(this._value),()=>zi(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=s}get value(){const t=q(this);return(!t._cacheable||t.effect.dirty)&&Pe(t._value,t._value=t.effect.run())&&zi(t,4),oa(t),t.effect._dirtyLevel>=2&&zi(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function mu(i,t,e=!1){let s,n;const r=J(i);return r?(s=i,n=Qt):(s=i.get,n=i.set),new la(s,n,r||!n,e)}function oa(i){var t;Le&&Ze&&(i=q(i),Zo(Ze,(t=i.dep)!=null?t:i.dep=Qo(()=>i.dep=void 0,i instanceof la?i:void 0)))}function zi(i,t=4,e){i=q(i);const s=i.dep;s&&Yo(s,t)}function Tt(i){return!!(i&&i.__v_isRef===!0)}function W(i){return ha(i,!1)}function aa(i){return ha(i,!0)}function ha(i,t){return Tt(i)?i:new gu(i,t)}class gu{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:q(t),this._value=e?t:Di(t)}get value(){return oa(this),this._value}set value(t){const e=this.__v_isShallow||Cs(t)||gi(t);t=e?t:q(t),Pe(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:Di(t),zi(this,4))}}function al(i){zi(i,4)}function rt(i){return Tt(i)?i.value:i}const bu={get:(i,t,e)=>rt(Reflect.get(i,t,e)),set:(i,t,e,s)=>{const n=i[t];return Tt(n)&&!Tt(e)?(n.value=e,!0):Reflect.set(i,t,e,s)}};function ua(i){return di(i)?i:new Proxy(i,bu)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ke(i,t,e,s){try{return s?i(...s):i()}catch(n){Ns(n,t,e)}}function Xt(i,t,e,s){if(J(i)){const r=ke(i,t,e,s);return r&&Fo(r)&&r.catch(l=>{Ns(l,t,e)}),r}const n=[];for(let r=0;r<i.length;r++)n.push(Xt(i[r],t,e,s));return n}function Ns(i,t,e,s=!0){const n=t?t.vnode:null;if(t){let r=t.parent;const l=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${e}`;for(;r;){const h=r.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](i,l,o)===!1)return}r=r.parent}const a=t.appContext.config.errorHandler;if(a){ke(a,null,10,[i,l,o]);return}}yu(i,e,n,s)}function yu(i,t,e,s=!0){console.error(i)}let Fi=!1,Un=!1;const zt=[];let he=0;const pi=[];let Ce=null,Ue=0;const ca=Promise.resolve();let _r=null;function Pt(i){const t=_r||ca;return i?t.then(this?i.bind(this):i):t}function wu(i){let t=he+1,e=zt.length;for(;t<e;){const s=t+e>>>1,n=zt[s],r=Bi(n);r<i||r===i&&n.pre?t=s+1:e=s}return t}function xr(i){(!zt.length||!zt.includes(i,Fi&&i.allowRecurse?he+1:he))&&(i.id==null?zt.push(i):zt.splice(wu(i.id),0,i),fa())}function fa(){!Fi&&!Un&&(Un=!0,_r=ca.then(pa))}function _u(i){const t=zt.indexOf(i);t>he&&zt.splice(t,1)}function xu(i){Z(i)?pi.push(...i):(!Ce||!Ce.includes(i,i.allowRecurse?Ue+1:Ue))&&pi.push(i),fa()}function hl(i,t,e=Fi?he+1:0){for(;e<zt.length;e++){const s=zt[e];if(s&&s.pre){if(i&&s.id!==i.uid)continue;zt.splice(e,1),e--,s()}}}function da(i){if(pi.length){const t=[...new Set(pi)].sort((e,s)=>Bi(e)-Bi(s));if(pi.length=0,Ce){Ce.push(...t);return}for(Ce=t,Ue=0;Ue<Ce.length;Ue++)Ce[Ue]();Ce=null,Ue=0}}const Bi=i=>i.id==null?1/0:i.id,Su=(i,t)=>{const e=Bi(i)-Bi(t);if(e===0){if(i.pre&&!t.pre)return-1;if(t.pre&&!i.pre)return 1}return e};function pa(i){Un=!1,Fi=!0,zt.sort(Su);try{for(he=0;he<zt.length;he++){const t=zt[he];t&&t.active!==!1&&ke(t,null,14)}}finally{he=0,zt.length=0,da(),Fi=!1,_r=null,(zt.length||pi.length)&&pa()}}function Cu(i,t,...e){if(i.isUnmounted)return;const s=i.vnode.props||mt;let n=e;const r=t.startsWith("update:"),l=r&&t.slice(7);if(l&&l in s){const u=`${l==="modelValue"?"model":l}Modifiers`,{number:c,trim:f}=s[u]||mt;f&&(n=e.map(d=>wt(d)?d.trim():d)),c&&(n=e.map(Dh))}let o,a=s[o=on(t)]||s[o=on(mi(t))];!a&&r&&(a=s[o=on(_i(t))]),a&&Xt(a,i,6,n);const h=s[o+"Once"];if(h){if(!i.emitted)i.emitted={};else if(i.emitted[o])return;i.emitted[o]=!0,Xt(h,i,6,n)}}function va(i,t,e=!1){const s=t.emitsCache,n=s.get(i);if(n!==void 0)return n;const r=i.emits;let l={},o=!1;if(!J(i)){const a=h=>{const u=va(h,t,!0);u&&(o=!0,St(l,u))};!e&&t.mixins.length&&t.mixins.forEach(a),i.extends&&a(i.extends),i.mixins&&i.mixins.forEach(a)}return!r&&!o?(pt(i)&&s.set(i,null),null):(Z(r)?r.forEach(a=>l[a]=null):St(l,r),pt(i)&&s.set(i,l),l)}function As(i,t){return!i||!Ls(t)?!1:(t=t.slice(2).replace(/Once$/,""),nt(i,t[0].toLowerCase()+t.slice(1))||nt(i,_i(t))||nt(i,t))}let $t=null,ma=null;function Ms(i){const t=$t;return $t=i,ma=i&&i.type.__scopeId||null,t}function It(i,t=$t,e){if(!t||i._n)return i;const s=(...n)=>{s._d&&wl(-1);const r=Ms(t);let l;try{l=i(...n)}finally{Ms(r),s._d&&wl(1)}return l};return s._n=!0,s._c=!0,s._d=!0,s}function un(i){const{type:t,vnode:e,proxy:s,withProxy:n,props:r,propsOptions:[l],slots:o,attrs:a,emit:h,render:u,renderCache:c,data:f,setupState:d,ctx:m,inheritAttrs:p}=i;let x,y;const _=Ms(i);try{if(e.shapeFlag&4){const b=n||s,M=b;x=ae(u.call(M,b,c,r,d,f,m)),y=a}else{const b=t;x=ae(b.length>1?b(r,{attrs:a,slots:o,emit:h}):b(r,null)),y=t.props?a:Mu(a)}}catch(b){ki.length=0,Ns(b,i,1),x=ht(Gt)}let w=x;if(y&&p!==!1){const b=Object.keys(y),{shapeFlag:M}=w;b.length&&M&7&&(l&&b.some(ur)&&(y=Ou(y,l)),w=fe(w,y))}return e.dirs&&(w=fe(w),w.dirs=w.dirs?w.dirs.concat(e.dirs):e.dirs),e.transition&&(w.transition=e.transition),x=w,Ms(_),x}const Mu=i=>{let t;for(const e in i)(e==="class"||e==="style"||Ls(e))&&((t||(t={}))[e]=i[e]);return t},Ou=(i,t)=>{const e={};for(const s in i)(!ur(s)||!(s.slice(9)in t))&&(e[s]=i[s]);return e};function Eu(i,t,e){const{props:s,children:n,component:r}=i,{props:l,children:o,patchFlag:a}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&a>=0){if(a&1024)return!0;if(a&16)return s?ul(s,l,h):!!l;if(a&8){const u=t.dynamicProps;for(let c=0;c<u.length;c++){const f=u[c];if(l[f]!==s[f]&&!As(h,f))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:s===l?!1:s?l?ul(s,l,h):!0:!!l;return!1}function ul(i,t,e){const s=Object.keys(t);if(s.length!==Object.keys(i).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(t[r]!==i[r]&&!As(e,r))return!0}return!1}function Tu({vnode:i,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===i&&(s.el=i.el),s===i)(i=t.vnode).el=e,t=t.parent;else break}}const zu=Symbol.for("v-ndc"),Iu=i=>i.__isSuspense;function Ru(i,t){t&&t.pendingBranch?Z(i)?t.effects.push(...i):t.effects.push(i):xu(i)}const Lu=Symbol.for("v-scx"),ku=()=>Et(Lu);function jt(i,t){return Sr(i,null,t)}const ls={};function ft(i,t,e){return Sr(i,t,e)}function Sr(i,t,{immediate:e,deep:s,flush:n,once:r,onTrack:l,onTrigger:o}=mt){if(t&&r){const O=t;t=(...N)=>{O(...N),M()}}const a=Rt,h=O=>s===!0?O:ai(O,s===!1?1:void 0);let u,c=!1,f=!1;if(Tt(i)?(u=()=>i.value,c=Cs(i)):di(i)?(u=()=>h(i),c=!0):Z(i)?(f=!0,c=i.some(O=>di(O)||Cs(O)),u=()=>i.map(O=>{if(Tt(O))return O.value;if(di(O))return h(O);if(J(O))return ke(O,a,2)})):J(i)?t?u=()=>ke(i,a,2):u=()=>(d&&d(),Xt(i,a,3,[m])):u=Qt,t&&s){const O=u;u=()=>ai(O())}let d,m=O=>{d=w.onStop=()=>{ke(O,a,4),d=w.onStop=void 0}},p;if(js)if(m=Qt,t?e&&Xt(t,a,3,[u(),f?[]:void 0,m]):u(),n==="sync"){const O=ku();p=O.__watcherHandles||(O.__watcherHandles=[])}else return Qt;let x=f?new Array(i.length).fill(ls):ls;const y=()=>{if(!(!w.active||!w.dirty))if(t){const O=w.run();(s||c||(f?O.some((N,S)=>Pe(N,x[S])):Pe(O,x)))&&(d&&d(),Xt(t,a,3,[O,x===ls?void 0:f&&x[0]===ls?[]:x,m]),x=O)}else w.run()};y.allowRecurse=!!t;let _;n==="sync"?_=y:n==="post"?_=()=>Ft(y,a&&a.suspense):(y.pre=!0,a&&(y.id=a.uid),_=()=>xr(y));const w=new pr(u,Qt,_),b=Zh(),M=()=>{w.stop(),b&&cr(b.effects,w)};return t?e?y():x=w.run():n==="post"?Ft(w.run.bind(w),a&&a.suspense):w.run(),p&&p.push(M),M}function Pu(i,t,e){const s=this.proxy,n=wt(i)?i.includes(".")?ga(s,i):()=>s[i]:i.bind(s,s);let r;J(t)?r=t:(r=t.handler,e=t);const l=Yi(this),o=Sr(n,r.bind(s),e);return l(),o}function ga(i,t){const e=t.split(".");return()=>{let s=i;for(let n=0;n<e.length&&s;n++)s=s[e[n]];return s}}function ai(i,t,e=0,s){if(!pt(i)||i.__v_skip)return i;if(t&&t>0){if(e>=t)return i;e++}if(s=s||new Set,s.has(i))return i;if(s.add(i),Tt(i))ai(i.value,t,e,s);else if(Z(i))for(let n=0;n<i.length;n++)ai(i[n],t,e,s);else if(Do(i)||fi(i))i.forEach(n=>{ai(n,t,e,s)});else if(Vo(i))for(const n in i)ai(i[n],t,e,s);return i}function Fe(i,t,e,s){const n=i.dirs,r=t&&t.dirs;for(let l=0;l<n.length;l++){const o=n[l];r&&(o.oldValue=r[l].value);let a=o.dir[s];a&&(ei(),Xt(a,e,8,[i.el,o,i,t]),ii())}}const Me=Symbol("_leaveCb"),os=Symbol("_enterCb");function $u(){const i={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return xt(()=>{i.isMounted=!0}),xa(()=>{i.isUnmounting=!0}),i}const Zt=[Function,Array],ba={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Zt,onEnter:Zt,onAfterEnter:Zt,onEnterCancelled:Zt,onBeforeLeave:Zt,onLeave:Zt,onAfterLeave:Zt,onLeaveCancelled:Zt,onBeforeAppear:Zt,onAppear:Zt,onAfterAppear:Zt,onAppearCancelled:Zt},Nu={name:"BaseTransition",props:ba,setup(i,{slots:t}){const e=yc(),s=$u();return()=>{const n=t.default&&wa(t.default(),!0);if(!n||!n.length)return;let r=n[0];if(n.length>1){for(const f of n)if(f.type!==Gt){r=f;break}}const l=q(i),{mode:o}=l;if(s.isLeaving)return cn(r);const a=cl(r);if(!a)return cn(r);const h=Kn(a,l,s,e);qn(a,h);const u=e.subTree,c=u&&cl(u);if(c&&c.type!==Gt&&!Ke(a,c)){const f=Kn(c,l,s,e);if(qn(c,f),o==="out-in")return s.isLeaving=!0,f.afterLeave=()=>{s.isLeaving=!1,e.update.active!==!1&&(e.effect.dirty=!0,e.update())},cn(r);o==="in-out"&&a.type!==Gt&&(f.delayLeave=(d,m,p)=>{const x=ya(s,c);x[String(c.key)]=c,d[Me]=()=>{m(),d[Me]=void 0,delete h.delayedLeave},h.delayedLeave=p})}return r}}},Au=Nu;function ya(i,t){const{leavingVNodes:e}=i;let s=e.get(t.type);return s||(s=Object.create(null),e.set(t.type,s)),s}function Kn(i,t,e,s){const{appear:n,mode:r,persisted:l=!1,onBeforeEnter:o,onEnter:a,onAfterEnter:h,onEnterCancelled:u,onBeforeLeave:c,onLeave:f,onAfterLeave:d,onLeaveCancelled:m,onBeforeAppear:p,onAppear:x,onAfterAppear:y,onAppearCancelled:_}=t,w=String(i.key),b=ya(e,i),M=(S,H)=>{S&&Xt(S,s,9,H)},O=(S,H)=>{const E=H[1];M(S,H),Z(S)?S.every(A=>A.length<=1)&&E():S.length<=1&&E()},N={mode:r,persisted:l,beforeEnter(S){let H=o;if(!e.isMounted)if(n)H=p||o;else return;S[Me]&&S[Me](!0);const E=b[w];E&&Ke(i,E)&&E.el[Me]&&E.el[Me](),M(H,[S])},enter(S){let H=a,E=h,A=u;if(!e.isMounted)if(n)H=x||a,E=y||h,A=_||u;else return;let L=!1;const B=S[os]=Y=>{L||(L=!0,Y?M(A,[S]):M(E,[S]),N.delayedLeave&&N.delayedLeave(),S[os]=void 0)};H?O(H,[S,B]):B()},leave(S,H){const E=String(i.key);if(S[os]&&S[os](!0),e.isUnmounting)return H();M(c,[S]);let A=!1;const L=S[Me]=B=>{A||(A=!0,H(),B?M(m,[S]):M(d,[S]),S[Me]=void 0,b[E]===i&&delete b[E])};b[E]=i,f?O(f,[S,L]):L()},clone(S){return Kn(S,t,e,s)}};return N}function cn(i){if(Ds(i))return i=fe(i),i.children=null,i}function cl(i){return Ds(i)?i.children?i.children[0]:void 0:i}function qn(i,t){i.shapeFlag&6&&i.component?qn(i.component.subTree,t):i.shapeFlag&128?(i.ssContent.transition=t.clone(i.ssContent),i.ssFallback.transition=t.clone(i.ssFallback)):i.transition=t}function wa(i,t=!1,e){let s=[],n=0;for(let r=0;r<i.length;r++){let l=i[r];const o=e==null?l.key:String(e)+String(l.key!=null?l.key:r);l.type===bt?(l.patchFlag&128&&n++,s=s.concat(wa(l.children,t,o))):(t||l.type!==Gt)&&s.push(o!=null?fe(l,{key:o}):l)}if(n>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function ct(i,t){return J(i)?St({name:i.name},t,{setup:i}):i}const Ii=i=>!!i.type.__asyncLoader,Ds=i=>i.type.__isKeepAlive;function Du(i,t){_a(i,"a",t)}function Fu(i,t){_a(i,"da",t)}function _a(i,t,e=Rt){const s=i.__wdc||(i.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return i()});if(Fs(t,s,e),e){let n=e.parent;for(;n&&n.parent;)Ds(n.parent.vnode)&&Bu(s,t,e,n),n=n.parent}}function Bu(i,t,e,s){const n=Fs(t,i,s,!0);Ae(()=>{cr(s[t],n)},e)}function Fs(i,t,e=Rt,s=!1){if(e){const n=e[i]||(e[i]=[]),r=t.__weh||(t.__weh=(...l)=>{if(e.isUnmounted)return;ei();const o=Yi(e),a=Xt(t,e,i,l);return o(),ii(),a});return s?n.unshift(r):n.push(r),r}}const ye=i=>(t,e=Rt)=>(!js||i==="sp")&&Fs(i,(...s)=>t(...s),e),Vu=ye("bm"),xt=ye("m"),ju=ye("bu"),Wu=ye("u"),xa=ye("bum"),Ae=ye("um"),Hu=ye("sp"),Uu=ye("rtg"),Ku=ye("rtc");function qu(i,t=Rt){Fs("ec",i,t)}function Cr(i,t,e,s){let n;const r=e&&e[s];if(Z(i)||wt(i)){n=new Array(i.length);for(let l=0,o=i.length;l<o;l++)n[l]=t(i[l],l,void 0,r&&r[l])}else if(typeof i=="number"){n=new Array(i);for(let l=0;l<i;l++)n[l]=t(l+1,l,void 0,r&&r[l])}else if(pt(i))if(i[Symbol.iterator])n=Array.from(i,(l,o)=>t(l,o,void 0,r&&r[o]));else{const l=Object.keys(i);n=new Array(l.length);for(let o=0,a=l.length;o<a;o++){const h=l[o];n[o]=t(i[h],h,o,r&&r[o])}}else n=[];return e&&(e[s]=n),n}function Zu(i,t,e={},s,n){if($t.isCE||$t.parent&&Ii($t.parent)&&$t.parent.isCE)return t!=="default"&&(e.name=t),ht("slot",e,s&&s());let r=i[t];r&&r._c&&(r._d=!1),at();const l=r&&Sa(r(e)),o=ce(bt,{key:e.key||l&&l.key||`_${t}`},l||(s?s():[]),l&&i._===1?64:-2);return!n&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),r&&r._c&&(r._d=!0),o}function Sa(i){return i.some(t=>Es(t)?!(t.type===Gt||t.type===bt&&!Sa(t.children)):!0)?i:null}const Zn=i=>i?Aa(i)?Tr(i)||i.proxy:Zn(i.parent):null,Ri=St(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>Zn(i.parent),$root:i=>Zn(i.root),$emit:i=>i.emit,$options:i=>Mr(i),$forceUpdate:i=>i.f||(i.f=()=>{i.effect.dirty=!0,xr(i.update)}),$nextTick:i=>i.n||(i.n=Pt.bind(i.proxy)),$watch:i=>Pu.bind(i)}),fn=(i,t)=>i!==mt&&!i.__isScriptSetup&&nt(i,t),Yu={get({_:i},t){const{ctx:e,setupState:s,data:n,props:r,accessCache:l,type:o,appContext:a}=i;let h;if(t[0]!=="$"){const d=l[t];if(d!==void 0)switch(d){case 1:return s[t];case 2:return n[t];case 4:return e[t];case 3:return r[t]}else{if(fn(s,t))return l[t]=1,s[t];if(n!==mt&&nt(n,t))return l[t]=2,n[t];if((h=i.propsOptions[0])&&nt(h,t))return l[t]=3,r[t];if(e!==mt&&nt(e,t))return l[t]=4,e[t];Yn&&(l[t]=0)}}const u=Ri[t];let c,f;if(u)return t==="$attrs"&&Vt(i,"get",t),u(i);if((c=o.__cssModules)&&(c=c[t]))return c;if(e!==mt&&nt(e,t))return l[t]=4,e[t];if(f=a.config.globalProperties,nt(f,t))return f[t]},set({_:i},t,e){const{data:s,setupState:n,ctx:r}=i;return fn(n,t)?(n[t]=e,!0):s!==mt&&nt(s,t)?(s[t]=e,!0):nt(i.props,t)||t[0]==="$"&&t.slice(1)in i?!1:(r[t]=e,!0)},has({_:{data:i,setupState:t,accessCache:e,ctx:s,appContext:n,propsOptions:r}},l){let o;return!!e[l]||i!==mt&&nt(i,l)||fn(t,l)||(o=r[0])&&nt(o,l)||nt(s,l)||nt(Ri,l)||nt(n.config.globalProperties,l)},defineProperty(i,t,e){return e.get!=null?i._.accessCache[t]=0:nt(e,"value")&&this.set(i,t,e.value,null),Reflect.defineProperty(i,t,e)}};function fl(i){return Z(i)?i.reduce((t,e)=>(t[e]=null,t),{}):i}let Yn=!0;function Qu(i){const t=Mr(i),e=i.proxy,s=i.ctx;Yn=!1,t.beforeCreate&&dl(t.beforeCreate,i,"bc");const{data:n,computed:r,methods:l,watch:o,provide:a,inject:h,created:u,beforeMount:c,mounted:f,beforeUpdate:d,updated:m,activated:p,deactivated:x,beforeDestroy:y,beforeUnmount:_,destroyed:w,unmounted:b,render:M,renderTracked:O,renderTriggered:N,errorCaptured:S,serverPrefetch:H,expose:E,inheritAttrs:A,components:L,directives:B,filters:Y}=t;if(h&&Xu(h,s,null),l)for(const lt in l){const tt=l[lt];J(tt)&&(s[lt]=tt.bind(e))}if(n){const lt=n.call(e,e);pt(lt)&&(i.data=Zi(lt))}if(Yn=!0,r)for(const lt in r){const tt=r[lt],Dt=J(tt)?tt.bind(e,e):J(tt.get)?tt.get.bind(e,e):Qt,pe=!J(tt)&&J(tt.set)?tt.set.bind(e):Qt,qt=F({get:Dt,set:pe});Object.defineProperty(s,lt,{enumerable:!0,configurable:!0,get:()=>qt.value,set:Wt=>qt.value=Wt})}if(o)for(const lt in o)Ca(o[lt],s,e,lt);if(a){const lt=J(a)?a.call(e):a;Reflect.ownKeys(lt).forEach(tt=>{ie(tt,lt[tt])})}u&&dl(u,i,"c");function G(lt,tt){Z(tt)?tt.forEach(Dt=>lt(Dt.bind(e))):tt&&lt(tt.bind(e))}if(G(Vu,c),G(xt,f),G(ju,d),G(Wu,m),G(Du,p),G(Fu,x),G(qu,S),G(Ku,O),G(Uu,N),G(xa,_),G(Ae,b),G(Hu,H),Z(E))if(E.length){const lt=i.exposed||(i.exposed={});E.forEach(tt=>{Object.defineProperty(lt,tt,{get:()=>e[tt],set:Dt=>e[tt]=Dt})})}else i.exposed||(i.exposed={});M&&i.render===Qt&&(i.render=M),A!=null&&(i.inheritAttrs=A),L&&(i.components=L),B&&(i.directives=B)}function Xu(i,t,e=Qt){Z(i)&&(i=Qn(i));for(const s in i){const n=i[s];let r;pt(n)?"default"in n?r=Et(n.from||s,n.default,!0):r=Et(n.from||s):r=Et(n),Tt(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:l=>r.value=l}):t[s]=r}}function dl(i,t,e){Xt(Z(i)?i.map(s=>s.bind(t.proxy)):i.bind(t.proxy),t,e)}function Ca(i,t,e,s){const n=s.includes(".")?ga(e,s):()=>e[s];if(wt(i)){const r=t[i];J(r)&&ft(n,r)}else if(J(i))ft(n,i.bind(e));else if(pt(i))if(Z(i))i.forEach(r=>Ca(r,t,e,s));else{const r=J(i.handler)?i.handler.bind(e):t[i.handler];J(r)&&ft(n,r,i)}}function Mr(i){const t=i.type,{mixins:e,extends:s}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:l}}=i.appContext,o=r.get(t);let a;return o?a=o:!n.length&&!e&&!s?a=t:(a={},n.length&&n.forEach(h=>Os(a,h,l,!0)),Os(a,t,l)),pt(t)&&r.set(t,a),a}function Os(i,t,e,s=!1){const{mixins:n,extends:r}=t;r&&Os(i,r,e,!0),n&&n.forEach(l=>Os(i,l,e,!0));for(const l in t)if(!(s&&l==="expose")){const o=Gu[l]||e&&e[l];i[l]=o?o(i[l],t[l]):t[l]}return i}const Gu={data:pl,props:vl,emits:vl,methods:Oi,computed:Oi,beforeCreate:kt,created:kt,beforeMount:kt,mounted:kt,beforeUpdate:kt,updated:kt,beforeDestroy:kt,beforeUnmount:kt,destroyed:kt,unmounted:kt,activated:kt,deactivated:kt,errorCaptured:kt,serverPrefetch:kt,components:Oi,directives:Oi,watch:tc,provide:pl,inject:Ju};function pl(i,t){return t?i?function(){return St(J(i)?i.call(this,this):i,J(t)?t.call(this,this):t)}:t:i}function Ju(i,t){return Oi(Qn(i),Qn(t))}function Qn(i){if(Z(i)){const t={};for(let e=0;e<i.length;e++)t[i[e]]=i[e];return t}return i}function kt(i,t){return i?[...new Set([].concat(i,t))]:t}function Oi(i,t){return i?St(Object.create(null),i,t):t}function vl(i,t){return i?Z(i)&&Z(t)?[...new Set([...i,...t])]:St(Object.create(null),fl(i),fl(t??{})):t}function tc(i,t){if(!i)return t;if(!t)return i;const e=St(Object.create(null),i);for(const s in t)e[s]=kt(i[s],t[s]);return e}function Ma(){return{app:null,config:{isNativeTag:kh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ec=0;function ic(i,t){return function(s,n=null){J(s)||(s=St({},s)),n!=null&&!pt(n)&&(n=null);const r=Ma(),l=new WeakSet;let o=!1;const a=r.app={_uid:ec++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:Mc,get config(){return r.config},set config(h){},use(h,...u){return l.has(h)||(h&&J(h.install)?(l.add(h),h.install(a,...u)):J(h)&&(l.add(h),h(a,...u))),a},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),a},component(h,u){return u?(r.components[h]=u,a):r.components[h]},directive(h,u){return u?(r.directives[h]=u,a):r.directives[h]},mount(h,u,c){if(!o){const f=ht(s,n);return f.appContext=r,c===!0?c="svg":c===!1&&(c=void 0),u&&t?t(f,h):i(f,h,c),o=!0,a._container=h,h.__vue_app__=a,Tr(f.component)||f.component.proxy}},unmount(){o&&(i(null,a._container),delete a._container.__vue_app__)},provide(h,u){return r.provides[h]=u,a},runWithContext(h){const u=Li;Li=a;try{return h()}finally{Li=u}}};return a}}let Li=null;function ie(i,t){if(Rt){let e=Rt.provides;const s=Rt.parent&&Rt.parent.provides;s===e&&(e=Rt.provides=Object.create(s)),e[i]=t}}function Et(i,t,e=!1){const s=Rt||$t;if(s||Li){const n=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:Li._context.provides;if(n&&i in n)return n[i];if(arguments.length>1)return e&&J(t)?t.call(s&&s.proxy):t}}function sc(i,t,e,s=!1){const n={},r={};Ss(r,Vs,1),i.propsDefaults=Object.create(null),Oa(i,t,n,r);for(const l in i.propsOptions[0])l in n||(n[l]=void 0);e?i.props=s?n:vu(n):i.type.props?i.props=n:i.props=r,i.attrs=r}function nc(i,t,e,s){const{props:n,attrs:r,vnode:{patchFlag:l}}=i,o=q(n),[a]=i.propsOptions;let h=!1;if((s||l>0)&&!(l&16)){if(l&8){const u=i.vnode.dynamicProps;for(let c=0;c<u.length;c++){let f=u[c];if(As(i.emitsOptions,f))continue;const d=t[f];if(a)if(nt(r,f))d!==r[f]&&(r[f]=d,h=!0);else{const m=mi(f);n[m]=Xn(a,o,m,d,i,!1)}else d!==r[f]&&(r[f]=d,h=!0)}}}else{Oa(i,t,n,r)&&(h=!0);let u;for(const c in o)(!t||!nt(t,c)&&((u=_i(c))===c||!nt(t,u)))&&(a?e&&(e[c]!==void 0||e[u]!==void 0)&&(n[c]=Xn(a,o,c,void 0,i,!0)):delete n[c]);if(r!==o)for(const c in r)(!t||!nt(t,c))&&(delete r[c],h=!0)}h&&be(i,"set","$attrs")}function Oa(i,t,e,s){const[n,r]=i.propsOptions;let l=!1,o;if(t)for(let a in t){if(Ti(a))continue;const h=t[a];let u;n&&nt(n,u=mi(a))?!r||!r.includes(u)?e[u]=h:(o||(o={}))[u]=h:As(i.emitsOptions,a)||(!(a in s)||h!==s[a])&&(s[a]=h,l=!0)}if(r){const a=q(e),h=o||mt;for(let u=0;u<r.length;u++){const c=r[u];e[c]=Xn(n,a,c,h[c],i,!nt(h,c))}}return l}function Xn(i,t,e,s,n,r){const l=i[e];if(l!=null){const o=nt(l,"default");if(o&&s===void 0){const a=l.default;if(l.type!==Function&&!l.skipFactory&&J(a)){const{propsDefaults:h}=n;if(e in h)s=h[e];else{const u=Yi(n);s=h[e]=a.call(null,t),u()}}else s=a}l[0]&&(r&&!o?s=!1:l[1]&&(s===""||s===_i(e))&&(s=!0))}return s}function Ea(i,t,e=!1){const s=t.propsCache,n=s.get(i);if(n)return n;const r=i.props,l={},o=[];let a=!1;if(!J(i)){const u=c=>{a=!0;const[f,d]=Ea(c,t,!0);St(l,f),d&&o.push(...d)};!e&&t.mixins.length&&t.mixins.forEach(u),i.extends&&u(i.extends),i.mixins&&i.mixins.forEach(u)}if(!r&&!a)return pt(i)&&s.set(i,ci),ci;if(Z(r))for(let u=0;u<r.length;u++){const c=mi(r[u]);ml(c)&&(l[c]=mt)}else if(r)for(const u in r){const c=mi(u);if(ml(c)){const f=r[u],d=l[c]=Z(f)||J(f)?{type:f}:St({},f);if(d){const m=yl(Boolean,d.type),p=yl(String,d.type);d[0]=m>-1,d[1]=p<0||m<p,(m>-1||nt(d,"default"))&&o.push(c)}}}const h=[l,o];return pt(i)&&s.set(i,h),h}function ml(i){return i[0]!=="$"&&!Ti(i)}function gl(i){return i===null?"null":typeof i=="function"?i.name||"":typeof i=="object"&&i.constructor&&i.constructor.name||""}function bl(i,t){return gl(i)===gl(t)}function yl(i,t){return Z(t)?t.findIndex(e=>bl(e,i)):J(t)&&bl(t,i)?0:-1}const Ta=i=>i[0]==="_"||i==="$stable",Or=i=>Z(i)?i.map(ae):[ae(i)],rc=(i,t,e)=>{if(t._n)return t;const s=It((...n)=>Or(t(...n)),e);return s._c=!1,s},za=(i,t,e)=>{const s=i._ctx;for(const n in i){if(Ta(n))continue;const r=i[n];if(J(r))t[n]=rc(n,r,s);else if(r!=null){const l=Or(r);t[n]=()=>l}}},Ia=(i,t)=>{const e=Or(t);i.slots.default=()=>e},lc=(i,t)=>{if(i.vnode.shapeFlag&32){const e=t._;e?(i.slots=q(t),Ss(t,"_",e)):za(t,i.slots={})}else i.slots={},t&&Ia(i,t);Ss(i.slots,Vs,1)},oc=(i,t,e)=>{const{vnode:s,slots:n}=i;let r=!0,l=mt;if(s.shapeFlag&32){const o=t._;o?e&&o===1?r=!1:(St(n,t),!e&&o===1&&delete n._):(r=!t.$stable,za(t,n)),l=t}else t&&(Ia(i,t),l={default:1});if(r)for(const o in n)!Ta(o)&&l[o]==null&&delete n[o]};function Gn(i,t,e,s,n=!1){if(Z(i)){i.forEach((f,d)=>Gn(f,t&&(Z(t)?t[d]:t),e,s,n));return}if(Ii(s)&&!n)return;const r=s.shapeFlag&4?Tr(s.component)||s.component.proxy:s.el,l=n?null:r,{i:o,r:a}=i,h=t&&t.r,u=o.refs===mt?o.refs={}:o.refs,c=o.setupState;if(h!=null&&h!==a&&(wt(h)?(u[h]=null,nt(c,h)&&(c[h]=null)):Tt(h)&&(h.value=null)),J(a))ke(a,o,12,[l,u]);else{const f=wt(a),d=Tt(a);if(f||d){const m=()=>{if(i.f){const p=f?nt(c,a)?c[a]:u[a]:a.value;n?Z(p)&&cr(p,r):Z(p)?p.includes(r)||p.push(r):f?(u[a]=[r],nt(c,a)&&(c[a]=u[a])):(a.value=[r],i.k&&(u[i.k]=a.value))}else f?(u[a]=l,nt(c,a)&&(c[a]=l)):d&&(a.value=l,i.k&&(u[i.k]=l))};l?(m.id=-1,Ft(m,e)):m()}}}const Ft=Ru;function ac(i){return hc(i)}function hc(i,t){const e=Wo();e.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:l,createText:o,createComment:a,setText:h,setElementText:u,parentNode:c,nextSibling:f,setScopeId:d=Qt,insertStaticContent:m}=i,p=(v,g,C,T=null,z=null,P=null,D=void 0,k=null,$=!!g.dynamicChildren)=>{if(v===g)return;v&&!Ke(v,g)&&(T=ts(v),Wt(v,z,P,!0),v=null),g.patchFlag===-2&&($=!1,g.dynamicChildren=null);const{type:I,ref:V,shapeFlag:K}=g;switch(I){case Bs:x(v,g,C,T);break;case Gt:y(v,g,C,T);break;case pn:v==null&&_(g,C,T,D);break;case bt:L(v,g,C,T,z,P,D,k,$);break;default:K&1?M(v,g,C,T,z,P,D,k,$):K&6?B(v,g,C,T,z,P,D,k,$):(K&64||K&128)&&I.process(v,g,C,T,z,P,D,k,$,si)}V!=null&&z&&Gn(V,v&&v.ref,P,g||v,!g)},x=(v,g,C,T)=>{if(v==null)s(g.el=o(g.children),C,T);else{const z=g.el=v.el;g.children!==v.children&&h(z,g.children)}},y=(v,g,C,T)=>{v==null?s(g.el=a(g.children||""),C,T):g.el=v.el},_=(v,g,C,T)=>{[v.el,v.anchor]=m(v.children,g,C,T,v.el,v.anchor)},w=({el:v,anchor:g},C,T)=>{let z;for(;v&&v!==g;)z=f(v),s(v,C,T),v=z;s(g,C,T)},b=({el:v,anchor:g})=>{let C;for(;v&&v!==g;)C=f(v),n(v),v=C;n(g)},M=(v,g,C,T,z,P,D,k,$)=>{g.type==="svg"?D="svg":g.type==="math"&&(D="mathml"),v==null?O(g,C,T,z,P,D,k,$):H(v,g,z,P,D,k,$)},O=(v,g,C,T,z,P,D,k)=>{let $,I;const{props:V,shapeFlag:K,transition:U,dirs:Q}=v;if($=v.el=l(v.type,P,V&&V.is,V),K&8?u($,v.children):K&16&&S(v.children,$,null,T,z,dn(v,P),D,k),Q&&Fe(v,null,T,"created"),N($,v,v.scopeId,D,T),V){for(const ut in V)ut!=="value"&&!Ti(ut)&&r($,ut,null,V[ut],P,v.children,T,z,ve);"value"in V&&r($,"value",null,V.value,P),(I=V.onVnodeBeforeMount)&&le(I,T,v)}Q&&Fe(v,null,T,"beforeMount");const it=uc(z,U);it&&U.beforeEnter($),s($,g,C),((I=V&&V.onVnodeMounted)||it||Q)&&Ft(()=>{I&&le(I,T,v),it&&U.enter($),Q&&Fe(v,null,T,"mounted")},z)},N=(v,g,C,T,z)=>{if(C&&d(v,C),T)for(let P=0;P<T.length;P++)d(v,T[P]);if(z){let P=z.subTree;if(g===P){const D=z.vnode;N(v,D,D.scopeId,D.slotScopeIds,z.parent)}}},S=(v,g,C,T,z,P,D,k,$=0)=>{for(let I=$;I<v.length;I++){const V=v[I]=k?Oe(v[I]):ae(v[I]);p(null,V,g,C,T,z,P,D,k)}},H=(v,g,C,T,z,P,D)=>{const k=g.el=v.el;let{patchFlag:$,dynamicChildren:I,dirs:V}=g;$|=v.patchFlag&16;const K=v.props||mt,U=g.props||mt;let Q;if(C&&Be(C,!1),(Q=U.onVnodeBeforeUpdate)&&le(Q,C,g,v),V&&Fe(g,v,C,"beforeUpdate"),C&&Be(C,!0),I?E(v.dynamicChildren,I,k,C,T,dn(g,z),P):D||tt(v,g,k,null,C,T,dn(g,z),P,!1),$>0){if($&16)A(k,g,K,U,C,T,z);else if($&2&&K.class!==U.class&&r(k,"class",null,U.class,z),$&4&&r(k,"style",K.style,U.style,z),$&8){const it=g.dynamicProps;for(let ut=0;ut<it.length;ut++){const vt=it[ut],Ct=K[vt],Jt=U[vt];(Jt!==Ct||vt==="value")&&r(k,vt,Ct,Jt,z,v.children,C,T,ve)}}$&1&&v.children!==g.children&&u(k,g.children)}else!D&&I==null&&A(k,g,K,U,C,T,z);((Q=U.onVnodeUpdated)||V)&&Ft(()=>{Q&&le(Q,C,g,v),V&&Fe(g,v,C,"updated")},T)},E=(v,g,C,T,z,P,D)=>{for(let k=0;k<g.length;k++){const $=v[k],I=g[k],V=$.el&&($.type===bt||!Ke($,I)||$.shapeFlag&70)?c($.el):C;p($,I,V,null,T,z,P,D,!0)}},A=(v,g,C,T,z,P,D)=>{if(C!==T){if(C!==mt)for(const k in C)!Ti(k)&&!(k in T)&&r(v,k,C[k],null,D,g.children,z,P,ve);for(const k in T){if(Ti(k))continue;const $=T[k],I=C[k];$!==I&&k!=="value"&&r(v,k,I,$,D,g.children,z,P,ve)}"value"in T&&r(v,"value",C.value,T.value,D)}},L=(v,g,C,T,z,P,D,k,$)=>{const I=g.el=v?v.el:o(""),V=g.anchor=v?v.anchor:o("");let{patchFlag:K,dynamicChildren:U,slotScopeIds:Q}=g;Q&&(k=k?k.concat(Q):Q),v==null?(s(I,C,T),s(V,C,T),S(g.children||[],C,V,z,P,D,k,$)):K>0&&K&64&&U&&v.dynamicChildren?(E(v.dynamicChildren,U,C,z,P,D,k),(g.key!=null||z&&g===z.subTree)&&Ra(v,g,!0)):tt(v,g,C,V,z,P,D,k,$)},B=(v,g,C,T,z,P,D,k,$)=>{g.slotScopeIds=k,v==null?g.shapeFlag&512?z.ctx.activate(g,C,T,D,$):Y(g,C,T,z,P,D,$):et(v,g,$)},Y=(v,g,C,T,z,P,D)=>{const k=v.component=bc(v,T,z);if(Ds(v)&&(k.ctx.renderer=si),wc(k),k.asyncDep){if(z&&z.registerDep(k,G),!v.el){const $=k.subTree=ht(Gt);y(null,$,g,C)}}else G(k,v,g,C,z,P,D)},et=(v,g,C)=>{const T=g.component=v.component;if(Eu(v,g,C))if(T.asyncDep&&!T.asyncResolved){lt(T,g,C);return}else T.next=g,_u(T.update),T.effect.dirty=!0,T.update();else g.el=v.el,T.vnode=g},G=(v,g,C,T,z,P,D)=>{const k=()=>{if(v.isMounted){let{next:V,bu:K,u:U,parent:Q,vnode:it}=v;{const ni=La(v);if(ni){V&&(V.el=it.el,lt(v,V,D)),ni.asyncDep.then(()=>{v.isUnmounted||k()});return}}let ut=V,vt;Be(v,!1),V?(V.el=it.el,lt(v,V,D)):V=it,K&&an(K),(vt=V.props&&V.props.onVnodeBeforeUpdate)&&le(vt,Q,V,it),Be(v,!0);const Ct=un(v),Jt=v.subTree;v.subTree=Ct,p(Jt,Ct,c(Jt.el),ts(Jt),v,z,P),V.el=Ct.el,ut===null&&Tu(v,Ct.el),U&&Ft(U,z),(vt=V.props&&V.props.onVnodeUpdated)&&Ft(()=>le(vt,Q,V,it),z)}else{let V;const{el:K,props:U}=g,{bm:Q,m:it,parent:ut}=v,vt=Ii(g);if(Be(v,!1),Q&&an(Q),!vt&&(V=U&&U.onVnodeBeforeMount)&&le(V,ut,g),Be(v,!0),K&&ln){const Ct=()=>{v.subTree=un(v),ln(K,v.subTree,v,z,null)};vt?g.type.__asyncLoader().then(()=>!v.isUnmounted&&Ct()):Ct()}else{const Ct=v.subTree=un(v);p(null,Ct,C,T,v,z,P),g.el=Ct.el}if(it&&Ft(it,z),!vt&&(V=U&&U.onVnodeMounted)){const Ct=g;Ft(()=>le(V,ut,Ct),z)}(g.shapeFlag&256||ut&&Ii(ut.vnode)&&ut.vnode.shapeFlag&256)&&v.a&&Ft(v.a,z),v.isMounted=!0,g=C=T=null}},$=v.effect=new pr(k,Qt,()=>xr(I),v.scope),I=v.update=()=>{$.dirty&&$.run()};I.id=v.uid,Be(v,!0),I()},lt=(v,g,C)=>{g.component=v;const T=v.vnode.props;v.vnode=g,v.next=null,nc(v,g.props,T,C),oc(v,g.children,C),ei(),hl(v),ii()},tt=(v,g,C,T,z,P,D,k,$=!1)=>{const I=v&&v.children,V=v?v.shapeFlag:0,K=g.children,{patchFlag:U,shapeFlag:Q}=g;if(U>0){if(U&128){pe(I,K,C,T,z,P,D,k,$);return}else if(U&256){Dt(I,K,C,T,z,P,D,k,$);return}}Q&8?(V&16&&ve(I,z,P),K!==I&&u(C,K)):V&16?Q&16?pe(I,K,C,T,z,P,D,k,$):ve(I,z,P,!0):(V&8&&u(C,""),Q&16&&S(K,C,T,z,P,D,k,$))},Dt=(v,g,C,T,z,P,D,k,$)=>{v=v||ci,g=g||ci;const I=v.length,V=g.length,K=Math.min(I,V);let U;for(U=0;U<K;U++){const Q=g[U]=$?Oe(g[U]):ae(g[U]);p(v[U],Q,C,null,z,P,D,k,$)}I>V?ve(v,z,P,!0,!1,K):S(g,C,T,z,P,D,k,$,K)},pe=(v,g,C,T,z,P,D,k,$)=>{let I=0;const V=g.length;let K=v.length-1,U=V-1;for(;I<=K&&I<=U;){const Q=v[I],it=g[I]=$?Oe(g[I]):ae(g[I]);if(Ke(Q,it))p(Q,it,C,null,z,P,D,k,$);else break;I++}for(;I<=K&&I<=U;){const Q=v[K],it=g[U]=$?Oe(g[U]):ae(g[U]);if(Ke(Q,it))p(Q,it,C,null,z,P,D,k,$);else break;K--,U--}if(I>K){if(I<=U){const Q=U+1,it=Q<V?g[Q].el:T;for(;I<=U;)p(null,g[I]=$?Oe(g[I]):ae(g[I]),C,it,z,P,D,k,$),I++}}else if(I>U)for(;I<=K;)Wt(v[I],z,P,!0),I++;else{const Q=I,it=I,ut=new Map;for(I=it;I<=U;I++){const Ht=g[I]=$?Oe(g[I]):ae(g[I]);Ht.key!=null&&ut.set(Ht.key,I)}let vt,Ct=0;const Jt=U-it+1;let ni=!1,Xr=0;const Si=new Array(Jt);for(I=0;I<Jt;I++)Si[I]=0;for(I=Q;I<=K;I++){const Ht=v[I];if(Ct>=Jt){Wt(Ht,z,P,!0);continue}let re;if(Ht.key!=null)re=ut.get(Ht.key);else for(vt=it;vt<=U;vt++)if(Si[vt-it]===0&&Ke(Ht,g[vt])){re=vt;break}re===void 0?Wt(Ht,z,P,!0):(Si[re-it]=I+1,re>=Xr?Xr=re:ni=!0,p(Ht,g[re],C,null,z,P,D,k,$),Ct++)}const Gr=ni?cc(Si):ci;for(vt=Gr.length-1,I=Jt-1;I>=0;I--){const Ht=it+I,re=g[Ht],Jr=Ht+1<V?g[Ht+1].el:T;Si[I]===0?p(null,re,C,Jr,z,P,D,k,$):ni&&(vt<0||I!==Gr[vt]?qt(re,C,Jr,2):vt--)}}},qt=(v,g,C,T,z=null)=>{const{el:P,type:D,transition:k,children:$,shapeFlag:I}=v;if(I&6){qt(v.component.subTree,g,C,T);return}if(I&128){v.suspense.move(g,C,T);return}if(I&64){D.move(v,g,C,si);return}if(D===bt){s(P,g,C);for(let K=0;K<$.length;K++)qt($[K],g,C,T);s(v.anchor,g,C);return}if(D===pn){w(v,g,C);return}if(T!==2&&I&1&&k)if(T===0)k.beforeEnter(P),s(P,g,C),Ft(()=>k.enter(P),z);else{const{leave:K,delayLeave:U,afterLeave:Q}=k,it=()=>s(P,g,C),ut=()=>{K(P,()=>{it(),Q&&Q()})};U?U(P,it,ut):ut()}else s(P,g,C)},Wt=(v,g,C,T=!1,z=!1)=>{const{type:P,props:D,ref:k,children:$,dynamicChildren:I,shapeFlag:V,patchFlag:K,dirs:U}=v;if(k!=null&&Gn(k,null,C,v,!0),V&256){g.ctx.deactivate(v);return}const Q=V&1&&U,it=!Ii(v);let ut;if(it&&(ut=D&&D.onVnodeBeforeUnmount)&&le(ut,g,v),V&6)Lh(v.component,C,T);else{if(V&128){v.suspense.unmount(C,T);return}Q&&Fe(v,null,g,"beforeUnmount"),V&64?v.type.remove(v,g,C,z,si,T):I&&(P!==bt||K>0&&K&64)?ve(I,g,C,!1,!0):(P===bt&&K&384||!z&&V&16)&&ve($,g,C),T&&Ji(v)}(it&&(ut=D&&D.onVnodeUnmounted)||Q)&&Ft(()=>{ut&&le(ut,g,v),Q&&Fe(v,null,g,"unmounted")},C)},Ji=v=>{const{type:g,el:C,anchor:T,transition:z}=v;if(g===bt){sn(C,T);return}if(g===pn){b(v);return}const P=()=>{n(C),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(v.shapeFlag&1&&z&&!z.persisted){const{leave:D,delayLeave:k}=z,$=()=>D(C,P);k?k(v.el,P,$):$()}else P()},sn=(v,g)=>{let C;for(;v!==g;)C=f(v),n(v),v=C;n(g)},Lh=(v,g,C)=>{const{bum:T,scope:z,update:P,subTree:D,um:k}=v;T&&an(T),z.stop(),P&&(P.active=!1,Wt(D,v,g,C)),k&&Ft(k,g),Ft(()=>{v.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},ve=(v,g,C,T=!1,z=!1,P=0)=>{for(let D=P;D<v.length;D++)Wt(v[D],g,C,T,z)},ts=v=>v.shapeFlag&6?ts(v.component.subTree):v.shapeFlag&128?v.suspense.next():f(v.anchor||v.el);let nn=!1;const Qr=(v,g,C)=>{v==null?g._vnode&&Wt(g._vnode,null,null,!0):p(g._vnode||null,v,g,null,null,null,C),nn||(nn=!0,hl(),da(),nn=!1),g._vnode=v},si={p,um:Wt,m:qt,r:Ji,mt:Y,mc:S,pc:tt,pbc:E,n:ts,o:i};let rn,ln;return t&&([rn,ln]=t(si)),{render:Qr,hydrate:rn,createApp:ic(Qr,rn)}}function dn({type:i,props:t},e){return e==="svg"&&i==="foreignObject"||e==="mathml"&&i==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function Be({effect:i,update:t},e){i.allowRecurse=t.allowRecurse=e}function uc(i,t){return(!i||i&&!i.pendingBranch)&&t&&!t.persisted}function Ra(i,t,e=!1){const s=i.children,n=t.children;if(Z(s)&&Z(n))for(let r=0;r<s.length;r++){const l=s[r];let o=n[r];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[r]=Oe(n[r]),o.el=l.el),e||Ra(l,o)),o.type===Bs&&(o.el=l.el)}}function cc(i){const t=i.slice(),e=[0];let s,n,r,l,o;const a=i.length;for(s=0;s<a;s++){const h=i[s];if(h!==0){if(n=e[e.length-1],i[n]<h){t[s]=n,e.push(s);continue}for(r=0,l=e.length-1;r<l;)o=r+l>>1,i[e[o]]<h?r=o+1:l=o;h<i[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,l=e[r-1];r-- >0;)e[r]=l,l=t[l];return e}function La(i){const t=i.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:La(t)}const fc=i=>i.__isTeleport,bt=Symbol.for("v-fgt"),Bs=Symbol.for("v-txt"),Gt=Symbol.for("v-cmt"),pn=Symbol.for("v-stc"),ki=[];let ee=null;function at(i=!1){ki.push(ee=i?null:[])}function dc(){ki.pop(),ee=ki[ki.length-1]||null}let Vi=1;function wl(i){Vi+=i}function ka(i){return i.dynamicChildren=Vi>0?ee||ci:null,dc(),Vi>0&&ee&&ee.push(i),i}function _t(i,t,e,s,n,r){return ka(st(i,t,e,s,n,r,!0))}function ce(i,t,e,s,n){return ka(ht(i,t,e,s,n,!0))}function Es(i){return i?i.__v_isVNode===!0:!1}function Ke(i,t){return i.type===t.type&&i.key===t.key}const Vs="__vInternal",Pa=({key:i})=>i??null,ws=({ref:i,ref_key:t,ref_for:e})=>(typeof i=="number"&&(i=""+i),i!=null?wt(i)||Tt(i)||J(i)?{i:$t,r:i,k:t,f:!!e}:i:null);function st(i,t=null,e=null,s=0,n=null,r=i===bt?0:1,l=!1,o=!1){const a={__v_isVNode:!0,__v_skip:!0,type:i,props:t,key:t&&Pa(t),ref:t&&ws(t),scopeId:ma,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:$t};return o?(Er(a,e),r&128&&i.normalize(a)):e&&(a.shapeFlag|=wt(e)?8:16),Vi>0&&!l&&ee&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&ee.push(a),a}const ht=pc;function pc(i,t=null,e=null,s=0,n=null,r=!1){if((!i||i===zu)&&(i=Gt),Es(i)){const o=fe(i,t,!0);return e&&Er(o,e),Vi>0&&!r&&ee&&(o.shapeFlag&6?ee[ee.indexOf(i)]=o:ee.push(o)),o.patchFlag|=-2,o}if(Cc(i)&&(i=i.__vccOpts),t){t=vc(t);let{class:o,style:a}=t;o&&!wt(o)&&(t.class=Kt(o)),pt(a)&&(na(a)&&!Z(a)&&(a=St({},a)),t.style=dr(a))}const l=wt(i)?1:Iu(i)?128:fc(i)?64:pt(i)?4:J(i)?2:0;return st(i,t,e,s,n,l,r,!0)}function vc(i){return i?na(i)||Vs in i?St({},i):i:null}function fe(i,t,e=!1){const{props:s,ref:n,patchFlag:r,children:l}=i,o=t?Na(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:i.type,props:o,key:o&&Pa(o),ref:t&&t.ref?e&&n?Z(n)?n.concat(ws(t)):[n,ws(t)]:ws(t):n,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:l,target:i.target,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:t&&i.type!==bt?r===-1?16:r|16:r,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:i.transition,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&fe(i.ssContent),ssFallback:i.ssFallback&&fe(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce}}function $a(i=" ",t=0){return ht(Bs,null,i,t)}function ze(i="",t=!1){return t?(at(),ce(Gt,null,i)):ht(Gt,null,i)}function ae(i){return i==null||typeof i=="boolean"?ht(Gt):Z(i)?ht(bt,null,i.slice()):typeof i=="object"?Oe(i):ht(Bs,null,String(i))}function Oe(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:fe(i)}function Er(i,t){let e=0;const{shapeFlag:s}=i;if(t==null)t=null;else if(Z(t))e=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),Er(i,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!(Vs in t)?t._ctx=$t:n===3&&$t&&($t.slots._===1?t._=1:(t._=2,i.patchFlag|=1024))}else J(t)?(t={default:t,_ctx:$t},e=32):(t=String(t),s&64?(e=16,t=[$a(t)]):e=8);i.children=t,i.shapeFlag|=e}function Na(...i){const t={};for(let e=0;e<i.length;e++){const s=i[e];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=Kt([t.class,s.class]));else if(n==="style")t.style=dr([t.style,s.style]);else if(Ls(n)){const r=t[n],l=s[n];l&&r!==l&&!(Z(r)&&r.includes(l))&&(t[n]=r?[].concat(r,l):l)}else n!==""&&(t[n]=s[n])}return t}function le(i,t,e,s=null){Xt(i,t,7,[e,s])}const mc=Ma();let gc=0;function bc(i,t,e){const s=i.type,n=(t?t.appContext:i.appContext)||mc,r={uid:gc++,vnode:i,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new Kh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ea(s,n),emitsOptions:va(s,n),emit:null,emitted:null,propsDefaults:mt,inheritAttrs:s.inheritAttrs,ctx:mt,data:mt,props:mt,attrs:mt,slots:mt,refs:mt,setupState:mt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Cu.bind(null,r),i.ce&&i.ce(r),r}let Rt=null;const yc=()=>Rt||$t;let Ts,Jn;{const i=Wo(),t=(e,s)=>{let n;return(n=i[e])||(n=i[e]=[]),n.push(s),r=>{n.length>1?n.forEach(l=>l(r)):n[0](r)}};Ts=t("__VUE_INSTANCE_SETTERS__",e=>Rt=e),Jn=t("__VUE_SSR_SETTERS__",e=>js=e)}const Yi=i=>{const t=Rt;return Ts(i),i.scope.on(),()=>{i.scope.off(),Ts(t)}},_l=()=>{Rt&&Rt.scope.off(),Ts(null)};function Aa(i){return i.vnode.shapeFlag&4}let js=!1;function wc(i,t=!1){t&&Jn(t);const{props:e,children:s}=i.vnode,n=Aa(i);sc(i,e,n,t),lc(i,s);const r=n?_c(i,t):void 0;return t&&Jn(!1),r}function _c(i,t){const e=i.type;i.accessCache=Object.create(null),i.proxy=ra(new Proxy(i.ctx,Yu));const{setup:s}=e;if(s){const n=i.setupContext=s.length>1?Sc(i):null,r=Yi(i);ei();const l=ke(s,i,0,[i.props,n]);if(ii(),r(),Fo(l)){if(l.then(_l,_l),t)return l.then(o=>{xl(i,o,t)}).catch(o=>{Ns(o,i,0)});i.asyncDep=l}else xl(i,l,t)}else Da(i,t)}function xl(i,t,e){J(t)?i.type.__ssrInlineRender?i.ssrRender=t:i.render=t:pt(t)&&(i.setupState=ua(t)),Da(i,e)}let Sl;function Da(i,t,e){const s=i.type;if(!i.render){if(!t&&Sl&&!s.render){const n=s.template||Mr(i).template;if(n){const{isCustomElement:r,compilerOptions:l}=i.appContext.config,{delimiters:o,compilerOptions:a}=s,h=St(St({isCustomElement:r,delimiters:o},l),a);s.render=Sl(n,h)}}i.render=s.render||Qt}{const n=Yi(i);ei();try{Qu(i)}finally{ii(),n()}}}function xc(i){return i.attrsProxy||(i.attrsProxy=new Proxy(i.attrs,{get(t,e){return Vt(i,"get","$attrs"),t[e]}}))}function Sc(i){const t=e=>{i.exposed=e||{}};return{get attrs(){return xc(i)},slots:i.slots,emit:i.emit,expose:t}}function Tr(i){if(i.exposed)return i.exposeProxy||(i.exposeProxy=new Proxy(ua(ra(i.exposed)),{get(t,e){if(e in t)return t[e];if(e in Ri)return Ri[e](i)},has(t,e){return e in t||e in Ri}}))}function Cc(i){return J(i)&&"__vccOpts"in i}const F=(i,t)=>mu(i,t,js);function Nt(i,t,e){const s=arguments.length;return s===2?pt(t)&&!Z(t)?Es(t)?ht(i,null,[t]):ht(i,t):ht(i,null,t):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&Es(e)&&(e=[e]),ht(i,t,e))}const Mc="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Oc="http://www.w3.org/2000/svg",Ec="http://www.w3.org/1998/Math/MathML",Ee=typeof document<"u"?document:null,Cl=Ee&&Ee.createElement("template"),Tc={insert:(i,t,e)=>{t.insertBefore(i,e||null)},remove:i=>{const t=i.parentNode;t&&t.removeChild(i)},createElement:(i,t,e,s)=>{const n=t==="svg"?Ee.createElementNS(Oc,i):t==="mathml"?Ee.createElementNS(Ec,i):Ee.createElement(i,e?{is:e}:void 0);return i==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:i=>Ee.createTextNode(i),createComment:i=>Ee.createComment(i),setText:(i,t)=>{i.nodeValue=t},setElementText:(i,t)=>{i.textContent=t},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>Ee.querySelector(i),setScopeId(i,t){i.setAttribute(t,"")},insertStaticContent(i,t,e,s,n,r){const l=e?e.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),e),!(n===r||!(n=n.nextSibling)););else{Cl.innerHTML=s==="svg"?`<svg>${i}</svg>`:s==="mathml"?`<math>${i}</math>`:i;const o=Cl.content;if(s==="svg"||s==="mathml"){const a=o.firstChild;for(;a.firstChild;)o.appendChild(a.firstChild);o.removeChild(a)}t.insertBefore(o,e)}return[l?l.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},_e="transition",Ci="animation",ji=Symbol("_vtc"),zr=(i,{slots:t})=>Nt(Au,zc(i),t);zr.displayName="Transition";const Fa={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};zr.props=St({},ba,Fa);const Ve=(i,t=[])=>{Z(i)?i.forEach(e=>e(...t)):i&&i(...t)},Ml=i=>i?Z(i)?i.some(t=>t.length>1):i.length>1:!1;function zc(i){const t={};for(const L in i)L in Fa||(t[L]=i[L]);if(i.css===!1)return t;const{name:e="v",type:s,duration:n,enterFromClass:r=`${e}-enter-from`,enterActiveClass:l=`${e}-enter-active`,enterToClass:o=`${e}-enter-to`,appearFromClass:a=r,appearActiveClass:h=l,appearToClass:u=o,leaveFromClass:c=`${e}-leave-from`,leaveActiveClass:f=`${e}-leave-active`,leaveToClass:d=`${e}-leave-to`}=i,m=Ic(n),p=m&&m[0],x=m&&m[1],{onBeforeEnter:y,onEnter:_,onEnterCancelled:w,onLeave:b,onLeaveCancelled:M,onBeforeAppear:O=y,onAppear:N=_,onAppearCancelled:S=w}=t,H=(L,B,Y)=>{je(L,B?u:o),je(L,B?h:l),Y&&Y()},E=(L,B)=>{L._isLeaving=!1,je(L,c),je(L,d),je(L,f),B&&B()},A=L=>(B,Y)=>{const et=L?N:_,G=()=>H(B,L,Y);Ve(et,[B,G]),Ol(()=>{je(B,L?a:r),xe(B,L?u:o),Ml(et)||El(B,s,p,G)})};return St(t,{onBeforeEnter(L){Ve(y,[L]),xe(L,r),xe(L,l)},onBeforeAppear(L){Ve(O,[L]),xe(L,a),xe(L,h)},onEnter:A(!1),onAppear:A(!0),onLeave(L,B){L._isLeaving=!0;const Y=()=>E(L,B);xe(L,c),kc(),xe(L,f),Ol(()=>{L._isLeaving&&(je(L,c),xe(L,d),Ml(b)||El(L,s,x,Y))}),Ve(b,[L,Y])},onEnterCancelled(L){H(L,!1),Ve(w,[L])},onAppearCancelled(L){H(L,!0),Ve(S,[L])},onLeaveCancelled(L){E(L),Ve(M,[L])}})}function Ic(i){if(i==null)return null;if(pt(i))return[vn(i.enter),vn(i.leave)];{const t=vn(i);return[t,t]}}function vn(i){return Fh(i)}function xe(i,t){t.split(/\s+/).forEach(e=>e&&i.classList.add(e)),(i[ji]||(i[ji]=new Set)).add(t)}function je(i,t){t.split(/\s+/).forEach(s=>s&&i.classList.remove(s));const e=i[ji];e&&(e.delete(t),e.size||(i[ji]=void 0))}function Ol(i){requestAnimationFrame(()=>{requestAnimationFrame(i)})}let Rc=0;function El(i,t,e,s){const n=i._endId=++Rc,r=()=>{n===i._endId&&s()};if(e)return setTimeout(r,e);const{type:l,timeout:o,propCount:a}=Lc(i,t);if(!l)return s();const h=l+"end";let u=0;const c=()=>{i.removeEventListener(h,f),r()},f=d=>{d.target===i&&++u>=a&&c()};setTimeout(()=>{u<a&&c()},o+1),i.addEventListener(h,f)}function Lc(i,t){const e=window.getComputedStyle(i),s=m=>(e[m]||"").split(", "),n=s(`${_e}Delay`),r=s(`${_e}Duration`),l=Tl(n,r),o=s(`${Ci}Delay`),a=s(`${Ci}Duration`),h=Tl(o,a);let u=null,c=0,f=0;t===_e?l>0&&(u=_e,c=l,f=r.length):t===Ci?h>0&&(u=Ci,c=h,f=a.length):(c=Math.max(l,h),u=c>0?l>h?_e:Ci:null,f=u?u===_e?r.length:a.length:0);const d=u===_e&&/\b(transform|all)(,|$)/.test(s(`${_e}Property`).toString());return{type:u,timeout:c,propCount:f,hasTransform:d}}function Tl(i,t){for(;i.length<t.length;)i=i.concat(i);return Math.max(...t.map((e,s)=>zl(e)+zl(i[s])))}function zl(i){return i==="auto"?0:Number(i.slice(0,-1).replace(",","."))*1e3}function kc(){return document.body.offsetHeight}function Pc(i,t,e){const s=i[ji];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?i.removeAttribute("class"):e?i.setAttribute("class",t):i.className=t}const Il=Symbol("_vod"),$c=Symbol("_vsh"),Nc=Symbol(""),Ac=/(^|;)\s*display\s*:/;function Dc(i,t,e){const s=i.style,n=wt(e);let r=!1;if(e&&!n){if(t)if(wt(t))for(const l of t.split(";")){const o=l.slice(0,l.indexOf(":")).trim();e[o]==null&&_s(s,o,"")}else for(const l in t)e[l]==null&&_s(s,l,"");for(const l in e)l==="display"&&(r=!0),_s(s,l,e[l])}else if(n){if(t!==e){const l=s[Nc];l&&(e+=";"+l),s.cssText=e,r=Ac.test(e)}}else t&&i.removeAttribute("style");Il in i&&(i[Il]=r?s.display:"",i[$c]&&(s.display="none"))}const Rl=/\s*!important$/;function _s(i,t,e){if(Z(e))e.forEach(s=>_s(i,t,s));else if(e==null&&(e=""),t.startsWith("--"))i.setProperty(t,e);else{const s=Fc(i,t);Rl.test(e)?i.setProperty(_i(s),e.replace(Rl,""),"important"):i[s]=e}}const Ll=["Webkit","Moz","ms"],mn={};function Fc(i,t){const e=mn[t];if(e)return e;let s=mi(t);if(s!=="filter"&&s in i)return mn[t]=s;s=jo(s);for(let n=0;n<Ll.length;n++){const r=Ll[n]+s;if(r in i)return mn[t]=r}return t}const kl="http://www.w3.org/1999/xlink";function Bc(i,t,e,s,n){if(s&&t.startsWith("xlink:"))e==null?i.removeAttributeNS(kl,t.slice(6,t.length)):i.setAttributeNS(kl,t,e);else{const r=Uh(t);e==null||r&&!Ho(e)?i.removeAttribute(t):i.setAttribute(t,r?"":e)}}function Vc(i,t,e,s,n,r,l){if(t==="innerHTML"||t==="textContent"){s&&l(s,n,r),i[t]=e??"";return}const o=i.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const h=o==="OPTION"?i.getAttribute("value")||"":i.value,u=e??"";(h!==u||!("_value"in i))&&(i.value=u),e==null&&i.removeAttribute(t),i._value=e;return}let a=!1;if(e===""||e==null){const h=typeof i[t];h==="boolean"?e=Ho(e):e==null&&h==="string"?(e="",a=!0):h==="number"&&(e=0,a=!0)}try{i[t]=e}catch{}a&&i.removeAttribute(t)}function jc(i,t,e,s){i.addEventListener(t,e,s)}function Wc(i,t,e,s){i.removeEventListener(t,e,s)}const Pl=Symbol("_vei");function Hc(i,t,e,s,n=null){const r=i[Pl]||(i[Pl]={}),l=r[t];if(s&&l)l.value=s;else{const[o,a]=Uc(t);if(s){const h=r[t]=Zc(s,n);jc(i,o,h,a)}else l&&(Wc(i,o,l,a),r[t]=void 0)}}const $l=/(?:Once|Passive|Capture)$/;function Uc(i){let t;if($l.test(i)){t={};let s;for(;s=i.match($l);)i=i.slice(0,i.length-s[0].length),t[s[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):_i(i.slice(2)),t]}let gn=0;const Kc=Promise.resolve(),qc=()=>gn||(Kc.then(()=>gn=0),gn=Date.now());function Zc(i,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;Xt(Yc(s,e.value),t,5,[s])};return e.value=i,e.attached=qc(),e}function Yc(i,t){if(Z(t)){const e=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{e.call(i),i._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const Nl=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,Qc=(i,t,e,s,n,r,l,o,a)=>{const h=n==="svg";t==="class"?Pc(i,s,h):t==="style"?Dc(i,e,s):Ls(t)?ur(t)||Hc(i,t,e,s,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Xc(i,t,s,h))?Vc(i,t,s,r,l,o,a):(t==="true-value"?i._trueValue=s:t==="false-value"&&(i._falseValue=s),Bc(i,t,s,h))};function Xc(i,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in i&&Nl(t)&&J(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&i.tagName==="INPUT"||t==="type"&&i.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=i.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Nl(t)&&wt(e)?!1:t in i}const Gc=["ctrl","shift","alt","meta"],Jc={stop:i=>i.stopPropagation(),prevent:i=>i.preventDefault(),self:i=>i.target!==i.currentTarget,ctrl:i=>!i.ctrlKey,shift:i=>!i.shiftKey,alt:i=>!i.altKey,meta:i=>!i.metaKey,left:i=>"button"in i&&i.button!==0,middle:i=>"button"in i&&i.button!==1,right:i=>"button"in i&&i.button!==2,exact:(i,t)=>Gc.some(e=>i[`${e}Key`]&&!t.includes(e))},tf=(i,t)=>{const e=i._withMods||(i._withMods={}),s=t.join(".");return e[s]||(e[s]=(n,...r)=>{for(let l=0;l<t.length;l++){const o=Jc[t[l]];if(o&&o(n,t))return}return i(n,...r)})},ef=St({patchProp:Qc},Tc);let Al;function sf(){return Al||(Al=ac(ef))}const nf=(...i)=>{const t=sf().createApp(...i),{mount:e}=t;return t.mount=s=>{const n=lf(s);if(!n)return;const r=t._component;!J(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.innerHTML="";const l=e(n,!1,rf(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),l},t};function rf(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function lf(i){return wt(i)?document.querySelector(i):i}function dt(i){var t=i.width,e=i.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function Qe(i,t){return i.width===t.width&&i.height===t.height}var of=function(){function i(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return i.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(i.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),i.prototype.subscribe=function(t){var e=this,s={next:t};return this._observers.push(s),{unsubscribe:function(){e._observers=e._observers.filter(function(n){return n!==s})}}},i.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},i.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},i.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},i.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},i}();function af(i){return new of(i)}var hf=function(){function i(t,e,s){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=dt({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??function(r){return r},this._allowResizeObserver=(n=s==null?void 0:s.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return i.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(i.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bitmapSize",{get:function(){return dt({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),i.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=dt(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},i.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},i.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(i.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),i.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},i.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},i.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},i.prototype._resizeBitmap=function(t){var e=this.bitmapSize;Qe(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},i.prototype._emitBitmapSizeChanged=function(t,e){var s=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(s,t,e)})},i.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,s=dt(this._transformBitmapSize(t,this._canvasElementClientSize)),n=Qe(this.bitmapSize,s)?null:s;e===null&&n===null||e!==null&&n!==null&&Qe(e,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(e,n))},i.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(s,t,e)})},i.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}cf().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},i.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=Dl(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=af(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},i.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var s=Dl(this._canvasElement);if(s!==null){var n=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:s.devicePixelRatio,r=this._canvasElement.getClientRects(),l=r[0]!==void 0?ff(r[0],n):dt({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(l)}}},i.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var s=e.find(function(l){return l.target===t._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var n=s.devicePixelContentBoxSize[0],r=dt({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},i}();function uf(i,t){if(t.type==="device-pixel-content-box")return new hf(i,t.transform,t.options);throw new Error("Unsupported binding target")}function Dl(i){return i.ownerDocument.defaultView}function cf(){return new Promise(function(i){var t=new ResizeObserver(function(e){i(e.every(function(s){return"devicePixelContentBoxSize"in s})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function ff(i,t){return dt({width:Math.round(i.left*t+i.width*t)-Math.round(i.left*t),height:Math.round(i.top*t+i.height*t)-Math.round(i.top*t)})}var df=function(){function i(t,e,s){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=t}return i.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},i.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(i.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),i}();function Xe(i,t){var e=i.canvasElementClientSize;if(e.width===0||e.height===0)return null;var s=i.bitmapSize;if(s.width===0||s.height===0)return null;var n=i.canvasElement.getContext("2d",t);return n===null?null:new df(n,e,s)}/*!
 * @license
 * TradingView Lightweight Charts v4.1.3
 * Copyright (c) 2024 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const pf={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},vf={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},mf={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},gf={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},bf={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},yf={color:"#26a69a",base:0},Ba={color:"#2196f3"},Va={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Fl,Bl;function Ge(i,t){const e={0:[],1:[i.lineWidth,i.lineWidth],2:[2*i.lineWidth,2*i.lineWidth],3:[6*i.lineWidth,6*i.lineWidth],4:[i.lineWidth,4*i.lineWidth]}[t];i.setLineDash(e)}function ja(i,t,e,s){i.beginPath();const n=i.lineWidth%2?.5:0;i.moveTo(e,t+n),i.lineTo(s,t+n),i.stroke()}function $e(i,t){if(!i)throw new Error("Assertion failed"+(t?": "+t:""))}function At(i){if(i===void 0)throw new Error("Value is undefined");return i}function R(i){if(i===null)throw new Error("Value is null");return i}function hi(i){return R(At(i))}(function(i){i[i.Simple=0]="Simple",i[i.WithSteps=1]="WithSteps",i[i.Curved=2]="Curved"})(Fl||(Fl={})),function(i){i[i.Solid=0]="Solid",i[i.Dotted=1]="Dotted",i[i.Dashed=2]="Dashed",i[i.LargeDashed=3]="LargeDashed",i[i.SparseDotted=4]="SparseDotted"}(Bl||(Bl={}));const Vl={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function Yt(i){return i<0?0:i>255?255:Math.round(i)||0}function Wa(i){return i<=0||i>0?i<0?0:i>1?1:Math.round(1e4*i)/1e4:0}const wf=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,_f=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,xf=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,Sf=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function zs(i){(i=i.toLowerCase())in Vl&&(i=Vl[i]);{const t=Sf.exec(i)||xf.exec(i);if(t)return[Yt(parseInt(t[1],10)),Yt(parseInt(t[2],10)),Yt(parseInt(t[3],10)),Wa(t.length<5?1:parseFloat(t[4]))]}{const t=_f.exec(i);if(t)return[Yt(parseInt(t[1],16)),Yt(parseInt(t[2],16)),Yt(parseInt(t[3],16)),1]}{const t=wf.exec(i);if(t)return[Yt(17*parseInt(t[1],16)),Yt(17*parseInt(t[2],16)),Yt(17*parseInt(t[3],16)),1]}throw new Error(`Cannot parse color: ${i}`)}function Ws(i){const t=zs(i);return{t:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,i:(e=t,.199*e[0]+.687*e[1]+.114*e[2]>160?"black":"white")};var e}let yt=class{constructor(){this.h=[]}l(t,e,s){const n={o:t,_:e,u:s===!0};this.h.push(n)}v(t){const e=this.h.findIndex(s=>t===s.o);e>-1&&this.h.splice(e,1)}p(t){this.h=this.h.filter(e=>e._!==t)}m(t,e,s){const n=[...this.h];this.h=this.h.filter(r=>!r.u),n.forEach(r=>r.o(t,e,s))}M(){return this.h.length>0}S(){this.h=[]}};function se(i,...t){for(const e of t)for(const s in e)e[s]!==void 0&&(typeof e[s]!="object"||i[s]===void 0||Array.isArray(e[s])?i[s]=e[s]:se(i[s],e[s]));return i}function ue(i){return typeof i=="number"&&isFinite(i)}function Wi(i){return typeof i=="number"&&i%1==0}function Qi(i){return typeof i=="string"}function as(i){return typeof i=="boolean"}function me(i){const t=i;if(!t||typeof t!="object")return t;let e,s,n;for(s in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(s)&&(n=t[s],e[s]=n&&typeof n=="object"?me(n):n);return e}function Cf(i){return i!==null}function Hi(i){return i===null?void 0:i}const Ir="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function bi(i,t,e){return t===void 0&&(t=Ir),`${e=e!==void 0?`${e} `:""}${i}px ${t}`}let Mf=class{constructor(t){this.k={C:1,T:5,P:NaN,R:"",D:"",O:"",A:"",V:0,B:0,I:0,L:0,N:0},this.F=t}W(){const t=this.k,e=this.j(),s=this.H();return t.P===e&&t.D===s||(t.P=e,t.D=s,t.R=bi(e,s),t.L=2.5/12*e,t.V=t.L,t.B=e/12*t.T,t.I=e/12*t.T,t.N=0),t.O=this.$(),t.A=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}},Rr=class{constructor(){this.Y=[]}X(t){this.Y=t}K(t,e,s){this.Y.forEach(n=>{n.K(t,e,s)})}},ne=class{K(t,e,s){t.useBitmapCoordinateSpace(n=>this.Z(n,e,s))}},Of=class extends ne{constructor(){super(...arguments),this.G=null}J(t){this.G=t}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){if(this.G===null||this.G.tt===null)return;const n=this.G.tt,r=this.G,l=Math.max(1,Math.floor(e))%2/2,o=a=>{t.beginPath();for(let h=n.to-1;h>=n.from;--h){const u=r.it[h],c=Math.round(u.nt*e)+l,f=u.st*s,d=a*s+l;t.moveTo(c,f),t.arc(c,f,d,0,2*Math.PI)}t.fill()};r.et>0&&(t.fillStyle=r.rt,o(r.ht+r.et)),t.fillStyle=r.lt,o(r.ht)}};function Ef(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const Tf={from:0,to:1};class zf{constructor(t,e){this.ut=new Rr,this.ct=[],this.dt=[],this.ft=!0,this.F=t,this.vt=e,this.ut.X(this.ct)}bt(t){const e=this.F.wt();e.length!==this.ct.length&&(this.dt=e.map(Ef),this.ct=this.dt.map(s=>{const n=new Of;return n.J(s),n}),this.ut.X(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const t=this.vt.W().mode===2,e=this.F.wt(),s=this.vt.xt(),n=this.F.St();e.forEach((r,l)=>{var o;const a=this.dt[l],h=r.kt(s);if(t||h===null||!r.yt())return void(a.tt=null);const u=R(r.Ct());a.lt=h.Tt,a.ht=h.ht,a.et=h.Pt,a.it[0]._t=h._t,a.it[0].st=r.Dt().Rt(h._t,u.Ot),a.rt=(o=h.At)!==null&&o!==void 0?o:this.F.Vt(a.it[0].st/r.Dt().Bt()),a.it[0].ot=s,a.it[0].nt=n.It(s),a.tt=Tf})}}class If extends ne{constructor(t){super(),this.zt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.zt===null)return;const r=this.zt.Lt.yt,l=this.zt.Et.yt;if(!r&&!l)return;const o=Math.round(this.zt.nt*s),a=Math.round(this.zt.st*n);t.lineCap="butt",r&&o>=0&&(t.lineWidth=Math.floor(this.zt.Lt.et*s),t.strokeStyle=this.zt.Lt.O,t.fillStyle=this.zt.Lt.O,Ge(t,this.zt.Lt.Nt),function(h,u,c,f){h.beginPath();const d=h.lineWidth%2?.5:0;h.moveTo(u+d,c),h.lineTo(u+d,f),h.stroke()}(t,o,0,e.height)),l&&a>=0&&(t.lineWidth=Math.floor(this.zt.Et.et*n),t.strokeStyle=this.zt.Et.O,t.fillStyle=this.zt.Et.O,Ge(t,this.zt.Et.Nt),ja(t,a,0,e.width))}}class Rf{constructor(t){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,O:"",yt:!1},Et:{et:1,Nt:0,O:"",yt:!1},nt:0,st:0},this.Wt=new If(this.Ft),this.jt=t}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const t=this.jt.yt(),e=R(this.jt.Ht()),s=e.$t().W().crosshair,n=this.Ft;if(s.mode===2)return n.Et.yt=!1,void(n.Lt.yt=!1);n.Et.yt=t&&this.jt.Ut(e),n.Lt.yt=t&&this.jt.qt(),n.Et.et=s.horzLine.width,n.Et.Nt=s.horzLine.style,n.Et.O=s.horzLine.color,n.Lt.et=s.vertLine.width,n.Lt.Nt=s.vertLine.style,n.Lt.O=s.vertLine.color,n.nt=this.jt.Yt(),n.st=this.jt.Xt()}}function Lf(i,t,e,s,n,r){i.fillRect(t+r,e,s-2*r,r),i.fillRect(t+r,e+n-r,s-2*r,r),i.fillRect(t,e,r,n),i.fillRect(t+s-r,e,r,n)}function Hs(i,t,e,s,n,r){i.save(),i.globalCompositeOperation="copy",i.fillStyle=r,i.fillRect(t,e,s,n),i.restore()}function jl(i,t){return i.map(e=>e===0?e:e+t)}function bn(i,t,e,s,n,r){i.beginPath(),i.lineTo(t+s-r[1],e),r[1]!==0&&i.arcTo(t+s,e,t+s,e+r[1],r[1]),i.lineTo(t+s,e+n-r[2]),r[2]!==0&&i.arcTo(t+s,e+n,t+s-r[2],e+n,r[2]),i.lineTo(t+r[3],e+n),r[3]!==0&&i.arcTo(t,e+n,t,e+n-r[3],r[3]),i.lineTo(t,e+r[0]),r[0]!==0&&i.arcTo(t,e,t+r[0],e,r[0])}function Wl(i,t,e,s,n,r,l=0,o=[0,0,0,0],a=""){if(i.save(),!l||!a||a===r)return bn(i,t,e,s,n,o),i.fillStyle=r,i.fill(),void i.restore();const h=l/2;r!=="transparent"&&(bn(i,t+l,e+l,s-2*l,n-2*l,jl(o,-l)),i.fillStyle=r,i.fill()),a!=="transparent"&&(bn(i,t+h,e+h,s-l,n-l,jl(o,-h)),i.lineWidth=l,i.strokeStyle=a,i.closePath(),i.stroke()),i.restore()}function Ha(i,t,e,s,n,r,l){i.save(),i.globalCompositeOperation="copy";const o=i.createLinearGradient(0,0,0,n);o.addColorStop(0,r),o.addColorStop(1,l),i.fillStyle=o,i.fillRect(t,e,s,n),i.restore()}class Hl{constructor(t,e){this.J(t,e)}J(t,e){this.zt=t,this.Kt=e}Bt(t,e){return this.zt.yt?t.P+t.L+t.V:0}K(t,e,s,n){if(!this.zt.yt||this.zt.Zt.length===0)return;const r=this.zt.O,l=this.Kt.t,o=t.useBitmapCoordinateSpace(a=>{const h=a.context;h.font=e.R;const u=this.Gt(a,e,s,n),c=u.Jt,f=(d,m)=>{u.Qt?Wl(h,c.ti,c.ii,c.ni,c.si,d,c.ei,[c.ht,0,0,c.ht],m):Wl(h,c.ri,c.ii,c.ni,c.si,d,c.ei,[0,c.ht,c.ht,0],m)};return f(l,"transparent"),this.zt.hi&&(h.fillStyle=r,h.fillRect(c.ri,c.li,c.ai-c.ri,c.oi)),f("transparent",l),this.zt._i&&(h.fillStyle=e.A,h.fillRect(u.Qt?c.ui-c.ei:0,c.ii,c.ei,c.ci-c.ii)),u});t.useMediaCoordinateSpace(({context:a})=>{const h=o.di;a.font=e.R,a.textAlign=o.Qt?"right":"left",a.textBaseline="middle",a.fillStyle=r,a.fillText(this.zt.Zt,h.fi,(h.ii+h.ci)/2+h.vi)})}Gt(t,e,s,n){var r;const{context:l,bitmapSize:o,mediaSize:a,horizontalPixelRatio:h,verticalPixelRatio:u}=t,c=this.zt.hi||!this.zt.pi?e.T:0,f=this.zt.mi?e.C:0,d=e.L+this.Kt.bi,m=e.V+this.Kt.wi,p=e.B,x=e.I,y=this.zt.Zt,_=e.P,w=s.gi(l,y),b=Math.ceil(s.Mi(l,y)),M=_+d+m,O=e.C+p+x+b+c,N=Math.max(1,Math.floor(u));let S=Math.round(M*u);S%2!=N%2&&(S+=1);const H=f>0?Math.max(1,Math.floor(f*h)):0,E=Math.round(O*h),A=Math.round(c*h),L=(r=this.Kt.xi)!==null&&r!==void 0?r:this.Kt.Si,B=Math.round(L*u)-Math.floor(.5*u),Y=Math.floor(B+N/2-S/2),et=Y+S,G=n==="right",lt=G?a.width-f:f,tt=G?o.width-H:H;let Dt,pe,qt;return G?(Dt=tt-E,pe=tt-A,qt=lt-c-p-f):(Dt=tt+E,pe=tt+A,qt=lt+c+p),{Qt:G,Jt:{ii:Y,li:B,ci:et,ni:E,si:S,ht:2*h,ei:H,ti:Dt,ri:tt,ai:pe,oi:N,ui:o.width},di:{ii:Y/u,ci:et/u,fi:qt,vi:w}}}}class Us{constructor(t){this.ki={Si:0,t:"#000",wi:0,bi:0},this.yi={Zt:"",yt:!1,hi:!0,pi:!1,At:"",O:"#FFF",_i:!1,mi:!1},this.Ci={Zt:"",yt:!1,hi:!1,pi:!0,At:"",O:"#FFF",_i:!0,mi:!0},this.ft=!0,this.Ti=new(t||Hl)(this.yi,this.ki),this.Pi=new(t||Hl)(this.Ci,this.ki)}Zt(){return this.Ri(),this.yi.Zt}Si(){return this.Ri(),this.ki.Si}bt(){this.ft=!0}Bt(t,e=!1){return Math.max(this.Ti.Bt(t,e),this.Pi.Bt(t,e))}Di(){return this.ki.xi||0}Oi(t){this.ki.xi=t}Ai(){return this.Ri(),this.yi.yt||this.Ci.yt}Vi(){return this.Ri(),this.yi.yt}gt(t){return this.Ri(),this.yi.hi=this.yi.hi&&t.W().ticksVisible,this.Ci.hi=this.Ci.hi&&t.W().ticksVisible,this.Ti.J(this.yi,this.ki),this.Pi.J(this.Ci,this.ki),this.Ti}Bi(){return this.Ri(),this.Ti.J(this.yi,this.ki),this.Pi.J(this.Ci,this.ki),this.Pi}Ri(){this.ft&&(this.yi.hi=!0,this.Ci.hi=!1,this.Ii(this.yi,this.Ci,this.ki))}}class kf extends Us{constructor(t,e,s){super(),this.jt=t,this.zi=e,this.Li=s}Ii(t,e,s){if(t.yt=!1,this.jt.W().mode===2)return;const n=this.jt.W().horzLine;if(!n.labelVisible)return;const r=this.zi.Ct();if(!this.jt.yt()||this.zi.Ei()||r===null)return;const l=Ws(n.labelBackgroundColor);s.t=l.t,t.O=l.i;const o=2/12*this.zi.P();s.bi=o,s.wi=o;const a=this.Li(this.zi);s.Si=a.Si,t.Zt=this.zi.Ni(a._t,r),t.yt=!0}}const Pf=/[1-9]/g;class Ua{constructor(){this.zt=null}J(t){this.zt=t}K(t,e){if(this.zt===null||this.zt.yt===!1||this.zt.Zt.length===0)return;const s=t.useMediaCoordinateSpace(({context:f})=>(f.font=e.R,Math.round(e.Fi.Mi(f,R(this.zt).Zt,Pf))));if(s<=0)return;const n=e.Wi,r=s+2*n,l=r/2,o=this.zt.ji;let a=this.zt.Si,h=Math.floor(a-l)+.5;h<0?(a+=Math.abs(0-h),h=Math.floor(a-l)+.5):h+r>o&&(a-=Math.abs(o-(h+r)),h=Math.floor(a-l)+.5);const u=h+r,c=Math.ceil(0+e.C+e.T+e.L+e.P+e.V);t.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:d,verticalPixelRatio:m})=>{const p=R(this.zt);f.fillStyle=p.t;const x=Math.round(h*d),y=Math.round(0*m),_=Math.round(u*d),w=Math.round(c*m),b=Math.round(2*d);if(f.beginPath(),f.moveTo(x,y),f.lineTo(x,w-b),f.arcTo(x,w,x+b,w,b),f.lineTo(_-b,w),f.arcTo(_,w,_,w-b,b),f.lineTo(_,y),f.fill(),p.hi){const M=Math.round(p.Si*d),O=y,N=Math.round((O+e.T)*m);f.fillStyle=p.O;const S=Math.max(1,Math.floor(d)),H=Math.floor(.5*d);f.fillRect(M-H,O,S,N-O)}}),t.useMediaCoordinateSpace(({context:f})=>{const d=R(this.zt),m=0+e.C+e.T+e.L+e.P/2;f.font=e.R,f.textAlign="left",f.textBaseline="middle",f.fillStyle=d.O;const p=e.Fi.gi(f,"Apr0");f.translate(h+n,m+p),f.fillText(d.Zt,0,0)})}}class $f{constructor(t,e,s){this.ft=!0,this.Wt=new Ua,this.Ft={yt:!1,t:"#4c525e",O:"white",Zt:"",ji:0,Si:NaN,hi:!0},this.vt=t,this.Hi=e,this.Li=s}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const t=this.Ft;if(t.yt=!1,this.vt.W().mode===2)return;const e=this.vt.W().vertLine;if(!e.labelVisible)return;const s=this.Hi.St();if(s.Ei())return;t.ji=s.ji();const n=this.Li();if(n===null)return;t.Si=n.Si;const r=s.$i(this.vt.xt());t.Zt=s.Ui(R(r)),t.yt=!0;const l=Ws(e.labelBackgroundColor);t.t=l.t,t.O=l.i,t.hi=s.W().ticksVisible}}let Lr=class{constructor(){this.qi=null,this.Yi=0}Xi(){return this.Yi}Ki(t){this.Yi=t}Dt(){return this.qi}Zi(t){this.qi=t}Gi(t){return[]}Ji(){return[]}yt(){return!0}};var Ul;(function(i){i[i.Normal=0]="Normal",i[i.Magnet=1]="Magnet",i[i.Hidden=2]="Hidden"})(Ul||(Ul={}));let Nf=class extends Lr{constructor(t,e){super(),this.Qi=null,this.tn=NaN,this.nn=0,this.sn=!0,this.en=new Map,this.rn=!1,this.hn=NaN,this.ln=NaN,this.an=NaN,this.on=NaN,this.Hi=t,this._n=e,this.un=new zf(t,this),this.cn=((n,r)=>l=>{const o=r(),a=n();if(l===R(this.Qi).dn())return{_t:a,Si:o};{const h=R(l.Ct());return{_t:l.fn(o,h),Si:o}}})(()=>this.tn,()=>this.ln);const s=((n,r)=>()=>{const l=this.Hi.St().vn(n()),o=r();return l&&Number.isFinite(o)?{ot:l,Si:o}:null})(()=>this.nn,()=>this.Yt());this.pn=new $f(this,t,s),this.mn=new Rf(this)}W(){return this._n}bn(t,e){this.an=t,this.on=e}wn(){this.an=NaN,this.on=NaN}gn(){return this.an}Mn(){return this.on}xn(t,e,s){this.rn||(this.rn=!0),this.sn=!0,this.Sn(t,e,s)}xt(){return this.nn}Yt(){return this.hn}Xt(){return this.ln}yt(){return this.sn}kn(){this.sn=!1,this.yn(),this.tn=NaN,this.hn=NaN,this.ln=NaN,this.Qi=null,this.wn()}Cn(t){return this.Qi!==null?[this.mn,this.un]:[]}Ut(t){return t===this.Qi&&this._n.horzLine.visible}qt(){return this._n.vertLine.visible}Tn(t,e){this.sn&&this.Qi===t||this.en.clear();const s=[];return this.Qi===t&&s.push(this.Pn(this.en,e,this.cn)),s}Ji(){return this.sn?[this.pn]:[]}Ht(){return this.Qi}Rn(){this.mn.bt(),this.en.forEach(t=>t.bt()),this.pn.bt(),this.un.bt()}Dn(t){return t&&!t.dn().Ei()?t.dn():null}Sn(t,e,s){this.On(t,e,s)&&this.Rn()}On(t,e,s){const n=this.hn,r=this.ln,l=this.tn,o=this.nn,a=this.Qi,h=this.Dn(s);this.nn=t,this.hn=isNaN(t)?NaN:this.Hi.St().It(t),this.Qi=s;const u=h!==null?h.Ct():null;return h!==null&&u!==null?(this.tn=e,this.ln=h.Rt(e,u)):(this.tn=NaN,this.ln=NaN),n!==this.hn||r!==this.ln||o!==this.nn||l!==this.tn||a!==this.Qi}yn(){const t=this.Hi.wt().map(s=>s.Vn().An()).filter(Cf),e=t.length===0?null:Math.max(...t);this.nn=e!==null?e:NaN}Pn(t,e,s){let n=t.get(e);return n===void 0&&(n=new kf(this,e,s),t.set(e,n)),n}};function Ks(i){return i==="left"||i==="right"}class Mt{constructor(t){this.Bn=new Map,this.In=[],this.zn=t}Ln(t,e){const s=function(n,r){return n===void 0?r:{En:Math.max(n.En,r.En),Nn:n.Nn||r.Nn}}(this.Bn.get(t),e);this.Bn.set(t,s)}Fn(){return this.zn}Wn(t){const e=this.Bn.get(t);return e===void 0?{En:this.zn}:{En:Math.max(this.zn,e.En),Nn:e.Nn}}jn(){this.Hn(),this.In=[{$n:0}]}Un(t){this.Hn(),this.In=[{$n:1,Ot:t}]}qn(t){this.Yn(),this.In.push({$n:5,Ot:t})}Hn(){this.Yn(),this.In.push({$n:6})}Xn(){this.Hn(),this.In=[{$n:4}]}Kn(t){this.Hn(),this.In.push({$n:2,Ot:t})}Zn(t){this.Hn(),this.In.push({$n:3,Ot:t})}Gn(){return this.In}Jn(t){for(const e of t.In)this.Qn(e);this.zn=Math.max(this.zn,t.zn),t.Bn.forEach((e,s)=>{this.Ln(s,e)})}static ts(){return new Mt(2)}static ns(){return new Mt(3)}Qn(t){switch(t.$n){case 0:this.jn();break;case 1:this.Un(t.Ot);break;case 2:this.Kn(t.Ot);break;case 3:this.Zn(t.Ot);break;case 4:this.Xn();break;case 5:this.qn(t.Ot);break;case 6:this.Yn()}}Yn(){const t=this.In.findIndex(e=>e.$n===5);t!==-1&&this.In.splice(t,1)}}const Kl=".";function ge(i,t){if(!ue(i))return"n/a";if(!Wi(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?i.toString():("0000000000000000"+i.toString()).slice(-t)}class qs{constructor(t,e){if(e||(e=1),ue(t)&&Wi(t)||(t=100),t<0)throw new TypeError("invalid base");this.zi=t,this.ss=e,this.es()}format(t){const e=t<0?"":"";return t=Math.abs(t),e+this.rs(t)}es(){if(this.hs=0,this.zi>0&&this.ss>0){let t=this.zi;for(;t>1;)t/=10,this.hs++}}rs(t){const e=this.zi/this.ss;let s=Math.floor(t),n="";const r=this.hs!==void 0?this.hs:NaN;if(e>1){let l=+(Math.round(t*e)-s*e).toFixed(this.hs);l>=e&&(l-=e,s+=1),n=Kl+ge(+l.toFixed(this.hs)*this.ss,r)}else s=Math.round(s*e)/e,r>0&&(n=Kl+ge(0,r));return s.toFixed(0)+n}}class Ka extends qs{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class Af{constructor(t){this.ls=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.os(t):t<999995?e+this.os(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.os(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.os(t/1e9)+"B")}os(t){let e;const s=Math.pow(10,this.ls);return e=(t=Math.round(t*s)/s)>=1e-15&&t<1?t.toFixed(this.ls).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,(n,r)=>r)}}function qa(i,t,e,s,n,r,l){if(t.length===0||s.from>=t.length||s.to<=0)return;const{context:o,horizontalPixelRatio:a,verticalPixelRatio:h}=i,u=t[s.from];let c=r(i,u),f=u;if(s.to-s.from<2){const d=n/2;o.beginPath();const m={nt:u.nt-d,st:u.st},p={nt:u.nt+d,st:u.st};o.moveTo(m.nt*a,m.st*h),o.lineTo(p.nt*a,p.st*h),l(i,c,m,p)}else{const d=(p,x)=>{l(i,c,f,x),o.beginPath(),c=p,f=x};let m=f;o.beginPath(),o.moveTo(u.nt*a,u.st*h);for(let p=s.from+1;p<s.to;++p){m=t[p];const x=r(i,m);switch(e){case 0:o.lineTo(m.nt*a,m.st*h);break;case 1:o.lineTo(m.nt*a,t[p-1].st*h),x!==c&&(d(x,m),o.lineTo(m.nt*a,t[p-1].st*h)),o.lineTo(m.nt*a,m.st*h);break;case 2:{const[y,_]=Df(t,p-1,p);o.bezierCurveTo(y.nt*a,y.st*h,_.nt*a,_.st*h,m.nt*a,m.st*h);break}}e!==1&&x!==c&&(d(x,m),o.moveTo(m.nt*a,m.st*h))}(f!==m||f===m&&e===1)&&l(i,c,f,m)}}const ql=6;function yn(i,t){return{nt:i.nt-t.nt,st:i.st-t.st}}function Zl(i,t){return{nt:i.nt/t,st:i.st/t}}function Df(i,t,e){const s=Math.max(0,t-1),n=Math.min(i.length-1,e+1);var r,l;return[(r=i[t],l=Zl(yn(i[e],i[s]),ql),{nt:r.nt+l.nt,st:r.st+l.st}),yn(i[e],Zl(yn(i[n],i[t]),ql))]}function Ff(i,t,e,s,n){const{context:r,horizontalPixelRatio:l,verticalPixelRatio:o}=t;r.lineTo(n.nt*l,i*o),r.lineTo(s.nt*l,i*o),r.closePath(),r.fillStyle=e,r.fill()}class Za extends ne{constructor(){super(...arguments),this.G=null}J(t){this.G=t}Z(t){var e;if(this.G===null)return;const{it:s,tt:n,_s:r,et:l,Nt:o,us:a}=this.G,h=(e=this.G.cs)!==null&&e!==void 0?e:this.G.ds?0:t.mediaSize.height;if(n===null)return;const u=t.context;u.lineCap="butt",u.lineJoin="round",u.lineWidth=l,Ge(u,o),u.lineWidth=1,qa(t,s,a,n,r,this.fs.bind(this),Ff.bind(null,h))}}function tr(i,t,e){return Math.min(Math.max(i,t),e)}function hs(i,t,e){return t-i<=e}function Ya(i){const t=Math.ceil(i);return t%2==0?t-1:t}class kr{vs(t,e){const s=this.ps,{bs:n,ws:r,gs:l,Ms:o,xs:a,cs:h}=e;if(this.Ss===void 0||s===void 0||s.bs!==n||s.ws!==r||s.gs!==l||s.Ms!==o||s.cs!==h||s.xs!==a){const u=t.context.createLinearGradient(0,0,0,a);if(u.addColorStop(0,n),h!=null){const c=tr(h*t.verticalPixelRatio/a,0,1);u.addColorStop(c,r),u.addColorStop(c,l)}u.addColorStop(1,o),this.Ss=u,this.ps=e}return this.Ss}}class Bf extends Za{constructor(){super(...arguments),this.ks=new kr}fs(t,e){return this.ks.vs(t,{bs:e.ys,ws:"",gs:"",Ms:e.Cs,xs:t.bitmapSize.height})}}function Vf(i,t){const e=i.context;e.strokeStyle=t,e.stroke()}class Qa extends ne{constructor(){super(...arguments),this.G=null}J(t){this.G=t}Z(t){if(this.G===null)return;const{it:e,tt:s,_s:n,us:r,et:l,Nt:o,Ts:a}=this.G;if(s===null)return;const h=t.context;h.lineCap="butt",h.lineWidth=l*t.verticalPixelRatio,Ge(h,o),h.lineJoin="round";const u=this.Ps.bind(this);r!==void 0&&qa(t,e,r,s,n,u,Vf),a&&function(c,f,d,m,p){const{horizontalPixelRatio:x,verticalPixelRatio:y,context:_}=c;let w=null;const b=Math.max(1,Math.floor(x))%2/2,M=d*y+b;for(let O=m.to-1;O>=m.from;--O){const N=f[O];if(N){const S=p(c,N);S!==w&&(_.beginPath(),w!==null&&_.fill(),_.fillStyle=S,w=S);const H=Math.round(N.nt*x)+b,E=N.st*y;_.moveTo(H,E),_.arc(H,E,M,0,2*Math.PI)}}_.fill()}(t,e,a,s,u)}}class Xa extends Qa{Ps(t,e){return e.lt}}function Ga(i,t,e,s,n=0,r=t.length){let l=r-n;for(;0<l;){const o=l>>1,a=n+o;s(t[a],e)===i?(n=a+1,l-=o+1):l=o}return n}const Xi=Ga.bind(null,!0),Ja=Ga.bind(null,!1);function jf(i,t){return i.ot<t}function Wf(i,t){return t<i.ot}function th(i,t,e){const s=t.Rs(),n=t.ui(),r=Xi(i,s,jf),l=Ja(i,n,Wf);if(!e)return{from:r,to:l};let o=r,a=l;return r>0&&r<i.length&&i[r].ot>=s&&(o=r-1),l>0&&l<i.length&&i[l-1].ot<=n&&(a=l+1),{from:o,to:a}}class Pr{constructor(t,e,s){this.Ds=!0,this.Os=!0,this.As=!0,this.Vs=[],this.Bs=null,this.Is=t,this.zs=e,this.Ls=s}bt(t){this.Ds=!0,t==="data"&&(this.Os=!0),t==="options"&&(this.As=!0)}gt(){return this.Is.yt()?(this.Es(),this.Bs===null?null:this.Ns):null}Fs(){this.Vs=this.Vs.map(t=>Object.assign(Object.assign({},t),this.Is.js().Ws(t.ot)))}Hs(){this.Bs=null}Es(){this.Os&&(this.$s(),this.Os=!1),this.As&&(this.Fs(),this.As=!1),this.Ds&&(this.Us(),this.Ds=!1)}Us(){const t=this.Is.Dt(),e=this.zs.St();if(this.Hs(),e.Ei()||t.Ei())return;const s=e.qs();if(s===null||this.Is.Vn().Ys()===0)return;const n=this.Is.Ct();n!==null&&(this.Bs=th(this.Vs,s,this.Ls),this.Xs(t,e,n.Ot),this.Ks())}}class Zs extends Pr{constructor(t,e){super(t,e,!0)}Xs(t,e,s){e.Zs(this.Vs,Hi(this.Bs)),t.Gs(this.Vs,s,Hi(this.Bs))}Js(t,e){return{ot:t,_t:e,nt:NaN,st:NaN}}$s(){const t=this.Is.js();this.Vs=this.Is.Vn().Qs().map(e=>{const s=e.Ot[3];return this.te(e.ie,s,t)})}}class Hf extends Zs{constructor(t,e){super(t,e),this.Ns=new Rr,this.ne=new Bf,this.se=new Xa,this.Ns.X([this.ne,this.se])}te(t,e,s){return Object.assign(Object.assign({},this.Js(t,e)),s.Ws(t))}Ks(){const t=this.Is.W();this.ne.J({us:t.lineType,it:this.Vs,Nt:t.lineStyle,et:t.lineWidth,cs:null,ds:t.invertFilledArea,tt:this.Bs,_s:this.zs.St().ee()}),this.se.J({us:t.lineVisible?t.lineType:void 0,it:this.Vs,Nt:t.lineStyle,et:t.lineWidth,tt:this.Bs,_s:this.zs.St().ee(),Ts:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}class Uf extends ne{constructor(){super(...arguments),this.zt=null,this.re=0,this.he=0}J(t){this.zt=t}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){if(this.zt===null||this.zt.Vn.length===0||this.zt.tt===null)return;this.re=this.le(e),this.re>=2&&Math.max(1,Math.floor(e))%2!=this.re%2&&this.re--,this.he=this.zt.ae?Math.min(this.re,Math.floor(e)):this.re;let n=null;const r=this.he<=this.re&&this.zt.ee>=Math.floor(1.5*e);for(let l=this.zt.tt.from;l<this.zt.tt.to;++l){const o=this.zt.Vn[l];n!==o.oe&&(t.fillStyle=o.oe,n=o.oe);const a=Math.floor(.5*this.he),h=Math.round(o.nt*e),u=h-a,c=this.he,f=u+c-1,d=Math.min(o._e,o.ue),m=Math.max(o._e,o.ue),p=Math.round(d*s)-a,x=Math.round(m*s)+a,y=Math.max(x-p,this.he);t.fillRect(u,p,c,y);const _=Math.ceil(1.5*this.re);if(r){if(this.zt.ce){const O=h-_;let N=Math.max(p,Math.round(o.de*s)-a),S=N+c-1;S>p+y-1&&(S=p+y-1,N=S-c+1),t.fillRect(O,N,u-O,S-N+1)}const w=h+_;let b=Math.max(p,Math.round(o.fe*s)-a),M=b+c-1;M>p+y-1&&(M=p+y-1,b=M-c+1),t.fillRect(f+1,b,w-f,M-b+1)}}}le(t){const e=Math.floor(t);return Math.max(e,Math.floor(function(s,n){return Math.floor(.3*s*n)}(R(this.zt).ee,t)))}}class eh extends Pr{constructor(t,e){super(t,e,!1)}Xs(t,e,s){e.Zs(this.Vs,Hi(this.Bs)),t.ve(this.Vs,s,Hi(this.Bs))}pe(t,e,s){return{ot:t,me:e.Ot[0],be:e.Ot[1],we:e.Ot[2],ge:e.Ot[3],nt:NaN,de:NaN,_e:NaN,ue:NaN,fe:NaN}}$s(){const t=this.Is.js();this.Vs=this.Is.Vn().Qs().map(e=>this.te(e.ie,e,t))}}class Kf extends eh{constructor(){super(...arguments),this.Ns=new Uf}te(t,e,s){return Object.assign(Object.assign({},this.pe(t,e,s)),s.Ws(t))}Ks(){const t=this.Is.W();this.Ns.J({Vn:this.Vs,ee:this.zs.St().ee(),ce:t.openVisible,ae:t.thinBars,tt:this.Bs})}}class qf extends Za{constructor(){super(...arguments),this.ks=new kr}fs(t,e){const s=this.G;return this.ks.vs(t,{bs:e.Me,ws:e.xe,gs:e.Se,Ms:e.ke,xs:t.bitmapSize.height,cs:s.cs})}}class Zf extends Qa{constructor(){super(...arguments),this.ye=new kr}Ps(t,e){const s=this.G;return this.ye.vs(t,{bs:e.Ce,ws:e.Ce,gs:e.Te,Ms:e.Te,xs:t.bitmapSize.height,cs:s.cs})}}class Yf extends Zs{constructor(t,e){super(t,e),this.Ns=new Rr,this.Pe=new qf,this.Re=new Zf,this.Ns.X([this.Pe,this.Re])}te(t,e,s){return Object.assign(Object.assign({},this.Js(t,e)),s.Ws(t))}Ks(){const t=this.Is.Ct();if(t===null)return;const e=this.Is.W(),s=this.Is.Dt().Rt(e.baseValue.price,t.Ot),n=this.zs.St().ee();this.Pe.J({it:this.Vs,et:e.lineWidth,Nt:e.lineStyle,us:e.lineType,cs:s,ds:!1,tt:this.Bs,_s:n}),this.Re.J({it:this.Vs,et:e.lineWidth,Nt:e.lineStyle,us:e.lineVisible?e.lineType:void 0,Ts:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,cs:s,tt:this.Bs,_s:n})}}class Qf extends ne{constructor(){super(...arguments),this.zt=null,this.re=0}J(t){this.zt=t}Z(t){if(this.zt===null||this.zt.Vn.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:e}=t;this.re=function(r,l){if(r>=2.5&&r<=4)return Math.floor(3*l);const o=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),a=Math.floor(r*o*l),h=Math.floor(r*l),u=Math.min(a,h);return Math.max(Math.floor(l),u)}(this.zt.ee,e),this.re>=2&&Math.floor(e)%2!=this.re%2&&this.re--;const s=this.zt.Vn;this.zt.De&&this.Oe(t,s,this.zt.tt),this.zt._i&&this.Ae(t,s,this.zt.tt);const n=this.Ve(e);(!this.zt._i||this.re>2*n)&&this.Be(t,s,this.zt.tt)}Oe(t,e,s){if(this.zt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:l}=t;let o="",a=Math.min(Math.floor(r),Math.floor(this.zt.ee*r));a=Math.max(Math.floor(r),Math.min(a,this.re));const h=Math.floor(.5*a);let u=null;for(let c=s.from;c<s.to;c++){const f=e[c];f.Ie!==o&&(n.fillStyle=f.Ie,o=f.Ie);const d=Math.round(Math.min(f.de,f.fe)*l),m=Math.round(Math.max(f.de,f.fe)*l),p=Math.round(f._e*l),x=Math.round(f.ue*l);let y=Math.round(r*f.nt)-h;const _=y+a-1;u!==null&&(y=Math.max(u+1,y),y=Math.min(y,_));const w=_-y+1;n.fillRect(y,p,w,d-p),n.fillRect(y,m+1,w,x-m),u=_}}Ve(t){let e=Math.floor(1*t);this.re<=2*e&&(e=Math.floor(.5*(this.re-1)));const s=Math.max(Math.floor(t),e);return this.re<=2*s?Math.max(Math.floor(t),Math.floor(1*t)):s}Ae(t,e,s){if(this.zt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:l}=t;let o="";const a=this.Ve(r);let h=null;for(let u=s.from;u<s.to;u++){const c=e[u];c.ze!==o&&(n.fillStyle=c.ze,o=c.ze);let f=Math.round(c.nt*r)-Math.floor(.5*this.re);const d=f+this.re-1,m=Math.round(Math.min(c.de,c.fe)*l),p=Math.round(Math.max(c.de,c.fe)*l);if(h!==null&&(f=Math.max(h+1,f),f=Math.min(f,d)),this.zt.ee*r>2*a)Lf(n,f,m,d-f+1,p-m+1,a);else{const x=d-f+1;n.fillRect(f,m,x,p-m+1)}h=d}}Be(t,e,s){if(this.zt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:l}=t;let o="";const a=this.Ve(r);for(let h=s.from;h<s.to;h++){const u=e[h];let c=Math.round(Math.min(u.de,u.fe)*l),f=Math.round(Math.max(u.de,u.fe)*l),d=Math.round(u.nt*r)-Math.floor(.5*this.re),m=d+this.re-1;if(u.oe!==o){const p=u.oe;n.fillStyle=p,o=p}this.zt._i&&(d+=a,c+=a,m-=a,f-=a),c>f||n.fillRect(d,c,m-d+1,f-c+1)}}}class Xf extends eh{constructor(){super(...arguments),this.Ns=new Qf}te(t,e,s){return Object.assign(Object.assign({},this.pe(t,e,s)),s.Ws(t))}Ks(){const t=this.Is.W();this.Ns.J({Vn:this.Vs,ee:this.zs.St().ee(),De:t.wickVisible,_i:t.borderVisible,tt:this.Bs})}}class Gf{constructor(t,e){this.Le=t,this.zi=e}K(t,e,s){this.Le.draw(t,this.zi,e,s)}}class wn extends Pr{constructor(t,e,s){super(t,e,!1),this.mn=s,this.Ns=new Gf(this.mn.renderer(),n=>{const r=t.Ct();return r===null?null:t.Dt().Rt(n,r.Ot)})}Ee(t){return this.mn.priceValueBuilder(t)}Ne(t){return this.mn.isWhitespace(t)}$s(){const t=this.Is.js();this.Vs=this.Is.Vn().Qs().map(e=>Object.assign(Object.assign({ot:e.ie,nt:NaN},t.Ws(e.ie)),{Fe:e.We}))}Xs(t,e){e.Zs(this.Vs,Hi(this.Bs))}Ks(){this.mn.update({bars:this.Vs.map(Jf),barSpacing:this.zs.St().ee(),visibleRange:this.Bs},this.Is.W())}}function Jf(i){return{x:i.nt,time:i.ot,originalData:i.Fe,barColor:i.oe}}class td extends ne{constructor(){super(...arguments),this.zt=null,this.je=[]}J(t){this.zt=t,this.je=[]}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.je.length||this.He(e);const n=Math.max(1,Math.floor(s)),r=Math.round(this.zt.$e*s)-Math.floor(n/2),l=r+n;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const a=this.zt.it[o],h=this.je[o-this.zt.tt.from],u=Math.round(a.st*s);let c,f;t.fillStyle=a.oe,u<=r?(c=u,f=l):(c=r,f=u-Math.floor(n/2)+n),t.fillRect(h.Rs,c,h.ui-h.Rs+1,f-c)}}He(t){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.je=[]);const e=Math.ceil(this.zt.ee*t)<=1?0:Math.max(1,Math.floor(t)),s=Math.round(this.zt.ee*t)-e;this.je=new Array(this.zt.tt.to-this.zt.tt.from);for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const l=this.zt.it[r],o=Math.round(l.nt*t);let a,h;if(s%2){const u=(s-1)/2;a=o-u,h=o+u}else{const u=s/2;a=o-u,h=o+u-1}this.je[r-this.zt.tt.from]={Rs:a,ui:h,Ue:o,qe:l.nt*t,ot:l.ot}}for(let r=this.zt.tt.from+1;r<this.zt.tt.to;r++){const l=this.je[r-this.zt.tt.from],o=this.je[r-this.zt.tt.from-1];l.ot===o.ot+1&&l.Rs-o.ui!==e+1&&(o.Ue>o.qe?o.ui=l.Rs-e-1:l.Rs=o.ui+e+1)}let n=Math.ceil(this.zt.ee*t);for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const l=this.je[r-this.zt.tt.from];l.ui<l.Rs&&(l.ui=l.Rs);const o=l.ui-l.Rs+1;n=Math.min(o,n)}if(e>0&&n<4)for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const l=this.je[r-this.zt.tt.from];l.ui-l.Rs+1>n&&(l.Ue>l.qe?l.ui-=1:l.Rs+=1)}}}class ed extends Zs{constructor(){super(...arguments),this.Ns=new td}te(t,e,s){return Object.assign(Object.assign({},this.Js(t,e)),s.Ws(t))}Ks(){const t={it:this.Vs,ee:this.zs.St().ee(),tt:this.Bs,$e:this.Is.Dt().Rt(this.Is.W().base,R(this.Is.Ct()).Ot)};this.Ns.J(t)}}class id extends Zs{constructor(){super(...arguments),this.Ns=new Xa}te(t,e,s){return Object.assign(Object.assign({},this.Js(t,e)),s.Ws(t))}Ks(){const t=this.Is.W(),e={it:this.Vs,Nt:t.lineStyle,us:t.lineVisible?t.lineType:void 0,et:t.lineWidth,Ts:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,tt:this.Bs,_s:this.zs.St().ee()};this.Ns.J(e)}}const sd=/[2-9]/g;class Ui{constructor(t=50){this.Ye=0,this.Xe=1,this.Ke=1,this.Ze={},this.Ge=new Map,this.Je=t}Qe(){this.Ye=0,this.Ge.clear(),this.Xe=1,this.Ke=1,this.Ze={}}Mi(t,e,s){return this.tr(t,e,s).width}gi(t,e,s){const n=this.tr(t,e,s);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}tr(t,e,s){const n=s||sd,r=String(e).replace(n,"0");if(this.Ge.has(r))return At(this.Ge.get(r)).ir;if(this.Ye===this.Je){const o=this.Ze[this.Ke];delete this.Ze[this.Ke],this.Ge.delete(o),this.Ke++,this.Ye--}t.save(),t.textBaseline="middle";const l=t.measureText(r);return t.restore(),l.width===0&&e.length||(this.Ge.set(r,{ir:l,nr:this.Xe}),this.Ze[this.Xe]=r,this.Ye++,this.Xe++),l}}class nd{constructor(t){this.sr=null,this.k=null,this.er="right",this.rr=t}hr(t,e,s){this.sr=t,this.k=e,this.er=s}K(t){this.k!==null&&this.sr!==null&&this.sr.K(t,this.k,this.rr,this.er)}}class ih{constructor(t,e,s){this.lr=t,this.rr=new Ui(50),this.ar=e,this.F=s,this.j=-1,this.Wt=new nd(this.rr)}gt(){const t=this.F._r(this.ar);if(t===null)return null;const e=t.ur(this.ar)?t.cr():this.ar.Dt();if(e===null)return null;const s=t.dr(e);if(s==="overlay")return null;const n=this.F.vr();return n.P!==this.j&&(this.j=n.P,this.rr.Qe()),this.Wt.hr(this.lr.Bi(),n,s),this.Wt}}class rd extends ne{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}pr(t,e){var s;if(!(!((s=this.zt)===null||s===void 0)&&s.yt))return null;const{st:n,et:r,mr:l}=this.zt;return e>=n-r-7&&e<=n+r+7?{br:this.zt,mr:l}:null}Z({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.zt===null||this.zt.yt===!1)return;const r=Math.round(this.zt.st*n);r<0||r>e.height||(t.lineCap="butt",t.strokeStyle=this.zt.O,t.lineWidth=Math.floor(this.zt.et*s),Ge(t,this.zt.Nt),ja(t,r,0,e.width))}}class $r{constructor(t){this.wr={st:0,O:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.gr=new rd,this.ft=!0,this.Is=t,this.zs=t.$t(),this.gr.J(this.wr)}bt(){this.ft=!0}gt(){return this.Is.yt()?(this.ft&&(this.Mr(),this.ft=!1),this.gr):null}}class ld extends $r{constructor(t){super(t)}Mr(){this.wr.yt=!1;const t=this.Is.Dt(),e=t.Sr().Sr;if(e!==2&&e!==3)return;const s=this.Is.W();if(!s.baseLineVisible||!this.Is.yt())return;const n=this.Is.Ct();n!==null&&(this.wr.yt=!0,this.wr.st=t.Rt(n.Ot,n.Ot),this.wr.O=s.baseLineColor,this.wr.et=s.baseLineWidth,this.wr.Nt=s.baseLineStyle)}}class od extends ne{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}We(){return this.zt}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:s}){const n=this.zt;if(n===null)return;const r=Math.max(1,Math.floor(e)),l=r%2/2,o=Math.round(n.qe.x*e)+l,a=n.qe.y*s;t.fillStyle=n.kr,t.beginPath();const h=Math.max(2,1.5*n.yr)*e;t.arc(o,a,h,0,2*Math.PI,!1),t.fill(),t.fillStyle=n.Cr,t.beginPath(),t.arc(o,a,n.ht*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=r,t.strokeStyle=n.Tr,t.beginPath(),t.arc(o,a,n.ht*e+r/2,0,2*Math.PI,!1),t.stroke()}}const ad=[{Pr:0,Rr:.25,Dr:4,Or:10,Ar:.25,Vr:0,Br:.4,Ir:.8},{Pr:.25,Rr:.525,Dr:10,Or:14,Ar:0,Vr:0,Br:.8,Ir:0},{Pr:.525,Rr:1,Dr:14,Or:14,Ar:0,Vr:0,Br:0,Ir:0}];function Yl(i,t,e,s){return function(n,r){if(n==="transparent")return n;const l=zs(n),o=l[3];return`rgba(${l[0]}, ${l[1]}, ${l[2]}, ${r*o})`}(i,e+(s-e)*t)}function Ql(i,t){const e=i%2600/2600;let s;for(const a of ad)if(e>=a.Pr&&e<=a.Rr){s=a;break}$e(s!==void 0,"Last price animation internal logic error");const n=(e-s.Pr)/(s.Rr-s.Pr);return{Cr:Yl(t,n,s.Ar,s.Vr),Tr:Yl(t,n,s.Br,s.Ir),ht:(r=n,l=s.Dr,o=s.Or,l+(o-l)*r)};var r,l,o}class hd{constructor(t){this.Wt=new od,this.ft=!0,this.zr=!0,this.Lr=performance.now(),this.Er=this.Lr-1,this.Nr=t}Fr(){this.Er=this.Lr-1,this.bt()}Wr(){if(this.bt(),this.Nr.W().lastPriceAnimation===2){const t=performance.now(),e=this.Er-t;if(e>0)return void(e<650&&(this.Er+=2600));this.Lr=t,this.Er=t+2600}}bt(){this.ft=!0}jr(){this.zr=!0}yt(){return this.Nr.W().lastPriceAnimation!==0}Hr(){switch(this.Nr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Er}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.zr=!1):this.zr&&(this.$r(),this.zr=!1),this.Wt}Mt(){this.Wt.J(null);const t=this.Nr.$t().St(),e=t.qs(),s=this.Nr.Ct();if(e===null||s===null)return;const n=this.Nr.Ur(!0);if(n.qr||!e.Yr(n.ie))return;const r={x:t.It(n.ie),y:this.Nr.Dt().Rt(n._t,s.Ot)},l=n.O,o=this.Nr.W().lineWidth,a=Ql(this.Xr(),l);this.Wt.J({kr:l,yr:o,Cr:a.Cr,Tr:a.Tr,ht:a.ht,qe:r})}$r(){const t=this.Wt.We();if(t!==null){const e=Ql(this.Xr(),t.kr);t.Cr=e.Cr,t.Tr=e.Tr,t.ht=e.ht}}Xr(){return this.Hr()?performance.now()-this.Lr:2599}}function Pi(i,t){return Ya(Math.min(Math.max(i,12),30)*t)}function Ki(i,t){switch(i){case"arrowDown":case"arrowUp":return Pi(t,1);case"circle":return Pi(t,.8);case"square":return Pi(t,.7)}}function sh(i){return function(t){const e=Math.ceil(t);return e%2!=0?e-1:e}(Pi(i,1))}function Xl(i){return Math.max(Pi(i,.1),3)}function nh(i,t,e,s,n){const r=Ki("square",e),l=(r-1)/2,o=i-l,a=t-l;return s>=o&&s<=o+r&&n>=a&&n<=a+r}function Gl(i,t,e,s){const n=(Ki("arrowUp",s)-1)/2*e.Kr,r=(Ya(s/2)-1)/2*e.Kr;t.beginPath(),i?(t.moveTo(e.nt-n,e.st),t.lineTo(e.nt,e.st-n),t.lineTo(e.nt+n,e.st),t.lineTo(e.nt+r,e.st),t.lineTo(e.nt+r,e.st+n),t.lineTo(e.nt-r,e.st+n),t.lineTo(e.nt-r,e.st)):(t.moveTo(e.nt-n,e.st),t.lineTo(e.nt,e.st+n),t.lineTo(e.nt+n,e.st),t.lineTo(e.nt+r,e.st),t.lineTo(e.nt+r,e.st-n),t.lineTo(e.nt-r,e.st-n),t.lineTo(e.nt-r,e.st)),t.fill()}function ud(i,t,e,s,n,r){return nh(t,e,s,n,r)}class cd extends ne{constructor(){super(...arguments),this.zt=null,this.rr=new Ui,this.j=-1,this.H="",this.Zr=""}J(t){this.zt=t}hr(t,e){this.j===t&&this.H===e||(this.j=t,this.H=e,this.Zr=bi(t,e),this.rr.Qe())}pr(t,e){if(this.zt===null||this.zt.tt===null)return null;for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const n=this.zt.it[s];if(dd(n,t,e))return{br:n.Gr,mr:n.mr}}return null}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:s},n,r){if(this.zt!==null&&this.zt.tt!==null){t.textBaseline="middle",t.font=this.Zr;for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const o=this.zt.it[l];o.Zt!==void 0&&(o.Zt.ji=this.rr.Mi(t,o.Zt.Jr),o.Zt.Bt=this.j,o.Zt.nt=o.nt-o.Zt.ji/2),fd(o,t,e,s)}}}}function fd(i,t,e,s){t.fillStyle=i.O,i.Zt!==void 0&&function(n,r,l,o,a,h){n.save(),n.scale(a,h),n.fillText(r,l,o),n.restore()}(t,i.Zt.Jr,i.Zt.nt,i.Zt.st,e,s),function(n,r,l){if(n.Ys!==0){switch(n.Qr){case"arrowDown":return void Gl(!1,r,l,n.Ys);case"arrowUp":return void Gl(!0,r,l,n.Ys);case"circle":return void function(o,a,h){const u=(Ki("circle",h)-1)/2;o.beginPath(),o.arc(a.nt,a.st,u*a.Kr,0,2*Math.PI,!1),o.fill()}(r,l,n.Ys);case"square":return void function(o,a,h){const u=Ki("square",h),c=(u-1)*a.Kr/2,f=a.nt-c,d=a.st-c;o.fillRect(f,d,u*a.Kr,u*a.Kr)}(r,l,n.Ys)}n.Qr}}(i,t,function(n,r,l){const o=Math.max(1,Math.floor(r))%2/2;return{nt:Math.round(n.nt*r)+o,st:n.st*l,Kr:r}}(i,e,s))}function dd(i,t,e){return!(i.Zt===void 0||!function(s,n,r,l,o,a){const h=l/2;return o>=s&&o<=s+r&&a>=n-h&&a<=n+h}(i.Zt.nt,i.Zt.st,i.Zt.ji,i.Zt.Bt,t,e))||function(s,n,r){if(s.Ys===0)return!1;switch(s.Qr){case"arrowDown":case"arrowUp":return ud(0,s.nt,s.st,s.Ys,n,r);case"circle":return function(l,o,a,h,u){const c=2+Ki("circle",a)/2,f=l-h,d=o-u;return Math.sqrt(f*f+d*d)<=c}(s.nt,s.st,s.Ys,n,r);case"square":return nh(s.nt,s.st,s.Ys,n,r)}}(i,t,e)}function pd(i,t,e,s,n,r,l,o,a){const h=ue(e)?e:e.ge,u=ue(e)?e:e.be,c=ue(e)?e:e.we,f=ue(t.size)?Math.max(t.size,0):1,d=sh(o.ee())*f,m=d/2;switch(i.Ys=d,t.position){case"inBar":return i.st=l.Rt(h,a),void(i.Zt!==void 0&&(i.Zt.st=i.st+m+r+.6*n));case"aboveBar":return i.st=l.Rt(u,a)-m-s.th,i.Zt!==void 0&&(i.Zt.st=i.st-m-.6*n,s.th+=1.2*n),void(s.th+=d+r);case"belowBar":return i.st=l.Rt(c,a)+m+s.ih,i.Zt!==void 0&&(i.Zt.st=i.st+m+r+.6*n,s.ih+=1.2*n),void(s.ih+=d+r)}t.position}class vd{constructor(t,e){this.ft=!0,this.nh=!0,this.sh=!0,this.eh=null,this.Wt=new cd,this.Nr=t,this.Hi=e,this.zt={it:[],tt:null}}bt(t){this.ft=!0,this.sh=!0,t==="data"&&(this.nh=!0)}gt(t){if(!this.Nr.yt())return null;this.ft&&this.rh();const e=this.Hi.W().layout;return this.Wt.hr(e.fontSize,e.fontFamily),this.Wt.J(this.zt),this.Wt}hh(){if(this.sh){if(this.Nr.lh().length>0){const t=this.Hi.St().ee(),e=Xl(t),s=1.5*sh(t)+2*e;this.eh={above:s,below:s}}else this.eh=null;this.sh=!1}return this.eh}rh(){const t=this.Nr.Dt(),e=this.Hi.St(),s=this.Nr.lh();this.nh&&(this.zt.it=s.map(u=>({ot:u.time,nt:0,st:0,Ys:0,Qr:u.shape,O:u.color,Gr:u.Gr,mr:u.id,Zt:void 0})),this.nh=!1);const n=this.Hi.W().layout;this.zt.tt=null;const r=e.qs();if(r===null)return;const l=this.Nr.Ct();if(l===null||this.zt.it.length===0)return;let o=NaN;const a=Xl(e.ee()),h={th:a,ih:a};this.zt.tt=th(this.zt.it,r,!0);for(let u=this.zt.tt.from;u<this.zt.tt.to;u++){const c=s[u];c.time!==o&&(h.th=a,h.ih=a,o=c.time);const f=this.zt.it[u];f.nt=e.It(c.time),c.text!==void 0&&c.text.length>0&&(f.Zt={Jr:c.text,nt:0,st:0,ji:0,Bt:0});const d=this.Nr.ah(c.time);d!==null&&pd(f,c,d,h,n.fontSize,a,t,e,l.Ot)}this.ft=!1}}class md extends $r{constructor(t){super(t)}Mr(){const t=this.wr;t.yt=!1;const e=this.Is.W();if(!e.priceLineVisible||!this.Is.yt())return;const s=this.Is.Ur(e.priceLineSource===0);s.qr||(t.yt=!0,t.st=s.Si,t.O=this.Is.oh(s.O),t.et=e.priceLineWidth,t.Nt=e.priceLineStyle)}}class gd extends Us{constructor(t){super(),this.jt=t}Ii(t,e,s){t.yt=!1,e.yt=!1;const n=this.jt;if(!n.yt())return;const r=n.W(),l=r.lastValueVisible,o=n._h()!=="",a=r.seriesLastValueMode===0,h=n.Ur(!1);if(h.qr)return;l&&(t.Zt=this.uh(h,l,a),t.yt=t.Zt.length!==0),(o||a)&&(e.Zt=this.dh(h,l,o,a),e.yt=e.Zt.length>0);const u=n.oh(h.O),c=Ws(u);s.t=c.t,s.Si=h.Si,e.At=n.$t().Vt(h.Si/n.Dt().Bt()),t.At=u,t.O=c.i,e.O=c.i}dh(t,e,s,n){let r="";const l=this.jt._h();return s&&l.length!==0&&(r+=`${l} `),e&&n&&(r+=this.jt.Dt().fh()?t.ph:t.mh),r.trim()}uh(t,e,s){return e?s?this.jt.Dt().fh()?t.mh:t.ph:t.Zt:""}}function Jl(i,t,e,s){const n=Number.isFinite(t),r=Number.isFinite(e);return n&&r?i(t,e):n||r?n?t:e:s}class Bt{constructor(t,e){this.bh=t,this.wh=e}gh(t){return t!==null&&this.bh===t.bh&&this.wh===t.wh}Mh(){return new Bt(this.bh,this.wh)}xh(){return this.bh}Sh(){return this.wh}kh(){return this.wh-this.bh}Ei(){return this.wh===this.bh||Number.isNaN(this.wh)||Number.isNaN(this.bh)}Jn(t){return t===null?this:new Bt(Jl(Math.min,this.xh(),t.xh(),-1/0),Jl(Math.max,this.Sh(),t.Sh(),1/0))}yh(t){if(!ue(t)||this.wh-this.bh===0)return;const e=.5*(this.wh+this.bh);let s=this.wh-e,n=this.bh-e;s*=t,n*=t,this.wh=e+s,this.bh=e+n}Ch(t){ue(t)&&(this.wh+=t,this.bh+=t)}Th(){return{minValue:this.bh,maxValue:this.wh}}static Ph(t){return t===null?null:new Bt(t.minValue,t.maxValue)}}class Is{constructor(t,e){this.Rh=t,this.Dh=e||null}Oh(){return this.Rh}Ah(){return this.Dh}Th(){return this.Rh===null?null:{priceRange:this.Rh.Th(),margins:this.Dh||void 0}}static Ph(t){return t===null?null:new Is(Bt.Ph(t.priceRange),t.margins)}}class bd extends $r{constructor(t,e){super(t),this.Vh=e}Mr(){const t=this.wr;t.yt=!1;const e=this.Vh.W();if(!this.Is.yt()||!e.lineVisible)return;const s=this.Vh.Bh();s!==null&&(t.yt=!0,t.st=s,t.O=e.color,t.et=e.lineWidth,t.Nt=e.lineStyle,t.mr=this.Vh.W().id)}}class yd extends Us{constructor(t,e){super(),this.Nr=t,this.Vh=e}Ii(t,e,s){t.yt=!1,e.yt=!1;const n=this.Vh.W(),r=n.axisLabelVisible,l=n.title!=="",o=this.Nr;if(!r||!o.yt())return;const a=this.Vh.Bh();if(a===null)return;l&&(e.Zt=n.title,e.yt=!0),e.At=o.$t().Vt(a/o.Dt().Bt()),t.Zt=this.Ih(n.price),t.yt=!0;const h=Ws(n.axisLabelColor||n.color);s.t=h.t;const u=n.axisLabelTextColor||h.i;t.O=u,e.O=u,s.Si=a}Ih(t){const e=this.Nr.Ct();return e===null?"":this.Nr.Dt().Ni(t,e.Ot)}}class wd{constructor(t,e){this.Nr=t,this._n=e,this.zh=new bd(t,this),this.lr=new yd(t,this),this.Lh=new ih(this.lr,t,t.$t())}Eh(t){se(this._n,t),this.bt(),this.Nr.$t().Nh()}W(){return this._n}Fh(){return this.zh}Wh(){return this.Lh}jh(){return this.lr}bt(){this.zh.bt(),this.lr.bt()}Bh(){const t=this.Nr,e=t.Dt();if(t.$t().St().Ei()||e.Ei())return null;const s=t.Ct();return s===null?null:e.Rt(this._n.price,s.Ot)}}class _d extends Lr{constructor(t){super(),this.Hi=t}$t(){return this.Hi}}const xd={Bar:(i,t,e,s)=>{var n;const r=t.upColor,l=t.downColor,o=R(i(e,s)),a=hi(o.Ot[0])<=hi(o.Ot[3]);return{oe:(n=o.O)!==null&&n!==void 0?n:a?r:l}},Candlestick:(i,t,e,s)=>{var n,r,l;const o=t.upColor,a=t.downColor,h=t.borderUpColor,u=t.borderDownColor,c=t.wickUpColor,f=t.wickDownColor,d=R(i(e,s)),m=hi(d.Ot[0])<=hi(d.Ot[3]);return{oe:(n=d.O)!==null&&n!==void 0?n:m?o:a,ze:(r=d.At)!==null&&r!==void 0?r:m?h:u,Ie:(l=d.Hh)!==null&&l!==void 0?l:m?c:f}},Custom:(i,t,e,s)=>{var n;return{oe:(n=R(i(e,s)).O)!==null&&n!==void 0?n:t.color}},Area:(i,t,e,s)=>{var n,r,l,o;const a=R(i(e,s));return{oe:(n=a.lt)!==null&&n!==void 0?n:t.lineColor,lt:(r=a.lt)!==null&&r!==void 0?r:t.lineColor,ys:(l=a.ys)!==null&&l!==void 0?l:t.topColor,Cs:(o=a.Cs)!==null&&o!==void 0?o:t.bottomColor}},Baseline:(i,t,e,s)=>{var n,r,l,o,a,h;const u=R(i(e,s));return{oe:u.Ot[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,Ce:(n=u.Ce)!==null&&n!==void 0?n:t.topLineColor,Te:(r=u.Te)!==null&&r!==void 0?r:t.bottomLineColor,Me:(l=u.Me)!==null&&l!==void 0?l:t.topFillColor1,xe:(o=u.xe)!==null&&o!==void 0?o:t.topFillColor2,Se:(a=u.Se)!==null&&a!==void 0?a:t.bottomFillColor1,ke:(h=u.ke)!==null&&h!==void 0?h:t.bottomFillColor2}},Line:(i,t,e,s)=>{var n,r;const l=R(i(e,s));return{oe:(n=l.O)!==null&&n!==void 0?n:t.color,lt:(r=l.O)!==null&&r!==void 0?r:t.color}},Histogram:(i,t,e,s)=>{var n;return{oe:(n=R(i(e,s)).O)!==null&&n!==void 0?n:t.color}}};class Sd{constructor(t){this.$h=(e,s)=>s!==void 0?s.Ot:this.Nr.Vn().Uh(e),this.Nr=t,this.qh=xd[t.Yh()]}Ws(t,e){return this.qh(this.$h,this.Nr.W(),t,e)}}var to;(function(i){i[i.NearestLeft=-1]="NearestLeft",i[i.None=0]="None",i[i.NearestRight=1]="NearestRight"})(to||(to={}));const Se=30;class Cd{constructor(){this.Xh=[],this.Kh=new Map,this.Zh=new Map}Gh(){return this.Ys()>0?this.Xh[this.Xh.length-1]:null}Jh(){return this.Ys()>0?this.Qh(0):null}An(){return this.Ys()>0?this.Qh(this.Xh.length-1):null}Ys(){return this.Xh.length}Ei(){return this.Ys()===0}Yr(t){return this.tl(t,0)!==null}Uh(t){return this.il(t)}il(t,e=0){const s=this.tl(t,e);return s===null?null:Object.assign(Object.assign({},this.nl(s)),{ie:this.Qh(s)})}Qs(){return this.Xh}sl(t,e,s){if(this.Ei())return null;let n=null;for(const r of s)n=us(n,this.el(t,e,r));return n}J(t){this.Zh.clear(),this.Kh.clear(),this.Xh=t}Qh(t){return this.Xh[t].ie}nl(t){return this.Xh[t]}tl(t,e){const s=this.rl(t);if(s===null&&e!==0)switch(e){case-1:return this.hl(t);case 1:return this.ll(t);default:throw new TypeError("Unknown search mode")}return s}hl(t){let e=this.al(t);return e>0&&(e-=1),e!==this.Xh.length&&this.Qh(e)<t?e:null}ll(t){const e=this.ol(t);return e!==this.Xh.length&&t<this.Qh(e)?e:null}rl(t){const e=this.al(t);return e===this.Xh.length||t<this.Xh[e].ie?null:e}al(t){return Xi(this.Xh,t,(e,s)=>e.ie<s)}ol(t){return Ja(this.Xh,t,(e,s)=>e.ie>s)}_l(t,e,s){let n=null;for(let r=t;r<e;r++){const l=this.Xh[r].Ot[s];Number.isNaN(l)||(n===null?n={ul:l,cl:l}:(l<n.ul&&(n.ul=l),l>n.cl&&(n.cl=l)))}return n}el(t,e,s){if(this.Ei())return null;let n=null;const r=R(this.Jh()),l=R(this.An()),o=Math.max(t,r),a=Math.min(e,l),h=Math.ceil(o/Se)*Se,u=Math.max(h,Math.floor(a/Se)*Se);{const f=this.al(o),d=this.ol(Math.min(a,h,e));n=us(n,this._l(f,d,s))}let c=this.Kh.get(s);c===void 0&&(c=new Map,this.Kh.set(s,c));for(let f=Math.max(h+1,o);f<u;f+=Se){const d=Math.floor(f/Se);let m=c.get(d);if(m===void 0){const p=this.al(d*Se),x=this.ol((d+1)*Se-1);m=this._l(p,x,s),c.set(d,m)}n=us(n,m)}{const f=this.al(u),d=this.ol(a);n=us(n,this._l(f,d,s))}return n}}function us(i,t){return i===null?t:t===null?i:{ul:Math.min(i.ul,t.ul),cl:Math.max(i.cl,t.cl)}}class Md{constructor(t){this.dl=t}K(t,e,s){this.dl.draw(t)}fl(t,e,s){var n,r;(r=(n=this.dl).drawBackground)===null||r===void 0||r.call(n,t)}}class _n{constructor(t){this.Ge=null,this.mn=t}gt(){var t;const e=this.mn.renderer();if(e===null)return null;if(((t=this.Ge)===null||t===void 0?void 0:t.vl)===e)return this.Ge.pl;const s=new Md(e);return this.Ge={vl:e,pl:s},s}ml(){var t,e,s;return(s=(e=(t=this.mn).zOrder)===null||e===void 0?void 0:e.call(t))!==null&&s!==void 0?s:"normal"}}function rh(i){var t,e,s,n,r;return{Zt:i.text(),Si:i.coordinate(),xi:(t=i.fixedCoordinate)===null||t===void 0?void 0:t.call(i),O:i.textColor(),t:i.backColor(),yt:(s=(e=i.visible)===null||e===void 0?void 0:e.call(i))===null||s===void 0||s,hi:(r=(n=i.tickVisible)===null||n===void 0?void 0:n.call(i))===null||r===void 0||r}}class Od{constructor(t,e){this.Wt=new Ua,this.bl=t,this.wl=e}gt(){return this.Wt.J(Object.assign({ji:this.wl.ji()},rh(this.bl))),this.Wt}}class Ed extends Us{constructor(t,e){super(),this.bl=t,this.zi=e}Ii(t,e,s){const n=rh(this.bl);s.t=n.t,t.O=n.O;const r=2/12*this.zi.P();s.bi=r,s.wi=r,s.Si=n.Si,s.xi=n.xi,t.Zt=n.Zt,t.yt=n.yt,t.hi=n.hi}}class Td{constructor(t,e){this.gl=null,this.Ml=null,this.xl=null,this.Sl=null,this.kl=null,this.yl=t,this.Nr=e}Cl(){return this.yl}Rn(){var t,e;(e=(t=this.yl).updateAllViews)===null||e===void 0||e.call(t)}Cn(){var t,e,s,n;const r=(s=(e=(t=this.yl).paneViews)===null||e===void 0?void 0:e.call(t))!==null&&s!==void 0?s:[];if(((n=this.gl)===null||n===void 0?void 0:n.vl)===r)return this.gl.pl;const l=r.map(o=>new _n(o));return this.gl={vl:r,pl:l},l}Ji(){var t,e,s,n;const r=(s=(e=(t=this.yl).timeAxisViews)===null||e===void 0?void 0:e.call(t))!==null&&s!==void 0?s:[];if(((n=this.Ml)===null||n===void 0?void 0:n.vl)===r)return this.Ml.pl;const l=this.Nr.$t().St(),o=r.map(a=>new Od(a,l));return this.Ml={vl:r,pl:o},o}Tn(){var t,e,s,n;const r=(s=(e=(t=this.yl).priceAxisViews)===null||e===void 0?void 0:e.call(t))!==null&&s!==void 0?s:[];if(((n=this.xl)===null||n===void 0?void 0:n.vl)===r)return this.xl.pl;const l=this.Nr.Dt(),o=r.map(a=>new Ed(a,l));return this.xl={vl:r,pl:o},o}Tl(){var t,e,s,n;const r=(s=(e=(t=this.yl).priceAxisPaneViews)===null||e===void 0?void 0:e.call(t))!==null&&s!==void 0?s:[];if(((n=this.Sl)===null||n===void 0?void 0:n.vl)===r)return this.Sl.pl;const l=r.map(o=>new _n(o));return this.Sl={vl:r,pl:l},l}Pl(){var t,e,s,n;const r=(s=(e=(t=this.yl).timeAxisPaneViews)===null||e===void 0?void 0:e.call(t))!==null&&s!==void 0?s:[];if(((n=this.kl)===null||n===void 0?void 0:n.vl)===r)return this.kl.pl;const l=r.map(o=>new _n(o));return this.kl={vl:r,pl:l},l}Rl(t,e){var s,n,r;return(r=(n=(s=this.yl).autoscaleInfo)===null||n===void 0?void 0:n.call(s,t,e))!==null&&r!==void 0?r:null}pr(t,e){var s,n,r;return(r=(n=(s=this.yl).hitTest)===null||n===void 0?void 0:n.call(s,t,e))!==null&&r!==void 0?r:null}}function xn(i,t,e,s){i.forEach(n=>{t(n).forEach(r=>{r.ml()===e&&s.push(r)})})}function Sn(i){return i.Cn()}function zd(i){return i.Tl()}function Id(i){return i.Pl()}class Nr extends _d{constructor(t,e,s,n,r){super(t),this.zt=new Cd,this.zh=new md(this),this.Dl=[],this.Ol=new ld(this),this.Al=null,this.Vl=null,this.Bl=[],this.Il=[],this.zl=null,this.Ll=[],this._n=e,this.El=s;const l=new gd(this);this.en=[l],this.Lh=new ih(l,this,t),s!=="Area"&&s!=="Line"&&s!=="Baseline"||(this.Al=new hd(this)),this.Nl(),this.Fl(r)}S(){this.zl!==null&&clearTimeout(this.zl)}oh(t){return this._n.priceLineColor||t}Ur(t){const e={qr:!0},s=this.Dt();if(this.$t().St().Ei()||s.Ei()||this.zt.Ei())return e;const n=this.$t().St().qs(),r=this.Ct();if(n===null||r===null)return e;let l,o;if(t){const c=this.zt.Gh();if(c===null)return e;l=c,o=c.ie}else{const c=this.zt.il(n.ui(),-1);if(c===null||(l=this.zt.Uh(c.ie),l===null))return e;o=c.ie}const a=l.Ot[3],h=this.js().Ws(o,{Ot:l}),u=s.Rt(a,r.Ot);return{qr:!1,_t:a,Zt:s.Ni(a,r.Ot),ph:s.Wl(a),mh:s.jl(a,r.Ot),O:h.oe,Si:u,ie:o}}js(){return this.Vl!==null||(this.Vl=new Sd(this)),this.Vl}W(){return this._n}Eh(t){const e=t.priceScaleId;e!==void 0&&e!==this._n.priceScaleId&&this.$t().Hl(this,e),se(this._n,t),t.priceFormat!==void 0&&(this.Nl(),this.$t().$l()),this.$t().Ul(this),this.$t().ql(),this.mn.bt("options")}J(t,e){this.zt.J(t),this.Yl(),this.mn.bt("data"),this.un.bt("data"),this.Al!==null&&(e&&e.Xl?this.Al.Wr():t.length===0&&this.Al.Fr());const s=this.$t()._r(this);this.$t().Kl(s),this.$t().Ul(this),this.$t().ql(),this.$t().Nh()}Zl(t){this.Bl=t,this.Yl();const e=this.$t()._r(this);this.un.bt("data"),this.$t().Kl(e),this.$t().Ul(this),this.$t().ql(),this.$t().Nh()}Gl(){return this.Bl}lh(){return this.Il}Jl(t){const e=new wd(this,t);return this.Dl.push(e),this.$t().Ul(this),e}Ql(t){const e=this.Dl.indexOf(t);e!==-1&&this.Dl.splice(e,1),this.$t().Ul(this)}Yh(){return this.El}Ct(){const t=this.ta();return t===null?null:{Ot:t.Ot[3],ia:t.ot}}ta(){const t=this.$t().St().qs();if(t===null)return null;const e=t.Rs();return this.zt.il(e,1)}Vn(){return this.zt}ah(t){const e=this.zt.Uh(t);return e===null?null:this.El==="Bar"||this.El==="Candlestick"||this.El==="Custom"?{me:e.Ot[0],be:e.Ot[1],we:e.Ot[2],ge:e.Ot[3]}:e.Ot[3]}na(t){const e=[];xn(this.Ll,Sn,"top",e);const s=this.Al;return s!==null&&s.yt()&&(this.zl===null&&s.Hr()&&(this.zl=setTimeout(()=>{this.zl=null,this.$t().sa()},0)),s.jr(),e.push(s)),e}Cn(){const t=[];this.ea()||t.push(this.Ol),t.push(this.mn,this.zh,this.un);const e=this.Dl.map(s=>s.Fh());return t.push(...e),xn(this.Ll,Sn,"normal",t),t}ra(){return this.ha(Sn,"bottom")}la(t){return this.ha(zd,t)}aa(t){return this.ha(Id,t)}oa(t,e){return this.Ll.map(s=>s.pr(t,e)).filter(s=>s!==null)}Gi(t){return[this.Lh,...this.Dl.map(e=>e.Wh())]}Tn(t,e){if(e!==this.qi&&!this.ea())return[];const s=[...this.en];for(const n of this.Dl)s.push(n.jh());return this.Ll.forEach(n=>{s.push(...n.Tn())}),s}Ji(){const t=[];return this.Ll.forEach(e=>{t.push(...e.Ji())}),t}Rl(t,e){if(this._n.autoscaleInfoProvider!==void 0){const s=this._n.autoscaleInfoProvider(()=>{const n=this._a(t,e);return n===null?null:n.Th()});return Is.Ph(s)}return this._a(t,e)}ua(){return this._n.priceFormat.minMove}ca(){return this.da}Rn(){var t;this.mn.bt(),this.un.bt();for(const e of this.en)e.bt();for(const e of this.Dl)e.bt();this.zh.bt(),this.Ol.bt(),(t=this.Al)===null||t===void 0||t.bt(),this.Ll.forEach(e=>e.Rn())}Dt(){return R(super.Dt())}kt(t){if(!((this.El==="Line"||this.El==="Area"||this.El==="Baseline")&&this._n.crosshairMarkerVisible))return null;const e=this.zt.Uh(t);return e===null?null:{_t:e.Ot[3],ht:this.fa(),At:this.va(),Pt:this.pa(),Tt:this.ma(t)}}_h(){return this._n.title}yt(){return this._n.visible}ba(t){this.Ll.push(new Td(t,this))}wa(t){this.Ll=this.Ll.filter(e=>e.Cl()!==t)}ga(){if(this.mn instanceof wn)return t=>this.mn.Ee(t)}Ma(){if(this.mn instanceof wn)return t=>this.mn.Ne(t)}ea(){return!Ks(this.Dt().xa())}_a(t,e){if(!Wi(t)||!Wi(e)||this.zt.Ei())return null;const s=this.El==="Line"||this.El==="Area"||this.El==="Baseline"||this.El==="Histogram"?[3]:[2,1],n=this.zt.sl(t,e,s);let r=n!==null?new Bt(n.ul,n.cl):null;if(this.Yh()==="Histogram"){const o=this._n.base,a=new Bt(o,o);r=r!==null?r.Jn(a):a}let l=this.un.hh();return this.Ll.forEach(o=>{const a=o.Rl(t,e);if(a!=null&&a.priceRange){const d=new Bt(a.priceRange.minValue,a.priceRange.maxValue);r=r!==null?r.Jn(d):d}var h,u,c,f;a!=null&&a.margins&&(h=l,u=a.margins,l={above:Math.max((c=h==null?void 0:h.above)!==null&&c!==void 0?c:0,u.above),below:Math.max((f=h==null?void 0:h.below)!==null&&f!==void 0?f:0,u.below)})}),new Is(r,l)}fa(){switch(this.El){case"Line":case"Area":case"Baseline":return this._n.crosshairMarkerRadius}return 0}va(){switch(this.El){case"Line":case"Area":case"Baseline":{const t=this._n.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}pa(){switch(this.El){case"Line":case"Area":case"Baseline":return this._n.crosshairMarkerBorderWidth}return 0}ma(t){switch(this.El){case"Line":case"Area":case"Baseline":{const e=this._n.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.js().Ws(t).oe}Nl(){switch(this._n.priceFormat.type){case"custom":this.da={format:this._n.priceFormat.formatter};break;case"volume":this.da=new Af(this._n.priceFormat.precision);break;case"percent":this.da=new Ka(this._n.priceFormat.precision);break;default:{const t=Math.pow(10,this._n.priceFormat.precision);this.da=new qs(t,this._n.priceFormat.minMove*t)}}this.qi!==null&&this.qi.Sa()}Yl(){const t=this.$t().St();if(!t.ka()||this.zt.Ei())return void(this.Il=[]);const e=R(this.zt.Jh());this.Il=this.Bl.map((s,n)=>{const r=R(t.ya(s.time,!0)),l=r<e?1:-1;return{time:R(this.zt.il(r,l)).ie,position:s.position,shape:s.shape,color:s.color,id:s.id,Gr:n,text:s.text,size:s.size,originalTime:s.originalTime}})}Fl(t){switch(this.un=new vd(this,this.$t()),this.El){case"Bar":this.mn=new Kf(this,this.$t());break;case"Candlestick":this.mn=new Xf(this,this.$t());break;case"Line":this.mn=new id(this,this.$t());break;case"Custom":this.mn=new wn(this,this.$t(),At(t));break;case"Area":this.mn=new Hf(this,this.$t());break;case"Baseline":this.mn=new Yf(this,this.$t());break;case"Histogram":this.mn=new ed(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.El)}}ha(t,e){const s=[];return xn(this.Ll,t,e,s),s}}class Rd{constructor(t){this._n=t}Ca(t,e,s){let n=t;if(this._n.mode===0)return n;const r=s.dn(),l=r.Ct();if(l===null)return n;const o=r.Rt(t,l),a=s.Ta().filter(u=>u instanceof Nr).reduce((u,c)=>{if(s.ur(c)||!c.yt())return u;const f=c.Dt(),d=c.Vn();if(f.Ei()||!d.Yr(e))return u;const m=d.Uh(e);if(m===null)return u;const p=hi(c.Ct());return u.concat([f.Rt(m.Ot[3],p.Ot)])},[]);if(a.length===0)return n;a.sort((u,c)=>Math.abs(u-o)-Math.abs(c-o));const h=a[0];return n=r.fn(h,l),n}}class Ld extends ne{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.zt===null)return;const r=Math.max(1,Math.floor(s));t.lineWidth=r,function(l,o){l.save(),l.lineWidth%2&&l.translate(.5,.5),o(),l.restore()}(t,()=>{const l=R(this.zt);if(l.Pa){t.strokeStyle=l.Ra,Ge(t,l.Da),t.beginPath();for(const o of l.Oa){const a=Math.round(o.Aa*s);t.moveTo(a,-r),t.lineTo(a,e.height+r)}t.stroke()}if(l.Va){t.strokeStyle=l.Ba,Ge(t,l.Ia),t.beginPath();for(const o of l.za){const a=Math.round(o.Aa*n);t.moveTo(-r,a),t.lineTo(e.width+r,a)}t.stroke()}})}}class kd{constructor(t){this.Wt=new Ld,this.ft=!0,this.Qi=t}bt(){this.ft=!0}gt(){if(this.ft){const t=this.Qi.$t().W().grid,e={Va:t.horzLines.visible,Pa:t.vertLines.visible,Ba:t.horzLines.color,Ra:t.vertLines.color,Ia:t.horzLines.style,Da:t.vertLines.style,za:this.Qi.dn().La(),Oa:(this.Qi.$t().St().La()||[]).map(s=>({Aa:s.coord}))};this.Wt.J(e),this.ft=!1}return this.Wt}}class Pd{constructor(t){this.mn=new kd(t)}Fh(){return this.mn}}const Cn={Ea:4,Na:1e-4};function ui(i,t){const e=100*(i-t)/t;return t<0?-e:e}function $d(i,t){const e=ui(i.xh(),t),s=ui(i.Sh(),t);return new Bt(e,s)}function $i(i,t){const e=100*(i-t)/t+100;return t<0?-e:e}function Nd(i,t){const e=$i(i.xh(),t),s=$i(i.Sh(),t);return new Bt(e,s)}function Rs(i,t){const e=Math.abs(i);if(e<1e-15)return 0;const s=Math.log10(e+t.Na)+t.Ea;return i<0?-s:s}function Ni(i,t){const e=Math.abs(i);if(e<1e-15)return 0;const s=Math.pow(10,e-t.Ea)-t.Na;return i<0?-s:s}function Mi(i,t){if(i===null)return null;const e=Rs(i.xh(),t),s=Rs(i.Sh(),t);return new Bt(e,s)}function cs(i,t){if(i===null)return null;const e=Ni(i.xh(),t),s=Ni(i.Sh(),t);return new Bt(e,s)}function Mn(i){if(i===null)return Cn;const t=Math.abs(i.Sh()-i.xh());if(t>=1||t<1e-15)return Cn;const e=Math.ceil(Math.abs(Math.log10(t))),s=Cn.Ea+e;return{Ea:s,Na:1/Math.pow(10,s)}}class On{constructor(t,e){if(this.Fa=t,this.Wa=e,function(s){if(s<0)return!1;for(let n=s;n>1;n/=10)if(n%10!=0)return!1;return!0}(this.Fa))this.ja=[2,2.5,2];else{this.ja=[];for(let s=this.Fa;s!==1;){if(s%2==0)this.ja.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.ja.push(2,2.5),s/=5}if(this.ja.length>100)throw new Error("something wrong with base")}}}Ha(t,e,s){const n=this.Fa===0?0:1/this.Fa;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),l=0,o=this.Wa[0];for(;;){const c=hs(r,n,1e-14)&&r>n+1e-14,f=hs(r,s*o,1e-14),d=hs(r,1,1e-14);if(!(c&&f&&d))break;r/=o,o=this.Wa[++l%this.Wa.length]}if(r<=n+1e-14&&(r=n),r=Math.max(1,r),this.ja.length>0&&(a=r,h=1,u=1e-14,Math.abs(a-h)<u))for(l=0,o=this.ja[0];hs(r,s*o,1e-14)&&r>n+1e-14;)r/=o,o=this.ja[++l%this.ja.length];var a,h,u;return r}}class eo{constructor(t,e,s,n){this.$a=[],this.zi=t,this.Fa=e,this.Ua=s,this.qa=n}Ha(t,e){if(t<e)throw new Error("high < low");const s=this.zi.Bt(),n=(t-e)*this.Ya()/s,r=new On(this.Fa,[2,2.5,2]),l=new On(this.Fa,[2,2,2.5]),o=new On(this.Fa,[2.5,2,2]),a=[];return a.push(r.Ha(t,e,n),l.Ha(t,e,n),o.Ha(t,e,n)),function(h){if(h.length<1)throw Error("array is empty");let u=h[0];for(let c=1;c<h.length;++c)h[c]<u&&(u=h[c]);return u}(a)}Xa(){const t=this.zi,e=t.Ct();if(e===null)return void(this.$a=[]);const s=t.Bt(),n=this.Ua(s-1,e),r=this.Ua(0,e),l=this.zi.W().entireTextOnly?this.Ka()/2:0,o=l,a=s-1-l,h=Math.max(n,r),u=Math.min(n,r);if(h===u)return void(this.$a=[]);let c=this.Ha(h,u),f=h%c;f+=f<0?c:0;const d=h>=u?1:-1;let m=null,p=0;for(let x=h-f;x>u;x-=c){const y=this.qa(x,e,!0);m!==null&&Math.abs(y-m)<this.Ya()||y<o||y>a||(p<this.$a.length?(this.$a[p].Aa=y,this.$a[p].Za=t.Ga(x)):this.$a.push({Aa:y,Za:t.Ga(x)}),p++,m=y,t.Ja()&&(c=this.Ha(x*d,u)))}this.$a.length=p}La(){return this.$a}Ka(){return this.zi.P()}Ya(){return Math.ceil(2.5*this.Ka())}}function lh(i){return i.slice().sort((t,e)=>R(t.Xi())-R(e.Xi()))}var io;(function(i){i[i.Normal=0]="Normal",i[i.Logarithmic=1]="Logarithmic",i[i.Percentage=2]="Percentage",i[i.IndexedTo100=3]="IndexedTo100"})(io||(io={}));const so=new Ka,no=new qs(100,1);class Ad{constructor(t,e,s,n){this.Qa=0,this.io=null,this.Rh=null,this.no=null,this.so={eo:!1,ro:null},this.ho=0,this.lo=0,this.ao=new yt,this.oo=new yt,this._o=[],this.uo=null,this.co=null,this.do=null,this.fo=null,this.da=no,this.vo=Mn(null),this.po=t,this._n=e,this.mo=s,this.bo=n,this.wo=new eo(this,100,this.Mo.bind(this),this.xo.bind(this))}xa(){return this.po}W(){return this._n}Eh(t){if(se(this._n,t),this.Sa(),t.mode!==void 0&&this.So({Sr:t.mode}),t.scaleMargins!==void 0){const e=At(t.scaleMargins.top),s=At(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(e+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+s}`);this.ko(),this.co=null}}yo(){return this._n.autoScale}Ja(){return this._n.mode===1}fh(){return this._n.mode===2}Co(){return this._n.mode===3}Sr(){return{Nn:this._n.autoScale,To:this._n.invertScale,Sr:this._n.mode}}So(t){const e=this.Sr();let s=null;t.Nn!==void 0&&(this._n.autoScale=t.Nn),t.Sr!==void 0&&(this._n.mode=t.Sr,t.Sr!==2&&t.Sr!==3||(this._n.autoScale=!0),this.so.eo=!1),e.Sr===1&&t.Sr!==e.Sr&&(function(r,l){if(r===null)return!1;const o=Ni(r.xh(),l),a=Ni(r.Sh(),l);return isFinite(o)&&isFinite(a)}(this.Rh,this.vo)?(s=cs(this.Rh,this.vo),s!==null&&this.Po(s)):this._n.autoScale=!0),t.Sr===1&&t.Sr!==e.Sr&&(s=Mi(this.Rh,this.vo),s!==null&&this.Po(s));const n=e.Sr!==this._n.mode;n&&(e.Sr===2||this.fh())&&this.Sa(),n&&(e.Sr===3||this.Co())&&this.Sa(),t.To!==void 0&&e.To!==t.To&&(this._n.invertScale=t.To,this.Ro()),this.oo.m(e,this.Sr())}Do(){return this.oo}P(){return this.mo.fontSize}Bt(){return this.Qa}Oo(t){this.Qa!==t&&(this.Qa=t,this.ko(),this.co=null)}Ao(){if(this.io)return this.io;const t=this.Bt()-this.Vo()-this.Bo();return this.io=t,t}Oh(){return this.Io(),this.Rh}Po(t,e){const s=this.Rh;(e||s===null&&t!==null||s!==null&&!s.gh(t))&&(this.co=null,this.Rh=t)}Ei(){return this.Io(),this.Qa===0||!this.Rh||this.Rh.Ei()}zo(t){return this.To()?t:this.Bt()-1-t}Rt(t,e){return this.fh()?t=ui(t,e):this.Co()&&(t=$i(t,e)),this.xo(t,e)}Gs(t,e,s){this.Io();const n=this.Bo(),r=R(this.Oh()),l=r.xh(),o=r.Sh(),a=this.Ao()-1,h=this.To(),u=a/(o-l),c=s===void 0?0:s.from,f=s===void 0?t.length:s.to,d=this.Lo();for(let m=c;m<f;m++){const p=t[m],x=p._t;if(isNaN(x))continue;let y=x;d!==null&&(y=d(p._t,e));const _=n+u*(y-l),w=h?_:this.Qa-1-_;p.st=w}}ve(t,e,s){this.Io();const n=this.Bo(),r=R(this.Oh()),l=r.xh(),o=r.Sh(),a=this.Ao()-1,h=this.To(),u=a/(o-l),c=s===void 0?0:s.from,f=s===void 0?t.length:s.to,d=this.Lo();for(let m=c;m<f;m++){const p=t[m];let x=p.me,y=p.be,_=p.we,w=p.ge;d!==null&&(x=d(p.me,e),y=d(p.be,e),_=d(p.we,e),w=d(p.ge,e));let b=n+u*(x-l),M=h?b:this.Qa-1-b;p.de=M,b=n+u*(y-l),M=h?b:this.Qa-1-b,p._e=M,b=n+u*(_-l),M=h?b:this.Qa-1-b,p.ue=M,b=n+u*(w-l),M=h?b:this.Qa-1-b,p.fe=M}}fn(t,e){const s=this.Mo(t,e);return this.Eo(s,e)}Eo(t,e){let s=t;return this.fh()?s=function(n,r){return r<0&&(n=-n),n/100*r+r}(s,e):this.Co()&&(s=function(n,r){return n-=100,r<0&&(n=-n),n/100*r+r}(s,e)),s}Ta(){return this._o}No(){if(this.uo)return this.uo;let t=[];for(let e=0;e<this._o.length;e++){const s=this._o[e];s.Xi()===null&&s.Ki(e+1),t.push(s)}return t=lh(t),this.uo=t,this.uo}Fo(t){this._o.indexOf(t)===-1&&(this._o.push(t),this.Sa(),this.Wo())}jo(t){const e=this._o.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this._o.splice(e,1),this._o.length===0&&(this.So({Nn:!0}),this.Po(null)),this.Sa(),this.Wo()}Ct(){let t=null;for(const e of this._o){const s=e.Ct();s!==null&&(t===null||s.ia<t.ia)&&(t=s)}return t===null?null:t.Ot}To(){return this._n.invertScale}La(){const t=this.Ct()===null;if(this.co!==null&&(t||this.co.Ho===t))return this.co.La;this.wo.Xa();const e=this.wo.La();return this.co={La:e,Ho:t},this.ao.m(),e}$o(){return this.ao}Uo(t){this.fh()||this.Co()||this.do===null&&this.no===null&&(this.Ei()||(this.do=this.Qa-t,this.no=R(this.Oh()).Mh()))}qo(t){if(this.fh()||this.Co()||this.do===null)return;this.So({Nn:!1}),(t=this.Qa-t)<0&&(t=0);let e=(this.do+.2*(this.Qa-1))/(t+.2*(this.Qa-1));const s=R(this.no).Mh();e=Math.max(e,.1),s.yh(e),this.Po(s)}Yo(){this.fh()||this.Co()||(this.do=null,this.no=null)}Xo(t){this.yo()||this.fo===null&&this.no===null&&(this.Ei()||(this.fo=t,this.no=R(this.Oh()).Mh()))}Ko(t){if(this.yo()||this.fo===null)return;const e=R(this.Oh()).kh()/(this.Ao()-1);let s=t-this.fo;this.To()&&(s*=-1);const n=s*e,r=R(this.no).Mh();r.Ch(n),this.Po(r,!0),this.co=null}Zo(){this.yo()||this.fo!==null&&(this.fo=null,this.no=null)}ca(){return this.da||this.Sa(),this.da}Ni(t,e){switch(this._n.mode){case 2:return this.Go(ui(t,e));case 3:return this.ca().format($i(t,e));default:return this.Ih(t)}}Ga(t){switch(this._n.mode){case 2:return this.Go(t);case 3:return this.ca().format(t);default:return this.Ih(t)}}Wl(t){return this.Ih(t,R(this.Jo()).ca())}jl(t,e){return t=ui(t,e),this.Go(t,so)}Qo(){return this._o}t_(t){this.so={ro:t,eo:!1}}Rn(){this._o.forEach(t=>t.Rn())}Sa(){this.co=null;const t=this.Jo();let e=100;t!==null&&(e=Math.round(1/t.ua())),this.da=no,this.fh()?(this.da=so,e=100):this.Co()?(this.da=new qs(100,1),e=100):t!==null&&(this.da=t.ca()),this.wo=new eo(this,e,this.Mo.bind(this),this.xo.bind(this)),this.wo.Xa()}Wo(){this.uo=null}Jo(){return this._o[0]||null}Vo(){return this.To()?this._n.scaleMargins.bottom*this.Bt()+this.lo:this._n.scaleMargins.top*this.Bt()+this.ho}Bo(){return this.To()?this._n.scaleMargins.top*this.Bt()+this.ho:this._n.scaleMargins.bottom*this.Bt()+this.lo}Io(){this.so.eo||(this.so.eo=!0,this.i_())}ko(){this.io=null}xo(t,e){if(this.Io(),this.Ei())return 0;t=this.Ja()&&t?Rs(t,this.vo):t;const s=R(this.Oh()),n=this.Bo()+(this.Ao()-1)*(t-s.xh())/s.kh();return this.zo(n)}Mo(t,e){if(this.Io(),this.Ei())return 0;const s=this.zo(t),n=R(this.Oh()),r=n.xh()+n.kh()*((s-this.Bo())/(this.Ao()-1));return this.Ja()?Ni(r,this.vo):r}Ro(){this.co=null,this.wo.Xa()}i_(){const t=this.so.ro;if(t===null)return;let e=null;const s=this.Qo();let n=0,r=0;for(const a of s){if(!a.yt())continue;const h=a.Ct();if(h===null)continue;const u=a.Rl(t.Rs(),t.ui());let c=u&&u.Oh();if(c!==null){switch(this._n.mode){case 1:c=Mi(c,this.vo);break;case 2:c=$d(c,h.Ot);break;case 3:c=Nd(c,h.Ot)}if(e=e===null?c:e.Jn(R(c)),u!==null){const f=u.Ah();f!==null&&(n=Math.max(n,f.above),r=Math.max(n,f.below))}}}if(n===this.ho&&r===this.lo||(this.ho=n,this.lo=r,this.co=null,this.ko()),e!==null){if(e.xh()===e.Sh()){const a=this.Jo(),h=5*(a===null||this.fh()||this.Co()?1:a.ua());this.Ja()&&(e=cs(e,this.vo)),e=new Bt(e.xh()-h,e.Sh()+h),this.Ja()&&(e=Mi(e,this.vo))}if(this.Ja()){const a=cs(e,this.vo),h=Mn(a);if(l=h,o=this.vo,l.Ea!==o.Ea||l.Na!==o.Na){const u=this.no!==null?cs(this.no,this.vo):null;this.vo=h,e=Mi(a,h),u!==null&&(this.no=Mi(u,h))}}this.Po(e)}else this.Rh===null&&(this.Po(new Bt(-.5,.5)),this.vo=Mn(null));var l,o;this.so.eo=!0}Lo(){return this.fh()?ui:this.Co()?$i:this.Ja()?t=>Rs(t,this.vo):null}n_(t,e,s){return e===void 0?(s===void 0&&(s=this.ca()),s.format(t)):e(t)}Ih(t,e){return this.n_(t,this.bo.priceFormatter,e)}Go(t,e){return this.n_(t,this.bo.percentageFormatter,e)}}class Dd{constructor(t,e){this._o=[],this.s_=new Map,this.Qa=0,this.e_=0,this.r_=1e3,this.uo=null,this.h_=new yt,this.wl=t,this.Hi=e,this.l_=new Pd(this);const s=e.W();this.a_=this.o_("left",s.leftPriceScale),this.__=this.o_("right",s.rightPriceScale),this.a_.Do().l(this.u_.bind(this,this.a_),this),this.__.Do().l(this.u_.bind(this,this.__),this),this.c_(s)}c_(t){if(t.leftPriceScale&&this.a_.Eh(t.leftPriceScale),t.rightPriceScale&&this.__.Eh(t.rightPriceScale),t.localization&&(this.a_.Sa(),this.__.Sa()),t.overlayPriceScales){const e=Array.from(this.s_.values());for(const s of e){const n=R(s[0].Dt());n.Eh(t.overlayPriceScales),t.localization&&n.Sa()}}}d_(t){switch(t){case"left":return this.a_;case"right":return this.__}return this.s_.has(t)?At(this.s_.get(t))[0].Dt():null}S(){this.$t().f_().p(this),this.a_.Do().p(this),this.__.Do().p(this),this._o.forEach(t=>{t.S&&t.S()}),this.h_.m()}v_(){return this.r_}p_(t){this.r_=t}$t(){return this.Hi}ji(){return this.e_}Bt(){return this.Qa}m_(t){this.e_=t,this.b_()}Oo(t){this.Qa=t,this.a_.Oo(t),this.__.Oo(t),this._o.forEach(e=>{if(this.ur(e)){const s=e.Dt();s!==null&&s.Oo(t)}}),this.b_()}Ta(){return this._o}ur(t){const e=t.Dt();return e===null||this.a_!==e&&this.__!==e}Fo(t,e,s){const n=s!==void 0?s:this.g_().w_+1;this.M_(t,e,n)}jo(t){const e=this._o.indexOf(t);$e(e!==-1,"removeDataSource: invalid data source"),this._o.splice(e,1);const s=R(t.Dt()).xa();if(this.s_.has(s)){const r=At(this.s_.get(s)),l=r.indexOf(t);l!==-1&&(r.splice(l,1),r.length===0&&this.s_.delete(s))}const n=t.Dt();n&&n.Ta().indexOf(t)>=0&&n.jo(t),n!==null&&(n.Wo(),this.x_(n)),this.uo=null}dr(t){return t===this.a_?"left":t===this.__?"right":"overlay"}S_(){return this.a_}k_(){return this.__}y_(t,e){t.Uo(e)}C_(t,e){t.qo(e),this.b_()}T_(t){t.Yo()}P_(t,e){t.Xo(e)}R_(t,e){t.Ko(e),this.b_()}D_(t){t.Zo()}b_(){this._o.forEach(t=>{t.Rn()})}dn(){let t=null;return this.Hi.W().rightPriceScale.visible&&this.__.Ta().length!==0?t=this.__:this.Hi.W().leftPriceScale.visible&&this.a_.Ta().length!==0?t=this.a_:this._o.length!==0&&(t=this._o[0].Dt()),t===null&&(t=this.__),t}cr(){let t=null;return this.Hi.W().rightPriceScale.visible?t=this.__:this.Hi.W().leftPriceScale.visible&&(t=this.a_),t}x_(t){t!==null&&t.yo()&&this.O_(t)}A_(t){const e=this.wl.qs();t.So({Nn:!0}),e!==null&&t.t_(e),this.b_()}V_(){this.O_(this.a_),this.O_(this.__)}B_(){this.x_(this.a_),this.x_(this.__),this._o.forEach(t=>{this.ur(t)&&this.x_(t.Dt())}),this.b_(),this.Hi.Nh()}No(){return this.uo===null&&(this.uo=lh(this._o)),this.uo}I_(){return this.h_}z_(){return this.l_}O_(t){const e=t.Qo();if(e&&e.length>0&&!this.wl.Ei()){const s=this.wl.qs();s!==null&&t.t_(s)}t.Rn()}g_(){const t=this.No();if(t.length===0)return{L_:0,w_:0};let e=0,s=0;for(let n=0;n<t.length;n++){const r=t[n].Xi();r!==null&&(r<e&&(e=r),r>s&&(s=r))}return{L_:e,w_:s}}M_(t,e,s){let n=this.d_(e);if(n===null&&(n=this.o_(e,this.Hi.W().overlayPriceScales)),this._o.push(t),!Ks(e)){const r=this.s_.get(e)||[];r.push(t),this.s_.set(e,r)}n.Fo(t),t.Zi(n),t.Ki(s),this.x_(n),this.uo=null}u_(t,e,s){e.Sr!==s.Sr&&this.O_(t)}o_(t,e){const s=Object.assign({visible:!0,autoScale:!0},me(e)),n=new Ad(t,s,this.Hi.W().layout,this.Hi.W().localization);return n.Oo(this.Bt()),n}}class Fd{constructor(t,e,s=50){this.Ye=0,this.Xe=1,this.Ke=1,this.Ge=new Map,this.Ze=new Map,this.E_=t,this.N_=e,this.Je=s}F_(t){const e=t.time,s=this.N_.cacheKey(e),n=this.Ge.get(s);if(n!==void 0)return n.W_;if(this.Ye===this.Je){const l=this.Ze.get(this.Ke);this.Ze.delete(this.Ke),this.Ge.delete(At(l)),this.Ke++,this.Ye--}const r=this.E_(t);return this.Ge.set(s,{W_:r,nr:this.Xe}),this.Ze.set(this.Xe,s),this.Ye++,this.Xe++,r}}class Ai{constructor(t,e){$e(t<=e,"right should be >= left"),this.j_=t,this.H_=e}Rs(){return this.j_}ui(){return this.H_}U_(){return this.H_-this.j_+1}Yr(t){return this.j_<=t&&t<=this.H_}gh(t){return this.j_===t.Rs()&&this.H_===t.ui()}}function ro(i,t){return i===null||t===null?i===t:i.gh(t)}class Bd{constructor(){this.q_=new Map,this.Ge=null,this.Y_=!1}X_(t){this.Y_=t,this.Ge=null}K_(t,e){this.Z_(e),this.Ge=null;for(let s=e;s<t.length;++s){const n=t[s];let r=this.q_.get(n.timeWeight);r===void 0&&(r=[],this.q_.set(n.timeWeight,r)),r.push({index:s,time:n.time,weight:n.timeWeight,originalTime:n.originalTime})}}G_(t,e){const s=Math.ceil(e/t);return this.Ge!==null&&this.Ge.J_===s||(this.Ge={La:this.Q_(s),J_:s}),this.Ge.La}Z_(t){if(t===0)return void this.q_.clear();const e=[];this.q_.forEach((s,n)=>{t<=s[0].index?e.push(n):s.splice(Xi(s,t,r=>r.index<t),1/0)});for(const s of e)this.q_.delete(s)}Q_(t){let e=[];for(const s of Array.from(this.q_.keys()).sort((n,r)=>r-n)){if(!this.q_.get(s))continue;const n=e;e=[];const r=n.length;let l=0;const o=At(this.q_.get(s)),a=o.length;let h=1/0,u=-1/0;for(let c=0;c<a;c++){const f=o[c],d=f.index;for(;l<r;){const m=n[l],p=m.index;if(!(p<d)){h=p;break}l++,e.push(m),u=p,h=1/0}if(h-d>=t&&d-u>=t)e.push(f),u=d;else if(this.Y_)return n}for(;l<r;l++)e.push(n[l])}return e}}class vi{constructor(t){this.tu=t}iu(){return this.tu===null?null:new Ai(Math.floor(this.tu.Rs()),Math.ceil(this.tu.ui()))}nu(){return this.tu}static su(){return new vi(null)}}function Vd(i,t){return i.weight>t.weight?i:t}class jd{constructor(t,e,s,n){this.e_=0,this.eu=null,this.ru=[],this.fo=null,this.do=null,this.hu=new Bd,this.lu=new Map,this.au=vi.su(),this.ou=!0,this._u=new yt,this.uu=new yt,this.cu=new yt,this.du=null,this.fu=null,this.vu=[],this._n=e,this.bo=s,this.pu=e.rightOffset,this.mu=e.barSpacing,this.Hi=t,this.N_=n,this.bu(),this.hu.X_(e.uniformDistribution)}W(){return this._n}wu(t){se(this.bo,t),this.gu(),this.bu()}Eh(t,e){var s;se(this._n,t),this._n.fixLeftEdge&&this.Mu(),this._n.fixRightEdge&&this.xu(),t.barSpacing!==void 0&&this.Hi.Kn(t.barSpacing),t.rightOffset!==void 0&&this.Hi.Zn(t.rightOffset),t.minBarSpacing!==void 0&&this.Hi.Kn((s=t.barSpacing)!==null&&s!==void 0?s:this.mu),this.gu(),this.bu(),this.cu.m()}vn(t){var e,s;return(s=(e=this.ru[t])===null||e===void 0?void 0:e.time)!==null&&s!==void 0?s:null}$i(t){var e;return(e=this.ru[t])!==null&&e!==void 0?e:null}ya(t,e){if(this.ru.length<1)return null;if(this.N_.key(t)>this.N_.key(this.ru[this.ru.length-1].time))return e?this.ru.length-1:null;const s=Xi(this.ru,this.N_.key(t),(n,r)=>this.N_.key(n.time)<r);return this.N_.key(t)<this.N_.key(this.ru[s].time)?e?s:null:s}Ei(){return this.e_===0||this.ru.length===0||this.eu===null}ka(){return this.ru.length>0}qs(){return this.Su(),this.au.iu()}ku(){return this.Su(),this.au.nu()}yu(){const t=this.qs();if(t===null)return null;const e={from:t.Rs(),to:t.ui()};return this.Cu(e)}Cu(t){const e=Math.round(t.from),s=Math.round(t.to),n=R(this.Tu()),r=R(this.Pu());return{from:R(this.$i(Math.max(n,e))),to:R(this.$i(Math.min(r,s)))}}Ru(t){return{from:R(this.ya(t.from,!0)),to:R(this.ya(t.to,!0))}}ji(){return this.e_}m_(t){if(!isFinite(t)||t<=0||this.e_===t)return;const e=this.ku(),s=this.e_;if(this.e_=t,this.ou=!0,this._n.lockVisibleTimeRangeOnResize&&s!==0){const n=this.mu*t/s;this.mu=n}if(this._n.fixLeftEdge&&e!==null&&e.Rs()<=0){const n=s-t;this.pu-=Math.round(n/this.mu)+1,this.ou=!0}this.Du(),this.Ou()}It(t){if(this.Ei()||!Wi(t))return 0;const e=this.Au()+this.pu-t;return this.e_-(e+.5)*this.mu-1}Zs(t,e){const s=this.Au(),n=e===void 0?0:e.from,r=e===void 0?t.length:e.to;for(let l=n;l<r;l++){const o=t[l].ot,a=s+this.pu-o,h=this.e_-(a+.5)*this.mu-1;t[l].nt=h}}Vu(t){return Math.ceil(this.Bu(t))}Zn(t){this.ou=!0,this.pu=t,this.Ou(),this.Hi.Iu(),this.Hi.Nh()}ee(){return this.mu}Kn(t){this.zu(t),this.Ou(),this.Hi.Iu(),this.Hi.Nh()}Lu(){return this.pu}La(){if(this.Ei())return null;if(this.fu!==null)return this.fu;const t=this.mu,e=5*(this.Hi.W().layout.fontSize+4)/8*(this._n.tickMarkMaxCharacterLength||8),s=Math.round(e/t),n=R(this.qs()),r=Math.max(n.Rs(),n.Rs()-s),l=Math.max(n.ui(),n.ui()-s),o=this.hu.G_(t,e),a=this.Tu()+s,h=this.Pu()-s,u=this.Eu(),c=this._n.fixLeftEdge||u,f=this._n.fixRightEdge||u;let d=0;for(const m of o){if(!(r<=m.index&&m.index<=l))continue;let p;d<this.vu.length?(p=this.vu[d],p.coord=this.It(m.index),p.label=this.Nu(m),p.weight=m.weight):(p={needAlignCoordinate:!1,coord:this.It(m.index),label:this.Nu(m),weight:m.weight},this.vu.push(p)),this.mu>e/2&&!u?p.needAlignCoordinate=!1:p.needAlignCoordinate=c&&m.index<=a||f&&m.index>=h,d++}return this.vu.length=d,this.fu=this.vu,this.vu}Fu(){this.ou=!0,this.Kn(this._n.barSpacing),this.Zn(this._n.rightOffset)}Wu(t){this.ou=!0,this.eu=t,this.Ou(),this.Mu()}ju(t,e){const s=this.Bu(t),n=this.ee(),r=n+e*(n/10);this.Kn(r),this._n.rightBarStaysOnScroll||this.Zn(this.Lu()+(s-this.Bu(t)))}Uo(t){this.fo&&this.Zo(),this.do===null&&this.du===null&&(this.Ei()||(this.do=t,this.Hu()))}qo(t){if(this.du===null)return;const e=tr(this.e_-t,0,this.e_),s=tr(this.e_-R(this.do),0,this.e_);e!==0&&s!==0&&this.Kn(this.du.ee*e/s)}Yo(){this.do!==null&&(this.do=null,this.$u())}Xo(t){this.fo===null&&this.du===null&&(this.Ei()||(this.fo=t,this.Hu()))}Ko(t){if(this.fo===null)return;const e=(this.fo-t)/this.ee();this.pu=R(this.du).Lu+e,this.ou=!0,this.Ou()}Zo(){this.fo!==null&&(this.fo=null,this.$u())}Uu(){this.qu(this._n.rightOffset)}qu(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.pu,n=performance.now();this.Hi.qn({Yu:r=>(r-n)/e>=1,Xu:r=>{const l=(r-n)/e;return l>=1?t:s+(t-s)*l}})}bt(t,e){this.ou=!0,this.ru=t,this.hu.K_(t,e),this.Ou()}Ku(){return this._u}Zu(){return this.uu}Gu(){return this.cu}Au(){return this.eu||0}Ju(t){const e=t.U_();this.zu(this.e_/e),this.pu=t.ui()-this.Au(),this.Ou(),this.ou=!0,this.Hi.Iu(),this.Hi.Nh()}Qu(){const t=this.Tu(),e=this.Pu();t!==null&&e!==null&&this.Ju(new Ai(t,e+this._n.rightOffset))}tc(t){const e=new Ai(t.from,t.to);this.Ju(e)}Ui(t){return this.bo.timeFormatter!==void 0?this.bo.timeFormatter(t.originalTime):this.N_.formatHorzItem(t.time)}Eu(){const{handleScroll:t,handleScale:e}=this.Hi.W();return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}Tu(){return this.ru.length===0?null:0}Pu(){return this.ru.length===0?null:this.ru.length-1}ic(t){return(this.e_-1-t)/this.mu}Bu(t){const e=this.ic(t),s=this.Au()+this.pu-e;return Math.round(1e6*s)/1e6}zu(t){const e=this.mu;this.mu=t,this.Du(),e!==this.mu&&(this.ou=!0,this.nc())}Su(){if(!this.ou)return;if(this.ou=!1,this.Ei())return void this.sc(vi.su());const t=this.Au(),e=this.e_/this.mu,s=this.pu+t,n=new Ai(s-e+1,s);this.sc(new vi(n))}Du(){const t=this.ec();if(this.mu<t&&(this.mu=t,this.ou=!0),this.e_!==0){const e=.5*this.e_;this.mu>e&&(this.mu=e,this.ou=!0)}}ec(){return this._n.fixLeftEdge&&this._n.fixRightEdge&&this.ru.length!==0?this.e_/this.ru.length:this._n.minBarSpacing}Ou(){const t=this.rc();this.pu>t&&(this.pu=t,this.ou=!0);const e=this.hc();e!==null&&this.pu<e&&(this.pu=e,this.ou=!0)}hc(){const t=this.Tu(),e=this.eu;return t===null||e===null?null:t-e-1+(this._n.fixLeftEdge?this.e_/this.mu:Math.min(2,this.ru.length))}rc(){return this._n.fixRightEdge?0:this.e_/this.mu-Math.min(2,this.ru.length)}Hu(){this.du={ee:this.ee(),Lu:this.Lu()}}$u(){this.du=null}Nu(t){let e=this.lu.get(t.weight);return e===void 0&&(e=new Fd(s=>this.lc(s),this.N_),this.lu.set(t.weight,e)),e.F_(t)}lc(t){return this.N_.formatTickmark(t,this.bo)}sc(t){const e=this.au;this.au=t,ro(e.iu(),this.au.iu())||this._u.m(),ro(e.nu(),this.au.nu())||this.uu.m(),this.nc()}nc(){this.fu=null}gu(){this.nc(),this.lu.clear()}bu(){this.N_.updateFormatter(this.bo)}Mu(){if(!this._n.fixLeftEdge)return;const t=this.Tu();if(t===null)return;const e=this.qs();if(e===null)return;const s=e.Rs()-t;if(s<0){const n=this.pu-s-1;this.Zn(n)}this.Du()}xu(){this.Ou(),this.Du()}}class Wd{K(t,e,s){t.useMediaCoordinateSpace(n=>this.Z(n,e,s))}fl(t,e,s){t.useMediaCoordinateSpace(n=>this.ac(n,e,s))}ac(t,e,s){}}class Hd extends Wd{constructor(t){super(),this.oc=new Map,this.zt=t}Z(t){}ac(t){if(!this.zt.yt)return;const{context:e,mediaSize:s}=t;let n=0;for(const l of this.zt._c){if(l.Zt.length===0)continue;e.font=l.R;const o=this.uc(e,l.Zt);o>s.width?l.ju=s.width/o:l.ju=1,n+=l.cc*l.ju}let r=0;switch(this.zt.dc){case"top":r=0;break;case"center":r=Math.max((s.height-n)/2,0);break;case"bottom":r=Math.max(s.height-n,0)}e.fillStyle=this.zt.O;for(const l of this.zt._c){e.save();let o=0;switch(this.zt.fc){case"left":e.textAlign="left",o=l.cc/2;break;case"center":e.textAlign="center",o=s.width/2;break;case"right":e.textAlign="right",o=s.width-1-l.cc/2}e.translate(o,r),e.textBaseline="top",e.font=l.R,e.scale(l.ju,l.ju),e.fillText(l.Zt,0,l.vc),e.restore(),r+=l.cc*l.ju}}uc(t,e){const s=this.mc(t.font);let n=s.get(e);return n===void 0&&(n=t.measureText(e).width,s.set(e,n)),n}mc(t){let e=this.oc.get(t);return e===void 0&&(e=new Map,this.oc.set(t,e)),e}}class Ud{constructor(t){this.ft=!0,this.Ft={yt:!1,O:"",_c:[],dc:"center",fc:"center"},this.Wt=new Hd(this.Ft),this.jt=t}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const t=this.jt.W(),e=this.Ft;e.yt=t.visible,e.yt&&(e.O=t.color,e.fc=t.horzAlign,e.dc=t.vertAlign,e._c=[{Zt:t.text,R:bi(t.fontSize,t.fontFamily,t.fontStyle),cc:1.2*t.fontSize,vc:0,ju:0}])}}class Kd extends Lr{constructor(t,e){super(),this._n=e,this.mn=new Ud(this)}Tn(){return[]}Cn(){return[this.mn]}W(){return this._n}Rn(){this.mn.bt()}}var lo,oo,ao,ho,uo;(function(i){i[i.OnTouchEnd=0]="OnTouchEnd",i[i.OnNextTap=1]="OnNextTap"})(lo||(lo={}));class qd{constructor(t,e,s){this.bc=[],this.wc=[],this.e_=0,this.gc=null,this.Mc=new yt,this.xc=new yt,this.Sc=null,this.kc=t,this._n=e,this.N_=s,this.yc=new Mf(this),this.wl=new jd(this,e.timeScale,this._n.localization,s),this.vt=new Nf(this,e.crosshair),this.Cc=new Rd(e.crosshair),this.Tc=new Kd(this,e.watermark),this.Pc(),this.bc[0].p_(2e3),this.Rc=this.Dc(0),this.Oc=this.Dc(1)}$l(){this.Ac(Mt.ns())}Nh(){this.Ac(Mt.ts())}sa(){this.Ac(new Mt(1))}Ul(t){const e=this.Vc(t);this.Ac(e)}Bc(){return this.gc}Ic(t){const e=this.gc;this.gc=t,e!==null&&this.Ul(e.zc),t!==null&&this.Ul(t.zc)}W(){return this._n}Eh(t){se(this._n,t),this.bc.forEach(e=>e.c_(t)),t.timeScale!==void 0&&this.wl.Eh(t.timeScale),t.localization!==void 0&&this.wl.wu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Mc.m(),this.Rc=this.Dc(0),this.Oc=this.Dc(1),this.$l()}Lc(t,e){if(t==="left")return void this.Eh({leftPriceScale:e});if(t==="right")return void this.Eh({rightPriceScale:e});const s=this.Ec(t);s!==null&&(s.Dt.Eh(e),this.Mc.m())}Ec(t){for(const e of this.bc){const s=e.d_(t);if(s!==null)return{Ht:e,Dt:s}}return null}St(){return this.wl}Nc(){return this.bc}Fc(){return this.Tc}Wc(){return this.vt}jc(){return this.xc}Hc(t,e){t.Oo(e),this.Iu()}m_(t){this.e_=t,this.wl.m_(this.e_),this.bc.forEach(e=>e.m_(t)),this.Iu()}Pc(t){const e=new Dd(this.wl,this);t!==void 0?this.bc.splice(t,0,e):this.bc.push(e);const s=t===void 0?this.bc.length-1:t,n=Mt.ns();return n.Ln(s,{En:0,Nn:!0}),this.Ac(n),e}y_(t,e,s){t.y_(e,s)}C_(t,e,s){t.C_(e,s),this.ql(),this.Ac(this.$c(t,2))}T_(t,e){t.T_(e),this.Ac(this.$c(t,2))}P_(t,e,s){e.yo()||t.P_(e,s)}R_(t,e,s){e.yo()||(t.R_(e,s),this.ql(),this.Ac(this.$c(t,2)))}D_(t,e){e.yo()||(t.D_(e),this.Ac(this.$c(t,2)))}A_(t,e){t.A_(e),this.Ac(this.$c(t,2))}Uc(t){this.wl.Uo(t)}qc(t,e){const s=this.St();if(s.Ei()||e===0)return;const n=s.ji();t=Math.max(1,Math.min(t,n)),s.ju(t,e),this.Iu()}Yc(t){this.Xc(0),this.Kc(t),this.Zc()}Gc(t){this.wl.qo(t),this.Iu()}Jc(){this.wl.Yo(),this.Nh()}Xc(t){this.wl.Xo(t)}Kc(t){this.wl.Ko(t),this.Iu()}Zc(){this.wl.Zo(),this.Nh()}wt(){return this.wc}Qc(t,e,s,n,r){this.vt.bn(t,e);let l=NaN,o=this.wl.Vu(t);const a=this.wl.qs();a!==null&&(o=Math.min(Math.max(a.Rs(),o),a.ui()));const h=n.dn(),u=h.Ct();u!==null&&(l=h.fn(e,u)),l=this.Cc.Ca(l,o,n),this.vt.xn(o,l,n),this.sa(),r||this.xc.m(this.vt.xt(),{x:t,y:e},s)}td(t,e,s){const n=s.dn(),r=n.Ct(),l=n.Rt(t,R(r)),o=this.wl.ya(e,!0),a=this.wl.It(R(o));this.Qc(a,l,null,s,!0)}nd(t){this.Wc().kn(),this.sa(),t||this.xc.m(null,null,null)}ql(){const t=this.vt.Ht();if(t!==null){const e=this.vt.gn(),s=this.vt.Mn();this.Qc(e,s,null,t)}this.vt.Rn()}sd(t,e,s){const n=this.wl.vn(0);e!==void 0&&s!==void 0&&this.wl.bt(e,s);const r=this.wl.vn(0),l=this.wl.Au(),o=this.wl.qs();if(o!==null&&n!==null&&r!==null){const a=o.Yr(l),h=this.N_.key(n)>this.N_.key(r),u=t!==null&&t>l&&!h,c=this.wl.W().allowShiftVisibleRangeOnWhitespaceReplacement,f=a&&(s!==void 0||c)&&this.wl.W().shiftVisibleRangeOnNewBar;if(u&&!f){const d=t-l;this.wl.Zn(this.wl.Lu()-d)}}this.wl.Wu(t)}Kl(t){t!==null&&t.B_()}_r(t){const e=this.bc.find(s=>s.No().includes(t));return e===void 0?null:e}Iu(){this.Tc.Rn(),this.bc.forEach(t=>t.B_()),this.ql()}S(){this.bc.forEach(t=>t.S()),this.bc.length=0,this._n.localization.priceFormatter=void 0,this._n.localization.percentageFormatter=void 0,this._n.localization.timeFormatter=void 0}ed(){return this.yc}vr(){return this.yc.W()}f_(){return this.Mc}rd(t,e,s){const n=this.bc[0],r=this.hd(e,t,n,s);return this.wc.push(r),this.wc.length===1?this.$l():this.Nh(),r}ld(t){const e=this._r(t),s=this.wc.indexOf(t);$e(s!==-1,"Series not found"),this.wc.splice(s,1),R(e).jo(t),t.S&&t.S()}Hl(t,e){const s=R(this._r(t));s.jo(t);const n=this.Ec(e);if(n===null){const r=t.Xi();s.Fo(t,e,r)}else{const r=n.Ht===s?t.Xi():void 0;n.Ht.Fo(t,e,r)}}Qu(){const t=Mt.ts();t.jn(),this.Ac(t)}ad(t){const e=Mt.ts();e.Un(t),this.Ac(e)}Xn(){const t=Mt.ts();t.Xn(),this.Ac(t)}Kn(t){const e=Mt.ts();e.Kn(t),this.Ac(e)}Zn(t){const e=Mt.ts();e.Zn(t),this.Ac(e)}qn(t){const e=Mt.ts();e.qn(t),this.Ac(e)}Hn(){const t=Mt.ts();t.Hn(),this.Ac(t)}od(){return this._n.rightPriceScale.visible?"right":"left"}_d(){return this.Oc}q(){return this.Rc}Vt(t){const e=this.Oc,s=this.Rc;if(e===s)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.Sc===null||this.Sc.ys!==s||this.Sc.Cs!==e)this.Sc={ys:s,Cs:e,ud:new Map};else{const r=this.Sc.ud.get(t);if(r!==void 0)return r}const n=function(r,l,o){const[a,h,u,c]=zs(r),[f,d,m,p]=zs(l),x=[Yt(a+o*(f-a)),Yt(h+o*(d-h)),Yt(u+o*(m-u)),Wa(c+o*(p-c))];return`rgba(${x[0]}, ${x[1]}, ${x[2]}, ${x[3]})`}(s,e,t/100);return this.Sc.ud.set(t,n),n}$c(t,e){const s=new Mt(e);if(t!==null){const n=this.bc.indexOf(t);s.Ln(n,{En:e})}return s}Vc(t,e){return e===void 0&&(e=2),this.$c(this._r(t),e)}Ac(t){this.kc&&this.kc(t),this.bc.forEach(e=>e.z_().Fh().bt())}hd(t,e,s,n){const r=new Nr(this,t,e,s,n),l=t.priceScaleId!==void 0?t.priceScaleId:this.od();return s.Fo(r,l),Ks(l)||r.Eh(t),r}Dc(t){const e=this._n.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}}function er(i){return!ue(i)&&!Qi(i)}function oh(i){return ue(i)}(function(i){i[i.Disabled=0]="Disabled",i[i.Continuous=1]="Continuous",i[i.OnDataUpdate=2]="OnDataUpdate"})(oo||(oo={})),function(i){i[i.LastBar=0]="LastBar",i[i.LastVisible=1]="LastVisible"}(ao||(ao={})),function(i){i.Solid="solid",i.VerticalGradient="gradient"}(ho||(ho={})),function(i){i[i.Year=0]="Year",i[i.Month=1]="Month",i[i.DayOfMonth=2]="DayOfMonth",i[i.Time=3]="Time",i[i.TimeWithSeconds=4]="TimeWithSeconds"}(uo||(uo={}));const co=i=>i.getUTCFullYear();function Zd(i,t,e){return t.replace(/yyyy/g,(s=>ge(co(s),4))(i)).replace(/yy/g,(s=>ge(co(s)%100,2))(i)).replace(/MMMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(i,e)).replace(/MMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(i,e)).replace(/MM/g,(s=>ge((n=>n.getUTCMonth()+1)(s),2))(i)).replace(/dd/g,(s=>ge((n=>n.getUTCDate())(s),2))(i))}class ah{constructor(t="yyyy-MM-dd",e="default"){this.dd=t,this.fd=e}F_(t){return Zd(t,this.dd,this.fd)}}class Yd{constructor(t){this.vd=t||"%h:%m:%s"}F_(t){return this.vd.replace("%h",ge(t.getUTCHours(),2)).replace("%m",ge(t.getUTCMinutes(),2)).replace("%s",ge(t.getUTCSeconds(),2))}}const Qd={pd:"yyyy-MM-dd",md:"%h:%m:%s",bd:" ",wd:"default"};class Xd{constructor(t={}){const e=Object.assign(Object.assign({},Qd),t);this.gd=new ah(e.pd,e.wd),this.Md=new Yd(e.md),this.xd=e.bd}F_(t){return`${this.gd.F_(t)}${this.xd}${this.Md.F_(t)}`}}function fs(i){return 60*i*60*1e3}function En(i){return 60*i*1e3}const ds=[{Sd:(fo=1,1e3*fo),kd:10},{Sd:En(1),kd:20},{Sd:En(5),kd:21},{Sd:En(30),kd:22},{Sd:fs(1),kd:30},{Sd:fs(3),kd:31},{Sd:fs(6),kd:32},{Sd:fs(12),kd:33}];var fo;function po(i,t){if(i.getUTCFullYear()!==t.getUTCFullYear())return 70;if(i.getUTCMonth()!==t.getUTCMonth())return 60;if(i.getUTCDate()!==t.getUTCDate())return 50;for(let e=ds.length-1;e>=0;--e)if(Math.floor(t.getTime()/ds[e].Sd)!==Math.floor(i.getTime()/ds[e].Sd))return ds[e].kd;return 0}function Tn(i){let t=i;if(Qi(i)&&(t=Ar(i)),!er(t))throw new Error("time must be of type BusinessDay");const e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{yd:Math.round(e.getTime()/1e3),Cd:t}}function vo(i){if(!oh(i))throw new Error("time must be of type isUTCTimestamp");return{yd:i}}function Ar(i){const t=new Date(i);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${i}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function mo(i){Qi(i.time)&&(i.time=Ar(i.time))}class go{options(){return this._n}setOptions(t){this._n=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?function(e){e.forEach(mo)}(t):mo(t)}createConverterToInternalObj(t){return R(function(e){return e.length===0?null:er(e[0].time)||Qi(e[0].time)?Tn:vo}(t))}key(t){return typeof t=="object"&&"yd"in t?t.yd:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return e.Cd===void 0?new Date(1e3*e.yd).getTime():new Date(Date.UTC(e.Cd.year,e.Cd.month-1,e.Cd.day)).getTime()}convertHorzItemToInternal(t){return oh(e=t)?vo(e):er(e)?Tn(e):Tn(Ar(e));var e}updateFormatter(t){if(!this._n)return;const e=t.dateFormat;this._n.timeScale.timeVisible?this.Td=new Xd({pd:e,md:this._n.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",bd:"   ",wd:t.locale}):this.Td=new ah(e,t.locale)}formatHorzItem(t){const e=t;return this.Td.F_(new Date(1e3*e.yd))}formatTickmark(t,e){const s=function(r,l,o){switch(r){case 0:case 10:return l?o?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return l?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this._n.timeScale.timeVisible,this._n.timeScale.secondsVisible),n=this._n.timeScale;if(n.tickMarkFormatter!==void 0){const r=n.tickMarkFormatter(t.originalTime,s,e.locale);if(r!==null)return r}return function(r,l,o){const a={};switch(l){case 0:a.year="numeric";break;case 1:a.month="short";break;case 2:a.day="numeric";break;case 3:a.hour12=!1,a.hour="2-digit",a.minute="2-digit";break;case 4:a.hour12=!1,a.hour="2-digit",a.minute="2-digit",a.second="2-digit"}const h=r.Cd===void 0?new Date(1e3*r.yd):new Date(Date.UTC(r.Cd.year,r.Cd.month-1,r.Cd.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(o,a)}(t.time,s,e.locale)}maxTickMarkWeight(t){let e=t.reduce(Vd,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){(function(s,n=0){if(s.length===0)return;let r=n===0?null:s[n-1].time.yd,l=r!==null?new Date(1e3*r):null,o=0;for(let a=n;a<s.length;++a){const h=s[a],u=new Date(1e3*h.time.yd);l!==null&&(h.timeWeight=po(u,l)),o+=h.time.yd-(r||h.time.yd),r=h.time.yd,l=u}if(n===0&&s.length>1){const a=Math.ceil(o/(s.length-1)),h=new Date(1e3*(s[0].time.yd-a));s[0].timeWeight=po(new Date(1e3*s[0].time.yd),h)}})(t,e)}static Pd(t){return se({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}const yi=typeof window<"u";function bo(){return!!yi&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function zn(){return!!yi&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function ir(i){return i+i%2}function In(i,t){return i.Rd-t.Rd}function Rn(i,t,e){const s=(i.Rd-t.Rd)/(i.ot-t.ot);return Math.sign(s)*Math.min(Math.abs(s),e)}class Gd{constructor(t,e,s,n){this.Dd=null,this.Od=null,this.Ad=null,this.Vd=null,this.Bd=null,this.Id=0,this.zd=0,this.Ld=t,this.Ed=e,this.Nd=s,this.ss=n}Fd(t,e){if(this.Dd!==null){if(this.Dd.ot===e)return void(this.Dd.Rd=t);if(Math.abs(this.Dd.Rd-t)<this.ss)return}this.Vd=this.Ad,this.Ad=this.Od,this.Od=this.Dd,this.Dd={ot:e,Rd:t}}Pr(t,e){if(this.Dd===null||this.Od===null||e-this.Dd.ot>50)return;let s=0;const n=Rn(this.Dd,this.Od,this.Ed),r=In(this.Dd,this.Od),l=[n],o=[r];if(s+=r,this.Ad!==null){const h=Rn(this.Od,this.Ad,this.Ed);if(Math.sign(h)===Math.sign(n)){const u=In(this.Od,this.Ad);if(l.push(h),o.push(u),s+=u,this.Vd!==null){const c=Rn(this.Ad,this.Vd,this.Ed);if(Math.sign(c)===Math.sign(n)){const f=In(this.Ad,this.Vd);l.push(c),o.push(f),s+=f}}}}let a=0;for(let h=0;h<l.length;++h)a+=o[h]/s*l[h];Math.abs(a)<this.Ld||(this.Bd={Rd:t,ot:e},this.zd=a,this.Id=function(h,u){const c=Math.log(u);return Math.log(1*c/-h)/c}(Math.abs(a),this.Nd))}Xu(t){const e=R(this.Bd),s=t-e.ot;return e.Rd+this.zd*(Math.pow(this.Nd,s)-1)/Math.log(this.Nd)}Yu(t){return this.Bd===null||this.Wd(t)===this.Id}Wd(t){const e=t-R(this.Bd).ot;return Math.min(e,this.Id)}}function Je(i,t){const e=R(i.ownerDocument).createElement("canvas");i.appendChild(e);const s=uf(e,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(n,r)=>({width:Math.max(n.width,r.width),height:Math.max(n.height,r.height)})});return s.resizeCanvasElement(t),s}function ti(i){var t;i.width=1,i.height=1,(t=i.getContext("2d"))===null||t===void 0||t.clearRect(0,0,1,1)}function sr(i,t,e,s){i.fl&&i.fl(t,e,s)}function xs(i,t,e,s){i.K(t,e,s)}function nr(i,t,e,s){const n=i(e,s);for(const r of n){const l=r.gt();l!==null&&t(l)}}function Jd(i){yi&&window.chrome!==void 0&&i.addEventListener("mousedown",t=>{if(t.button===1)return t.preventDefault(),!1})}class Dr{constructor(t,e,s){this.jd=0,this.Hd=null,this.$d={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.Ud=0,this.qd=null,this.Yd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.Xd=null,this.Kd=!1,this.Zd=null,this.Gd=null,this.Jd=!1,this.Qd=!1,this.tf=!1,this.if=null,this.nf=null,this.sf=null,this.ef=null,this.rf=null,this.hf=null,this.lf=null,this.af=0,this._f=!1,this.uf=!1,this.cf=!1,this.df=0,this.ff=null,this.vf=!zn(),this.pf=n=>{this.mf(n)},this.bf=n=>{if(this.wf(n)){const r=this.gf(n);if(++this.Ud,this.qd&&this.Ud>1){const{Mf:l}=this.xf(oe(n),this.Yd);l<30&&!this.tf&&this.Sf(r,this.yf.kf),this.Cf()}}else{const r=this.gf(n);if(++this.jd,this.Hd&&this.jd>1){const{Mf:l}=this.xf(oe(n),this.$d);l<5&&!this.Qd&&this.Tf(r,this.yf.Pf),this.Rf()}}},this.Df=t,this.yf=e,this._n=s,this.Of()}S(){this.if!==null&&(this.if(),this.if=null),this.nf!==null&&(this.nf(),this.nf=null),this.ef!==null&&(this.ef(),this.ef=null),this.rf!==null&&(this.rf(),this.rf=null),this.hf!==null&&(this.hf(),this.hf=null),this.sf!==null&&(this.sf(),this.sf=null),this.Af(),this.Rf()}Vf(t){this.ef&&this.ef();const e=this.Bf.bind(this);if(this.ef=()=>{this.Df.removeEventListener("mousemove",e)},this.Df.addEventListener("mousemove",e),this.wf(t))return;const s=this.gf(t);this.Tf(s,this.yf.If),this.vf=!0}Rf(){this.Hd!==null&&clearTimeout(this.Hd),this.jd=0,this.Hd=null,this.$d={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Cf(){this.qd!==null&&clearTimeout(this.qd),this.Ud=0,this.qd=null,this.Yd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Bf(t){if(this.cf||this.Gd!==null||this.wf(t))return;const e=this.gf(t);this.Tf(e,this.yf.zf),this.vf=!0}Lf(t){const e=Ln(t.changedTouches,R(this.ff));if(e===null||(this.df=ps(t),this.lf!==null)||this.uf)return;this._f=!0;const s=this.xf(oe(e),R(this.Gd)),{Ef:n,Nf:r,Mf:l}=s;if(this.Jd||!(l<5)){if(!this.Jd){const o=.5*n,a=r>=o&&!this._n.Ff(),h=o>r&&!this._n.Wf();a||h||(this.uf=!0),this.Jd=!0,this.tf=!0,this.Af(),this.Cf()}if(!this.uf){const o=this.gf(t,e);this.Sf(o,this.yf.jf),ri(t)}}}Hf(t){if(t.button!==0)return;const e=this.xf(oe(t),R(this.Zd)),{Mf:s}=e;if(s>=5&&(this.Qd=!0,this.Rf()),this.Qd){const n=this.gf(t);this.Tf(n,this.yf.$f)}}xf(t,e){const s=Math.abs(e.nt-t.nt),n=Math.abs(e.st-t.st);return{Ef:s,Nf:n,Mf:s+n}}Uf(t){let e=Ln(t.changedTouches,R(this.ff));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.ff=null,this.df=ps(t),this.Af(),this.Gd=null,this.hf&&(this.hf(),this.hf=null);const s=this.gf(t,e);if(this.Sf(s,this.yf.qf),++this.Ud,this.qd&&this.Ud>1){const{Mf:n}=this.xf(oe(e),this.Yd);n<30&&!this.tf&&this.Sf(s,this.yf.kf),this.Cf()}else this.tf||(this.Sf(s,this.yf.Yf),this.yf.Yf&&ri(t));this.Ud===0&&ri(t),t.touches.length===0&&this.Kd&&(this.Kd=!1,ri(t))}mf(t){if(t.button!==0)return;const e=this.gf(t);if(this.Zd=null,this.cf=!1,this.rf&&(this.rf(),this.rf=null),bo()&&this.Df.ownerDocument.documentElement.removeEventListener("mouseleave",this.pf),!this.wf(t))if(this.Tf(e,this.yf.Xf),++this.jd,this.Hd&&this.jd>1){const{Mf:s}=this.xf(oe(t),this.$d);s<5&&!this.Qd&&this.Tf(e,this.yf.Pf),this.Rf()}else this.Qd||this.Tf(e,this.yf.Kf)}Af(){this.Xd!==null&&(clearTimeout(this.Xd),this.Xd=null)}Zf(t){if(this.ff!==null)return;const e=t.changedTouches[0];this.ff=e.identifier,this.df=ps(t);const s=this.Df.ownerDocument.documentElement;this.tf=!1,this.Jd=!1,this.uf=!1,this.Gd=oe(e),this.hf&&(this.hf(),this.hf=null);{const r=this.Lf.bind(this),l=this.Uf.bind(this);this.hf=()=>{s.removeEventListener("touchmove",r),s.removeEventListener("touchend",l)},s.addEventListener("touchmove",r,{passive:!1}),s.addEventListener("touchend",l,{passive:!1}),this.Af(),this.Xd=setTimeout(this.Gf.bind(this,t),240)}const n=this.gf(t,e);this.Sf(n,this.yf.Jf),this.qd||(this.Ud=0,this.qd=setTimeout(this.Cf.bind(this),500),this.Yd=oe(e))}Qf(t){if(t.button!==0)return;const e=this.Df.ownerDocument.documentElement;bo()&&e.addEventListener("mouseleave",this.pf),this.Qd=!1,this.Zd=oe(t),this.rf&&(this.rf(),this.rf=null);{const n=this.Hf.bind(this),r=this.mf.bind(this);this.rf=()=>{e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",r)},e.addEventListener("mousemove",n),e.addEventListener("mouseup",r)}if(this.cf=!0,this.wf(t))return;const s=this.gf(t);this.Tf(s,this.yf.tv),this.Hd||(this.jd=0,this.Hd=setTimeout(this.Rf.bind(this),500),this.$d=oe(t))}Of(){this.Df.addEventListener("mouseenter",this.Vf.bind(this)),this.Df.addEventListener("touchcancel",this.Af.bind(this));{const t=this.Df.ownerDocument,e=s=>{this.yf.iv&&(s.composed&&this.Df.contains(s.composedPath()[0])||s.target&&this.Df.contains(s.target)||this.yf.iv())};this.nf=()=>{t.removeEventListener("touchstart",e)},this.if=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}zn()&&(this.sf=()=>{this.Df.removeEventListener("dblclick",this.bf)},this.Df.addEventListener("dblclick",this.bf)),this.Df.addEventListener("mouseleave",this.nv.bind(this)),this.Df.addEventListener("touchstart",this.Zf.bind(this),{passive:!0}),Jd(this.Df),this.Df.addEventListener("mousedown",this.Qf.bind(this)),this.sv(),this.Df.addEventListener("touchmove",()=>{},{passive:!1})}sv(){this.yf.ev===void 0&&this.yf.rv===void 0&&this.yf.hv===void 0||(this.Df.addEventListener("touchstart",t=>this.lv(t.touches),{passive:!0}),this.Df.addEventListener("touchmove",t=>{if(t.touches.length===2&&this.lf!==null&&this.yf.rv!==void 0){const e=yo(t.touches[0],t.touches[1])/this.af;this.yf.rv(this.lf,e),ri(t)}},{passive:!1}),this.Df.addEventListener("touchend",t=>{this.lv(t.touches)}))}lv(t){t.length===1&&(this._f=!1),t.length!==2||this._f||this.Kd?this.av():this.ov(t)}ov(t){const e=this.Df.getBoundingClientRect()||{left:0,top:0};this.lf={nt:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,st:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.af=yo(t[0],t[1]),this.yf.ev!==void 0&&this.yf.ev(),this.Af()}av(){this.lf!==null&&(this.lf=null,this.yf.hv!==void 0&&this.yf.hv())}nv(t){if(this.ef&&this.ef(),this.wf(t)||!this.vf)return;const e=this.gf(t);this.Tf(e,this.yf._v),this.vf=!zn()}Gf(t){const e=Ln(t.touches,R(this.ff));if(e===null)return;const s=this.gf(t,e);this.Sf(s,this.yf.uv),this.tf=!0,this.Kd=!0}wf(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:ps(t)<this.df+500}Sf(t,e){e&&e.call(this.yf,t)}Tf(t,e){e&&e.call(this.yf,t)}gf(t,e){const s=e||t,n=this.Df.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-n.left,localY:s.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,cv:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",dv:t.type,fv:s.target,vv:t.view,pv:()=>{t.type!=="touchstart"&&ri(t)}}}}function yo(i,t){const e=i.clientX-t.clientX,s=i.clientY-t.clientY;return Math.sqrt(e*e+s*s)}function ri(i){i.cancelable&&i.preventDefault()}function oe(i){return{nt:i.pageX,st:i.pageY}}function ps(i){return i.timeStamp||performance.now()}function Ln(i,t){for(let e=0;e<i.length;++e)if(i[e].identifier===t)return i[e];return null}function vs(i){return{zc:i.zc,mv:{mr:i.bv.externalId},wv:i.bv.cursorStyle}}function tp(i,t,e){for(const s of i){const n=s.gt();if(n!==null&&n.pr){const r=n.pr(t,e);if(r!==null)return{vv:s,mv:r}}}return null}function kn(i,t){return e=>{var s,n,r,l;return((n=(s=e.Dt())===null||s===void 0?void 0:s.xa())!==null&&n!==void 0?n:"")!==t?[]:(l=(r=e.la)===null||r===void 0?void 0:r.call(e,i))!==null&&l!==void 0?l:[]}}class wo{constructor(t,e,s,n){this.zi=null,this.gv=null,this.Mv=!1,this.xv=new Ui(200),this.Zr=null,this.Sv=0,this.kv=!1,this.yv=()=>{this.kv||this.Qi.Cv().$t().Nh()},this.Tv=()=>{this.kv||this.Qi.Cv().$t().Nh()},this.Qi=t,this._n=e,this.mo=e.layout,this.yc=s,this.Pv=n==="left",this.Rv=kn("normal",n),this.Dv=kn("top",n),this.Ov=kn("bottom",n),this.Av=document.createElement("div"),this.Av.style.height="100%",this.Av.style.overflow="hidden",this.Av.style.width="25px",this.Av.style.left="0",this.Av.style.position="relative",this.Vv=Je(this.Av,dt({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv);const r=this.Vv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Bv=Je(this.Av,dt({width:16,height:16})),this.Bv.subscribeSuggestedBitmapSizeChanged(this.Tv);const l=this.Bv.canvasElement;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0";const o={tv:this.Iv.bind(this),Jf:this.Iv.bind(this),$f:this.zv.bind(this),jf:this.zv.bind(this),iv:this.Lv.bind(this),Xf:this.Ev.bind(this),qf:this.Ev.bind(this),Pf:this.Nv.bind(this),kf:this.Nv.bind(this),If:this.Fv.bind(this),_v:this.Wv.bind(this)};this.jv=new Dr(this.Bv.canvasElement,o,{Ff:()=>!this._n.handleScroll.vertTouchDrag,Wf:()=>!0})}S(){this.jv.S(),this.Bv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),ti(this.Bv.canvasElement),this.Bv.dispose(),this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),ti(this.Vv.canvasElement),this.Vv.dispose(),this.zi!==null&&this.zi.$o().p(this),this.zi=null}Hv(){return this.Av}P(){return this.mo.fontSize}$v(){const t=this.yc.W();return this.Zr!==t.R&&(this.xv.Qe(),this.Zr=t.R),t}Uv(){if(this.zi===null)return 0;let t=0;const e=this.$v(),s=R(this.Vv.canvasElement.getContext("2d"));s.save();const n=this.zi.La();s.font=this.qv(),n.length>0&&(t=Math.max(this.xv.Mi(s,n[0].Za),this.xv.Mi(s,n[n.length-1].Za)));const r=this.Yv();for(let a=r.length;a--;){const h=this.xv.Mi(s,r[a].Zt());h>t&&(t=h)}const l=this.zi.Ct();if(l!==null&&this.gv!==null){const a=this.zi.fn(1,l),h=this.zi.fn(this.gv.height-2,l);t=Math.max(t,this.xv.Mi(s,this.zi.Ni(Math.floor(Math.min(a,h))+.11111111111111,l)),this.xv.Mi(s,this.zi.Ni(Math.ceil(Math.max(a,h))-.11111111111111,l)))}s.restore();const o=t||34;return ir(Math.ceil(e.C+e.T+e.B+e.I+5+o))}Xv(t){this.gv!==null&&Qe(this.gv,t)||(this.gv=t,this.kv=!0,this.Vv.resizeCanvasElement(t),this.Bv.resizeCanvasElement(t),this.kv=!1,this.Av.style.width=`${t.width}px`,this.Av.style.height=`${t.height}px`)}Kv(){return R(this.gv).width}Zi(t){this.zi!==t&&(this.zi!==null&&this.zi.$o().p(this),this.zi=t,t.$o().l(this.ao.bind(this),this))}Dt(){return this.zi}Qe(){const t=this.Qi.Zv();this.Qi.Cv().$t().A_(t,R(this.Dt()))}Gv(t){if(this.gv===null)return;if(t!==1){this.Jv(),this.Vv.applySuggestedBitmapSize();const s=Xe(this.Vv);s!==null&&(s.useBitmapCoordinateSpace(n=>{this.Qv(n),this.Ae(n)}),this.Qi.tp(s,this.Ov),this.ip(s),this.Qi.tp(s,this.Rv),this.np(s))}this.Bv.applySuggestedBitmapSize();const e=Xe(this.Bv);e!==null&&(e.useBitmapCoordinateSpace(({context:s,bitmapSize:n})=>{s.clearRect(0,0,n.width,n.height)}),this.sp(e),this.Qi.tp(e,this.Dv))}ep(){return this.Vv.bitmapSize}rp(t,e,s){const n=this.ep();n.width>0&&n.height>0&&t.drawImage(this.Vv.canvasElement,e,s)}bt(){var t;(t=this.zi)===null||t===void 0||t.La()}Iv(t){if(this.zi===null||this.zi.Ei()||!this._n.handleScale.axisPressedMouseMove.price)return;const e=this.Qi.Cv().$t(),s=this.Qi.Zv();this.Mv=!0,e.y_(s,this.zi,t.localY)}zv(t){if(this.zi===null||!this._n.handleScale.axisPressedMouseMove.price)return;const e=this.Qi.Cv().$t(),s=this.Qi.Zv(),n=this.zi;e.C_(s,n,t.localY)}Lv(){if(this.zi===null||!this._n.handleScale.axisPressedMouseMove.price)return;const t=this.Qi.Cv().$t(),e=this.Qi.Zv(),s=this.zi;this.Mv&&(this.Mv=!1,t.T_(e,s))}Ev(t){if(this.zi===null||!this._n.handleScale.axisPressedMouseMove.price)return;const e=this.Qi.Cv().$t(),s=this.Qi.Zv();this.Mv=!1,e.T_(s,this.zi)}Nv(t){this._n.handleScale.axisDoubleClickReset.price&&this.Qe()}Fv(t){this.zi!==null&&(!this.Qi.Cv().$t().W().handleScale.axisPressedMouseMove.price||this.zi.fh()||this.zi.Co()||this.hp(1))}Wv(t){this.hp(0)}Yv(){const t=[],e=this.zi===null?void 0:this.zi;return(s=>{for(let n=0;n<s.length;++n){const r=s[n].Tn(this.Qi.Zv(),e);for(let l=0;l<r.length;l++)t.push(r[l])}})(this.Qi.Zv().No()),t}Qv({context:t,bitmapSize:e}){const{width:s,height:n}=e,r=this.Qi.Zv().$t(),l=r.q(),o=r._d();l===o?Hs(t,0,0,s,n,l):Ha(t,0,0,s,n,l,o)}Ae({context:t,bitmapSize:e,horizontalPixelRatio:s}){if(this.gv===null||this.zi===null||!this.zi.W().borderVisible)return;t.fillStyle=this.zi.W().borderColor;const n=Math.max(1,Math.floor(this.$v().C*s));let r;r=this.Pv?e.width-n:0,t.fillRect(r,0,n,e.height)}ip(t){if(this.gv===null||this.zi===null)return;const e=this.zi.La(),s=this.zi.W(),n=this.$v(),r=this.Pv?this.gv.width-n.T:0;s.borderVisible&&s.ticksVisible&&t.useBitmapCoordinateSpace(({context:l,horizontalPixelRatio:o,verticalPixelRatio:a})=>{l.fillStyle=s.borderColor;const h=Math.max(1,Math.floor(a)),u=Math.floor(.5*a),c=Math.round(n.T*o);l.beginPath();for(const f of e)l.rect(Math.floor(r*o),Math.round(f.Aa*a)-u,c,h);l.fill()}),t.useMediaCoordinateSpace(({context:l})=>{var o;l.font=this.qv(),l.fillStyle=(o=s.textColor)!==null&&o!==void 0?o:this.mo.textColor,l.textAlign=this.Pv?"right":"left",l.textBaseline="middle";const a=this.Pv?Math.round(r-n.B):Math.round(r+n.T+n.B),h=e.map(u=>this.xv.gi(l,u.Za));for(let u=e.length;u--;){const c=e[u];l.fillText(c.Za,a,c.Aa+h[u])}})}Jv(){if(this.gv===null||this.zi===null)return;let t=this.gv.height/2;const e=[],s=this.zi.No().slice(),n=this.Qi.Zv(),r=this.$v();this.zi===n.cr()&&this.Qi.Zv().No().forEach(a=>{n.ur(a)&&s.push(a)});const l=this.zi.Ta()[0],o=this.zi;s.forEach(a=>{const h=a.Tn(n,o);h.forEach(u=>{u.Oi(null),u.Ai()&&e.push(u)}),l===a&&h.length>0&&(t=h[0].Si())}),e.forEach(a=>a.Oi(a.Si())),this.zi.W().alignLabels&&this.lp(e,r,t)}lp(t,e,s){if(this.gv===null)return;const n=t.filter(l=>l.Si()<=s),r=t.filter(l=>l.Si()>s);n.sort((l,o)=>o.Si()-l.Si()),n.length&&r.length&&r.push(n[0]),r.sort((l,o)=>l.Si()-o.Si());for(const l of t){const o=Math.floor(l.Bt(e)/2),a=l.Si();a>-o&&a<o&&l.Oi(o),a>this.gv.height-o&&a<this.gv.height+o&&l.Oi(this.gv.height-o)}for(let l=1;l<n.length;l++){const o=n[l],a=n[l-1],h=a.Bt(e,!1),u=o.Si(),c=a.Di();u>c-h&&o.Oi(c-h)}for(let l=1;l<r.length;l++){const o=r[l],a=r[l-1],h=a.Bt(e,!0),u=o.Si(),c=a.Di();u<c+h&&o.Oi(c+h)}}np(t){if(this.gv===null)return;const e=this.Yv(),s=this.$v(),n=this.Pv?"right":"left";e.forEach(r=>{r.Vi()&&r.gt(R(this.zi)).K(t,s,this.xv,n)})}sp(t){if(this.gv===null||this.zi===null)return;const e=this.Qi.Cv().$t(),s=[],n=this.Qi.Zv(),r=e.Wc().Tn(n,this.zi);r.length&&s.push(r);const l=this.$v(),o=this.Pv?"right":"left";s.forEach(a=>{a.forEach(h=>{h.gt(R(this.zi)).K(t,l,this.xv,o)})})}hp(t){this.Av.style.cursor=t===1?"ns-resize":"default"}ao(){const t=this.Uv();this.Sv<t&&this.Qi.Cv().$t().$l(),this.Sv=t}qv(){return bi(this.mo.fontSize,this.mo.fontFamily)}}function ep(i,t){var e,s;return(s=(e=i.ra)===null||e===void 0?void 0:e.call(i,t))!==null&&s!==void 0?s:[]}function ms(i,t){var e,s;return(s=(e=i.Cn)===null||e===void 0?void 0:e.call(i,t))!==null&&s!==void 0?s:[]}function ip(i,t){var e,s;return(s=(e=i.Gi)===null||e===void 0?void 0:e.call(i,t))!==null&&s!==void 0?s:[]}function sp(i,t){var e,s;return(s=(e=i.na)===null||e===void 0?void 0:e.call(i,t))!==null&&s!==void 0?s:[]}class Fr{constructor(t,e){this.gv=dt({width:0,height:0}),this.ap=null,this.op=null,this._p=null,this.up=!1,this.cp=new yt,this.dp=new yt,this.fp=0,this.vp=!1,this.pp=null,this.mp=!1,this.bp=null,this.wp=null,this.kv=!1,this.yv=()=>{this.kv||this.gp===null||this.Hi().Nh()},this.Tv=()=>{this.kv||this.gp===null||this.Hi().Nh()},this.Mp=t,this.gp=e,this.gp.I_().l(this.xp.bind(this),this,!0),this.Sp=document.createElement("td"),this.Sp.style.padding="0",this.Sp.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.kp=document.createElement("td"),this.kp.style.padding="0",this.yp=document.createElement("td"),this.yp.style.padding="0",this.Sp.appendChild(s),this.Vv=Je(s,dt({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv);const n=this.Vv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Bv=Je(s,dt({width:16,height:16})),this.Bv.subscribeSuggestedBitmapSizeChanged(this.Tv);const r=this.Bv.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Cp=document.createElement("tr"),this.Cp.appendChild(this.kp),this.Cp.appendChild(this.Sp),this.Cp.appendChild(this.yp),this.Tp(),this.jv=new Dr(this.Bv.canvasElement,this,{Ff:()=>this.pp===null&&!this.Mp.W().handleScroll.vertTouchDrag,Wf:()=>this.pp===null&&!this.Mp.W().handleScroll.horzTouchDrag})}S(){this.ap!==null&&this.ap.S(),this.op!==null&&this.op.S(),this.Bv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),ti(this.Bv.canvasElement),this.Bv.dispose(),this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),ti(this.Vv.canvasElement),this.Vv.dispose(),this.gp!==null&&this.gp.I_().p(this),this.jv.S()}Zv(){return R(this.gp)}Pp(t){this.gp!==null&&this.gp.I_().p(this),this.gp=t,this.gp!==null&&this.gp.I_().l(Fr.prototype.xp.bind(this),this,!0),this.Tp()}Cv(){return this.Mp}Hv(){return this.Cp}Tp(){if(this.gp!==null&&(this.Rp(),this.Hi().wt().length!==0)){if(this.ap!==null){const t=this.gp.S_();this.ap.Zi(R(t))}if(this.op!==null){const t=this.gp.k_();this.op.Zi(R(t))}}}Dp(){this.ap!==null&&this.ap.bt(),this.op!==null&&this.op.bt()}v_(){return this.gp!==null?this.gp.v_():0}p_(t){this.gp&&this.gp.p_(t)}If(t){if(!this.gp)return;this.Op();const e=t.localX,s=t.localY;this.Ap(e,s,t)}tv(t){this.Op(),this.Vp(),this.Ap(t.localX,t.localY,t)}zf(t){var e;if(!this.gp)return;this.Op();const s=t.localX,n=t.localY;this.Ap(s,n,t);const r=this.pr(s,n);this.Mp.Bp((e=r==null?void 0:r.wv)!==null&&e!==void 0?e:null),this.Hi().Ic(r&&{zc:r.zc,mv:r.mv})}Kf(t){this.gp!==null&&(this.Op(),this.Ip(t))}Pf(t){this.gp!==null&&this.zp(this.dp,t)}kf(t){this.Pf(t)}$f(t){this.Op(),this.Lp(t),this.Ap(t.localX,t.localY,t)}Xf(t){this.gp!==null&&(this.Op(),this.vp=!1,this.Ep(t))}Yf(t){this.gp!==null&&this.Ip(t)}uv(t){if(this.vp=!0,this.pp===null){const e={x:t.localX,y:t.localY};this.Np(e,e,t)}}_v(t){this.gp!==null&&(this.Op(),this.gp.$t().Ic(null),this.Fp())}Wp(){return this.cp}jp(){return this.dp}ev(){this.fp=1,this.Hi().Hn()}rv(t,e){if(!this.Mp.W().handleScale.pinch)return;const s=5*(e-this.fp);this.fp=e,this.Hi().qc(t.nt,s)}Jf(t){this.vp=!1,this.mp=this.pp!==null,this.Vp();const e=this.Hi().Wc();this.pp!==null&&e.yt()&&(this.bp={x:e.Yt(),y:e.Xt()},this.pp={x:t.localX,y:t.localY})}jf(t){if(this.gp===null)return;const e=t.localX,s=t.localY;if(this.pp===null)this.Lp(t);else{this.mp=!1;const n=R(this.bp),r=n.x+(e-this.pp.x),l=n.y+(s-this.pp.y);this.Ap(r,l,t)}}qf(t){this.Cv().W().trackingMode.exitMode===0&&(this.mp=!0),this.Hp(),this.Ep(t)}pr(t,e){const s=this.gp;return s===null?null:function(n,r,l){const o=n.No(),a=function(h,u,c){var f,d;let m,p;for(const _ of h){const w=(d=(f=_.oa)===null||f===void 0?void 0:f.call(_,u,c))!==null&&d!==void 0?d:[];for(const b of w)x=b.zOrder,(!(y=m==null?void 0:m.zOrder)||x==="top"&&y!=="top"||x==="normal"&&y==="bottom")&&(m=b,p=_)}var x,y;return m&&p?{bv:m,zc:p}:null}(o,r,l);if((a==null?void 0:a.bv.zOrder)==="top")return vs(a);for(const h of o){if(a&&a.zc===h&&a.bv.zOrder!=="bottom"&&!a.bv.isBackground)return vs(a);const u=tp(h.Cn(n),r,l);if(u!==null)return{zc:h,vv:u.vv,mv:u.mv};if(a&&a.zc===h&&a.bv.zOrder!=="bottom"&&a.bv.isBackground)return vs(a)}return a!=null&&a.bv?vs(a):null}(s,t,e)}$p(t,e){R(e==="left"?this.ap:this.op).Xv(dt({width:t,height:this.gv.height}))}Up(){return this.gv}Xv(t){Qe(this.gv,t)||(this.gv=t,this.kv=!0,this.Vv.resizeCanvasElement(t),this.Bv.resizeCanvasElement(t),this.kv=!1,this.Sp.style.width=t.width+"px",this.Sp.style.height=t.height+"px")}qp(){const t=R(this.gp);t.x_(t.S_()),t.x_(t.k_());for(const e of t.Ta())if(t.ur(e)){const s=e.Dt();s!==null&&t.x_(s),e.Rn()}}ep(){return this.Vv.bitmapSize}rp(t,e,s){const n=this.ep();n.width>0&&n.height>0&&t.drawImage(this.Vv.canvasElement,e,s)}Gv(t){if(t===0||this.gp===null)return;if(t>1&&this.qp(),this.ap!==null&&this.ap.Gv(t),this.op!==null&&this.op.Gv(t),t!==1){this.Vv.applySuggestedBitmapSize();const s=Xe(this.Vv);s!==null&&(s.useBitmapCoordinateSpace(n=>{this.Qv(n)}),this.gp&&(this.Yp(s,ep),this.Xp(s),this.Kp(s),this.Yp(s,ms),this.Yp(s,ip)))}this.Bv.applySuggestedBitmapSize();const e=Xe(this.Bv);e!==null&&(e.useBitmapCoordinateSpace(({context:s,bitmapSize:n})=>{s.clearRect(0,0,n.width,n.height)}),this.Zp(e),this.Yp(e,sp))}Gp(){return this.ap}Jp(){return this.op}tp(t,e){this.Yp(t,e)}xp(){this.gp!==null&&this.gp.I_().p(this),this.gp=null}Ip(t){this.zp(this.cp,t)}zp(t,e){const s=e.localX,n=e.localY;t.M()&&t.m(this.Hi().St().Vu(s),{x:s,y:n},e)}Qv({context:t,bitmapSize:e}){const{width:s,height:n}=e,r=this.Hi(),l=r.q(),o=r._d();l===o?Hs(t,0,0,s,n,o):Ha(t,0,0,s,n,l,o)}Xp(t){const e=R(this.gp).z_().Fh().gt();e!==null&&e.K(t,!1)}Kp(t){const e=this.Hi().Fc();this.Qp(t,ms,sr,e),this.Qp(t,ms,xs,e)}Zp(t){this.Qp(t,ms,xs,this.Hi().Wc())}Yp(t,e){const s=R(this.gp).No();for(const n of s)this.Qp(t,e,sr,n);for(const n of s)this.Qp(t,e,xs,n)}Qp(t,e,s,n){const r=R(this.gp),l=r.$t().Bc(),o=l!==null&&l.zc===n,a=l!==null&&o&&l.mv!==void 0?l.mv.br:void 0;nr(e,h=>s(h,t,o,a),n,r)}Rp(){if(this.gp===null)return;const t=this.Mp,e=this.gp.S_().W().visible,s=this.gp.k_().W().visible;e||this.ap===null||(this.kp.removeChild(this.ap.Hv()),this.ap.S(),this.ap=null),s||this.op===null||(this.yp.removeChild(this.op.Hv()),this.op.S(),this.op=null);const n=t.$t().ed();e&&this.ap===null&&(this.ap=new wo(this,t.W(),n,"left"),this.kp.appendChild(this.ap.Hv())),s&&this.op===null&&(this.op=new wo(this,t.W(),n,"right"),this.yp.appendChild(this.op.Hv()))}tm(t){return t.cv&&this.vp||this.pp!==null}im(t){return Math.max(0,Math.min(t,this.gv.width-1))}nm(t){return Math.max(0,Math.min(t,this.gv.height-1))}Ap(t,e,s){this.Hi().Qc(this.im(t),this.nm(e),s,R(this.gp))}Fp(){this.Hi().nd()}Hp(){this.mp&&(this.pp=null,this.Fp())}Np(t,e,s){this.pp=t,this.mp=!1,this.Ap(e.x,e.y,s);const n=this.Hi().Wc();this.bp={x:n.Yt(),y:n.Xt()}}Hi(){return this.Mp.$t()}Ep(t){if(!this.up)return;const e=this.Hi(),s=this.Zv();if(e.D_(s,s.dn()),this._p=null,this.up=!1,e.Zc(),this.wp!==null){const n=performance.now(),r=e.St();this.wp.Pr(r.Lu(),n),this.wp.Yu(n)||e.qn(this.wp)}}Op(){this.pp=null}Vp(){if(this.gp){if(this.Hi().Hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)R(document.activeElement).blur();else{const t=document.getSelection();t!==null&&t.removeAllRanges()}!this.gp.dn().Ei()&&this.Hi().St().Ei()}}Lp(t){if(this.gp===null)return;const e=this.Hi(),s=e.St();if(s.Ei())return;const n=this.Mp.W(),r=n.handleScroll,l=n.kineticScroll;if((!r.pressedMouseMove||t.cv)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!t.cv))return;const o=this.gp.dn(),a=performance.now();if(this._p!==null||this.tm(t)||(this._p={x:t.clientX,y:t.clientY,yd:a,sm:t.localX,rm:t.localY}),this._p!==null&&!this.up&&(this._p.x!==t.clientX||this._p.y!==t.clientY)){if(t.cv&&l.touch||!t.cv&&l.mouse){const h=s.ee();this.wp=new Gd(.2/h,7/h,.997,15/h),this.wp.Fd(s.Lu(),this._p.yd)}else this.wp=null;o.Ei()||e.P_(this.gp,o,t.localY),e.Xc(t.localX),this.up=!0}this.up&&(o.Ei()||e.R_(this.gp,o,t.localY),e.Kc(t.localX),this.wp!==null&&this.wp.Fd(s.Lu(),a))}}class _o{constructor(t,e,s,n,r){this.ft=!0,this.gv=dt({width:0,height:0}),this.yv=()=>this.Gv(3),this.Pv=t==="left",this.yc=s.ed,this._n=e,this.hm=n,this.lm=r,this.Av=document.createElement("div"),this.Av.style.width="25px",this.Av.style.height="100%",this.Av.style.overflow="hidden",this.Vv=Je(this.Av,dt({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv)}S(){this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),ti(this.Vv.canvasElement),this.Vv.dispose()}Hv(){return this.Av}Up(){return this.gv}Xv(t){Qe(this.gv,t)||(this.gv=t,this.Vv.resizeCanvasElement(t),this.Av.style.width=`${t.width}px`,this.Av.style.height=`${t.height}px`,this.ft=!0)}Gv(t){if(t<3&&!this.ft||this.gv.width===0||this.gv.height===0)return;this.ft=!1,this.Vv.applySuggestedBitmapSize();const e=Xe(this.Vv);e!==null&&e.useBitmapCoordinateSpace(s=>{this.Qv(s),this.Ae(s)})}ep(){return this.Vv.bitmapSize}rp(t,e,s){const n=this.ep();n.width>0&&n.height>0&&t.drawImage(this.Vv.canvasElement,e,s)}Ae({context:t,bitmapSize:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(!this.hm())return;t.fillStyle=this._n.timeScale.borderColor;const r=Math.floor(this.yc.W().C*s),l=Math.floor(this.yc.W().C*n),o=this.Pv?e.width-r:0;t.fillRect(o,0,r,l)}Qv({context:t,bitmapSize:e}){Hs(t,0,0,e.width,e.height,this.lm())}}function Br(i){return t=>{var e,s;return(s=(e=t.aa)===null||e===void 0?void 0:e.call(t,i))!==null&&s!==void 0?s:[]}}const np=Br("normal"),rp=Br("top"),lp=Br("bottom");class op{constructor(t,e){this.am=null,this.om=null,this.k=null,this._m=!1,this.gv=dt({width:0,height:0}),this.um=new yt,this.xv=new Ui(5),this.kv=!1,this.yv=()=>{this.kv||this.Mp.$t().Nh()},this.Tv=()=>{this.kv||this.Mp.$t().Nh()},this.Mp=t,this.N_=e,this._n=t.W().layout,this.dm=document.createElement("tr"),this.fm=document.createElement("td"),this.fm.style.padding="0",this.vm=document.createElement("td"),this.vm.style.padding="0",this.Av=document.createElement("td"),this.Av.style.height="25px",this.Av.style.padding="0",this.pm=document.createElement("div"),this.pm.style.width="100%",this.pm.style.height="100%",this.pm.style.position="relative",this.pm.style.overflow="hidden",this.Av.appendChild(this.pm),this.Vv=Je(this.pm,dt({width:16,height:16})),this.Vv.subscribeSuggestedBitmapSizeChanged(this.yv);const s=this.Vv.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Bv=Je(this.pm,dt({width:16,height:16})),this.Bv.subscribeSuggestedBitmapSizeChanged(this.Tv);const n=this.Bv.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.dm.appendChild(this.fm),this.dm.appendChild(this.Av),this.dm.appendChild(this.vm),this.bm(),this.Mp.$t().f_().l(this.bm.bind(this),this),this.jv=new Dr(this.Bv.canvasElement,this,{Ff:()=>!0,Wf:()=>!this.Mp.W().handleScroll.horzTouchDrag})}S(){this.jv.S(),this.am!==null&&this.am.S(),this.om!==null&&this.om.S(),this.Bv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),ti(this.Bv.canvasElement),this.Bv.dispose(),this.Vv.unsubscribeSuggestedBitmapSizeChanged(this.yv),ti(this.Vv.canvasElement),this.Vv.dispose()}Hv(){return this.dm}wm(){return this.am}gm(){return this.om}tv(t){if(this._m)return;this._m=!0;const e=this.Mp.$t();!e.St().Ei()&&this.Mp.W().handleScale.axisPressedMouseMove.time&&e.Uc(t.localX)}Jf(t){this.tv(t)}iv(){const t=this.Mp.$t();!t.St().Ei()&&this._m&&(this._m=!1,this.Mp.W().handleScale.axisPressedMouseMove.time&&t.Jc())}$f(t){const e=this.Mp.$t();!e.St().Ei()&&this.Mp.W().handleScale.axisPressedMouseMove.time&&e.Gc(t.localX)}jf(t){this.$f(t)}Xf(){this._m=!1;const t=this.Mp.$t();t.St().Ei()&&!this.Mp.W().handleScale.axisPressedMouseMove.time||t.Jc()}qf(){this.Xf()}Pf(){this.Mp.W().handleScale.axisDoubleClickReset.time&&this.Mp.$t().Xn()}kf(){this.Pf()}If(){this.Mp.$t().W().handleScale.axisPressedMouseMove.time&&this.hp(1)}_v(){this.hp(0)}Up(){return this.gv}Mm(){return this.um}xm(t,e,s){Qe(this.gv,t)||(this.gv=t,this.kv=!0,this.Vv.resizeCanvasElement(t),this.Bv.resizeCanvasElement(t),this.kv=!1,this.Av.style.width=`${t.width}px`,this.Av.style.height=`${t.height}px`,this.um.m(t)),this.am!==null&&this.am.Xv(dt({width:e,height:t.height})),this.om!==null&&this.om.Xv(dt({width:s,height:t.height}))}Sm(){const t=this.km();return Math.ceil(t.C+t.T+t.P+t.L+t.V+t.ym)}bt(){this.Mp.$t().St().La()}ep(){return this.Vv.bitmapSize}rp(t,e,s){const n=this.ep();n.width>0&&n.height>0&&t.drawImage(this.Vv.canvasElement,e,s)}Gv(t){if(t===0)return;if(t!==1){this.Vv.applySuggestedBitmapSize();const s=Xe(this.Vv);s!==null&&(s.useBitmapCoordinateSpace(n=>{this.Qv(n),this.Ae(n),this.Cm(s,lp)}),this.ip(s),this.Cm(s,np)),this.am!==null&&this.am.Gv(t),this.om!==null&&this.om.Gv(t)}this.Bv.applySuggestedBitmapSize();const e=Xe(this.Bv);e!==null&&(e.useBitmapCoordinateSpace(({context:s,bitmapSize:n})=>{s.clearRect(0,0,n.width,n.height)}),this.Tm([...this.Mp.$t().wt(),this.Mp.$t().Wc()],e),this.Cm(e,rp))}Cm(t,e){const s=this.Mp.$t().wt();for(const n of s)nr(e,r=>sr(r,t,!1,void 0),n,void 0);for(const n of s)nr(e,r=>xs(r,t,!1,void 0),n,void 0)}Qv({context:t,bitmapSize:e}){Hs(t,0,0,e.width,e.height,this.Mp.$t()._d())}Ae({context:t,bitmapSize:e,verticalPixelRatio:s}){if(this.Mp.W().timeScale.borderVisible){t.fillStyle=this.Pm();const n=Math.max(1,Math.floor(this.km().C*s));t.fillRect(0,0,e.width,n)}}ip(t){const e=this.Mp.$t().St(),s=e.La();if(!s||s.length===0)return;const n=this.N_.maxTickMarkWeight(s),r=this.km(),l=e.W();l.borderVisible&&l.ticksVisible&&t.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:h})=>{o.strokeStyle=this.Pm(),o.fillStyle=this.Pm();const u=Math.max(1,Math.floor(a)),c=Math.floor(.5*a);o.beginPath();const f=Math.round(r.T*h);for(let d=s.length;d--;){const m=Math.round(s[d].coord*a);o.rect(m-c,0,u,f)}o.fill()}),t.useMediaCoordinateSpace(({context:o})=>{const a=r.C+r.T+r.L+r.P/2;o.textAlign="center",o.textBaseline="middle",o.fillStyle=this.$(),o.font=this.qv();for(const h of s)if(h.weight<n){const u=h.needAlignCoordinate?this.Rm(o,h.coord,h.label):h.coord;o.fillText(h.label,u,a)}this.Mp.W().timeScale.allowBoldLabels&&(o.font=this.Dm());for(const h of s)if(h.weight>=n){const u=h.needAlignCoordinate?this.Rm(o,h.coord,h.label):h.coord;o.fillText(h.label,u,a)}})}Rm(t,e,s){const n=this.xv.Mi(t,s),r=n/2,l=Math.floor(e-r)+.5;return l<0?e+=Math.abs(0-l):l+n>this.gv.width&&(e-=Math.abs(this.gv.width-(l+n))),e}Tm(t,e){const s=this.km();for(const n of t)for(const r of n.Ji())r.gt().K(e,s)}Pm(){return this.Mp.W().timeScale.borderColor}$(){return this._n.textColor}j(){return this._n.fontSize}qv(){return bi(this.j(),this._n.fontFamily)}Dm(){return bi(this.j(),this._n.fontFamily,"bold")}km(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,V:NaN,Wi:NaN,T:5,P:NaN,R:"",Fi:new Ui,ym:0});const t=this.k,e=this.qv();if(t.R!==e){const s=this.j();t.P=s,t.R=e,t.L=3*s/12,t.V=3*s/12,t.Wi=9*s/12,t.N=0,t.ym=4*s/12,t.Fi.Qe()}return this.k}hp(t){this.Av.style.cursor=t===1?"ew-resize":"default"}bm(){const t=this.Mp.$t(),e=t.W();e.leftPriceScale.visible||this.am===null||(this.fm.removeChild(this.am.Hv()),this.am.S(),this.am=null),e.rightPriceScale.visible||this.om===null||(this.vm.removeChild(this.om.Hv()),this.om.S(),this.om=null);const s={ed:this.Mp.$t().ed()},n=()=>e.leftPriceScale.borderVisible&&t.St().W().borderVisible,r=()=>t._d();e.leftPriceScale.visible&&this.am===null&&(this.am=new _o("left",e,s,n,r),this.fm.appendChild(this.am.Hv())),e.rightPriceScale.visible&&this.om===null&&(this.om=new _o("right",e,s,n,r),this.vm.appendChild(this.om.Hv()))}}const ap=!!yi&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(i=>i.brand.includes("Chromium"))&&!!yi&&(!((Pn=navigator==null?void 0:navigator.userAgentData)===null||Pn===void 0)&&Pn.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var Pn;class hp{constructor(t,e,s){var n;this.Om=[],this.Am=0,this.Qa=0,this.e_=0,this.Vm=0,this.Bm=0,this.Im=null,this.zm=!1,this.cp=new yt,this.dp=new yt,this.xc=new yt,this.Lm=null,this.Em=null,this.Nm=t,this._n=e,this.N_=s,this.dm=document.createElement("div"),this.dm.classList.add("tv-lightweight-charts"),this.dm.style.overflow="hidden",this.dm.style.direction="ltr",this.dm.style.width="100%",this.dm.style.height="100%",(n=this.dm).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Fm=document.createElement("table"),this.Fm.setAttribute("cellspacing","0"),this.dm.appendChild(this.Fm),this.Wm=this.jm.bind(this),$n(this._n)&&this.Hm(!0),this.Hi=new qd(this.kc.bind(this),this._n,s),this.$t().jc().l(this.$m.bind(this),this),this.Um=new op(this,this.N_),this.Fm.appendChild(this.Um.Hv());const r=e.autoSize&&this.qm();let l=this._n.width,o=this._n.height;if(r||l===0||o===0){const a=t.getBoundingClientRect();l=l||a.width,o=o||a.height}this.Ym(l,o),this.Xm(),t.appendChild(this.dm),this.Km(),this.Hi.St().Gu().l(this.Hi.$l.bind(this.Hi),this),this.Hi.f_().l(this.Hi.$l.bind(this.Hi),this)}$t(){return this.Hi}W(){return this._n}Zm(){return this.Om}Gm(){return this.Um}S(){this.Hm(!1),this.Am!==0&&window.cancelAnimationFrame(this.Am),this.Hi.jc().p(this),this.Hi.St().Gu().p(this),this.Hi.f_().p(this),this.Hi.S();for(const t of this.Om)this.Fm.removeChild(t.Hv()),t.Wp().p(this),t.jp().p(this),t.S();this.Om=[],R(this.Um).S(),this.dm.parentElement!==null&&this.dm.parentElement.removeChild(this.dm),this.xc.S(),this.cp.S(),this.dp.S(),this.Jm()}Ym(t,e,s=!1){if(this.Qa===e&&this.e_===t)return;const n=function(o){const a=Math.floor(o.width),h=Math.floor(o.height);return dt({width:a-a%2,height:h-h%2})}(dt({width:t,height:e}));this.Qa=n.height,this.e_=n.width;const r=this.Qa+"px",l=this.e_+"px";R(this.dm).style.height=r,R(this.dm).style.width=l,this.Fm.style.height=r,this.Fm.style.width=l,s?this.Qm(Mt.ns(),performance.now()):this.Hi.$l()}Gv(t){t===void 0&&(t=Mt.ns());for(let e=0;e<this.Om.length;e++)this.Om[e].Gv(t.Wn(e).En);this._n.timeScale.visible&&this.Um.Gv(t.Fn())}Eh(t){const e=$n(this._n);this.Hi.Eh(t);const s=$n(this._n);s!==e&&this.Hm(s),this.Km(),this.tb(t)}Wp(){return this.cp}jp(){return this.dp}jc(){return this.xc}ib(){this.Im!==null&&(this.Qm(this.Im,performance.now()),this.Im=null);const t=this.nb(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;const s=R(e.getContext("2d"));return this.nb(s),e}sb(t){return t==="left"&&!this.eb()||t==="right"&&!this.rb()||this.Om.length===0?0:R(t==="left"?this.Om[0].Gp():this.Om[0].Jp()).Kv()}hb(){return this._n.autoSize&&this.Lm!==null}lb(){return this.dm}Bp(t){this.Em=t,this.Em?this.lb().style.setProperty("cursor",t):this.lb().style.removeProperty("cursor")}ab(){return this.Em}ob(){return At(this.Om[0]).Up()}tb(t){(t.autoSize!==void 0||!this.Lm||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.Lm&&this.qm(),t.autoSize===!1&&this.Lm!==null&&this.Jm(),t.autoSize||t.width===void 0&&t.height===void 0||this.Ym(t.width||this.e_,t.height||this.Qa))}nb(t){let e=0,s=0;const n=this.Om[0],r=(o,a)=>{let h=0;for(let u=0;u<this.Om.length;u++){const c=this.Om[u],f=R(o==="left"?c.Gp():c.Jp()),d=f.ep();t!==null&&f.rp(t,a,h),h+=d.height}};this.eb()&&(r("left",0),e+=R(n.Gp()).ep().width);for(let o=0;o<this.Om.length;o++){const a=this.Om[o],h=a.ep();t!==null&&a.rp(t,e,s),s+=h.height}e+=n.ep().width,this.rb()&&(r("right",e),e+=R(n.Jp()).ep().width);const l=(o,a,h)=>{R(o==="left"?this.Um.wm():this.Um.gm()).rp(R(t),a,h)};if(this._n.timeScale.visible){const o=this.Um.ep();if(t!==null){let a=0;this.eb()&&(l("left",a,s),a=R(n.Gp()).ep().width),this.Um.rp(t,a,s),a+=o.width,this.rb()&&l("right",a,s)}s+=o.height}return dt({width:e,height:s})}_b(){let t=0,e=0,s=0;for(const m of this.Om)this.eb()&&(e=Math.max(e,R(m.Gp()).Uv(),this._n.leftPriceScale.minimumWidth)),this.rb()&&(s=Math.max(s,R(m.Jp()).Uv(),this._n.rightPriceScale.minimumWidth)),t+=m.v_();e=ir(e),s=ir(s);const n=this.e_,r=this.Qa,l=Math.max(n-e-s,0),o=this._n.timeScale.visible;let a=o?Math.max(this.Um.Sm(),this._n.timeScale.minimumHeight):0;var h;a=(h=a)+h%2;const u=0+a,c=r<u?0:r-u,f=c/t;let d=0;for(let m=0;m<this.Om.length;++m){const p=this.Om[m];p.Pp(this.Hi.Nc()[m]);let x=0,y=0;y=m===this.Om.length-1?c-d:Math.round(p.v_()*f),x=Math.max(y,2),d+=x,p.Xv(dt({width:l,height:x})),this.eb()&&p.$p(e,"left"),this.rb()&&p.$p(s,"right"),p.Zv()&&this.Hi.Hc(p.Zv(),x)}this.Um.xm(dt({width:o?l:0,height:a}),o?e:0,o?s:0),this.Hi.m_(l),this.Vm!==e&&(this.Vm=e),this.Bm!==s&&(this.Bm=s)}Hm(t){t?this.dm.addEventListener("wheel",this.Wm,{passive:!1}):this.dm.removeEventListener("wheel",this.Wm)}ub(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return ap?1/window.devicePixelRatio:1}jm(t){if(!(t.deltaX!==0&&this._n.handleScroll.mouseWheel||t.deltaY!==0&&this._n.handleScale.mouseWheel))return;const e=this.ub(t),s=e*t.deltaX/100,n=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),n!==0&&this._n.handleScale.mouseWheel){const r=Math.sign(n)*Math.min(1,Math.abs(n)),l=t.clientX-this.dm.getBoundingClientRect().left;this.$t().qc(l,r)}s!==0&&this._n.handleScroll.mouseWheel&&this.$t().Yc(-80*s)}Qm(t,e){var s;const n=t.Fn();n===3&&this.cb(),n!==3&&n!==2||(this.fb(t),this.vb(t,e),this.Um.bt(),this.Om.forEach(r=>{r.Dp()}),((s=this.Im)===null||s===void 0?void 0:s.Fn())===3&&(this.Im.Jn(t),this.cb(),this.fb(this.Im),this.vb(this.Im,e),t=this.Im,this.Im=null)),this.Gv(t)}vb(t,e){for(const s of t.Gn())this.Qn(s,e)}fb(t){const e=this.Hi.Nc();for(let s=0;s<e.length;s++)t.Wn(s).Nn&&e[s].V_()}Qn(t,e){const s=this.Hi.St();switch(t.$n){case 0:s.Qu();break;case 1:s.tc(t.Ot);break;case 2:s.Kn(t.Ot);break;case 3:s.Zn(t.Ot);break;case 4:s.Fu();break;case 5:t.Ot.Yu(e)||s.Zn(t.Ot.Xu(e))}}kc(t){this.Im!==null?this.Im.Jn(t):this.Im=t,this.zm||(this.zm=!0,this.Am=window.requestAnimationFrame(e=>{if(this.zm=!1,this.Am=0,this.Im!==null){const s=this.Im;this.Im=null,this.Qm(s,e);for(const n of s.Gn())if(n.$n===5&&!n.Ot.Yu(e)){this.$t().qn(n.Ot);break}}}))}cb(){this.Xm()}Xm(){const t=this.Hi.Nc(),e=t.length,s=this.Om.length;for(let n=e;n<s;n++){const r=At(this.Om.pop());this.Fm.removeChild(r.Hv()),r.Wp().p(this),r.jp().p(this),r.S()}for(let n=s;n<e;n++){const r=new Fr(this,t[n]);r.Wp().l(this.pb.bind(this),this),r.jp().l(this.mb.bind(this),this),this.Om.push(r),this.Fm.insertBefore(r.Hv(),this.Um.Hv())}for(let n=0;n<e;n++){const r=t[n],l=this.Om[n];l.Zv()!==r?l.Pp(r):l.Tp()}this.Km(),this._b()}bb(t,e,s){var n;const r=new Map;t!==null&&this.Hi.wt().forEach(u=>{const c=u.Vn().il(t);c!==null&&r.set(u,c)});let l;if(t!==null){const u=(n=this.Hi.St().$i(t))===null||n===void 0?void 0:n.originalTime;u!==void 0&&(l=u)}const o=this.$t().Bc(),a=o!==null&&o.zc instanceof Nr?o.zc:void 0,h=o!==null&&o.mv!==void 0?o.mv.mr:void 0;return{wb:l,ie:t??void 0,gb:e??void 0,Mb:a,xb:r,Sb:h,kb:s??void 0}}pb(t,e,s){this.cp.m(()=>this.bb(t,e,s))}mb(t,e,s){this.dp.m(()=>this.bb(t,e,s))}$m(t,e,s){this.xc.m(()=>this.bb(t,e,s))}Km(){const t=this._n.timeScale.visible?"":"none";this.Um.Hv().style.display=t}eb(){return this.Om[0].Zv().S_().W().visible}rb(){return this.Om[0].Zv().k_().W().visible}qm(){return"ResizeObserver"in window&&(this.Lm=new ResizeObserver(t=>{const e=t.find(s=>s.target===this.Nm);e&&this.Ym(e.contentRect.width,e.contentRect.height)}),this.Lm.observe(this.Nm,{box:"border-box"}),!0)}Jm(){this.Lm!==null&&this.Lm.disconnect(),this.Lm=null}}function $n(i){return!!(i.handleScroll.mouseWheel||i.handleScale.mouseWheel)}function hh(i,t){var e={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&t.indexOf(s)<0&&(e[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(s=Object.getOwnPropertySymbols(i);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(i,s[n])&&(e[s[n]]=i[s[n]])}return e}function xo(i,t,e,s){const n=e.value,r={ie:t,ot:i,Ot:[n,n,n,n],wb:s};return e.color!==void 0&&(r.O=e.color),r}function up(i,t,e,s){const n=e.value,r={ie:t,ot:i,Ot:[n,n,n,n],wb:s};return e.lineColor!==void 0&&(r.lt=e.lineColor),e.topColor!==void 0&&(r.ys=e.topColor),e.bottomColor!==void 0&&(r.Cs=e.bottomColor),r}function cp(i,t,e,s){const n=e.value,r={ie:t,ot:i,Ot:[n,n,n,n],wb:s};return e.topLineColor!==void 0&&(r.Ce=e.topLineColor),e.bottomLineColor!==void 0&&(r.Te=e.bottomLineColor),e.topFillColor1!==void 0&&(r.Me=e.topFillColor1),e.topFillColor2!==void 0&&(r.xe=e.topFillColor2),e.bottomFillColor1!==void 0&&(r.Se=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(r.ke=e.bottomFillColor2),r}function fp(i,t,e,s){const n={ie:t,ot:i,Ot:[e.open,e.high,e.low,e.close],wb:s};return e.color!==void 0&&(n.O=e.color),n}function dp(i,t,e,s){const n={ie:t,ot:i,Ot:[e.open,e.high,e.low,e.close],wb:s};return e.color!==void 0&&(n.O=e.color),e.borderColor!==void 0&&(n.At=e.borderColor),e.wickColor!==void 0&&(n.Hh=e.wickColor),n}function pp(i,t,e,s,n){const r=At(n)(e),l=Math.max(...r),o=Math.min(...r),a=r[r.length-1],h=[a,l,o,a],u=e,{time:c,color:f}=u;return{ie:t,ot:i,Ot:h,wb:s,We:hh(u,["time","color"]),O:f}}function gs(i){return i.Ot!==void 0}function So(i,t){return t.customValues!==void 0&&(i.yb=t.customValues),i}function We(i){return(t,e,s,n,r,l)=>function(o,a){return a?a(o):(h=o).open===void 0&&h.value===void 0;var h}(s,l)?So({ot:t,ie:e,wb:n},s):So(i(t,e,s,n,r),s)}function Co(i){return{Candlestick:We(dp),Bar:We(fp),Area:We(up),Baseline:We(cp),Histogram:We(xo),Line:We(xo),Custom:We(pp)}[i]}function Mo(i){return{ie:0,Cb:new Map,ia:i}}function Oo(i,t){if(i!==void 0&&i.length!==0)return{Tb:t.key(i[0].ot),Pb:t.key(i[i.length-1].ot)}}function Eo(i){let t;return i.forEach(e=>{t===void 0&&(t=e.wb)}),At(t)}class vp{constructor(t){this.Rb=new Map,this.Db=new Map,this.Ob=new Map,this.Ab=[],this.N_=t}S(){this.Rb.clear(),this.Db.clear(),this.Ob.clear(),this.Ab=[]}Vb(t,e){let s=this.Rb.size!==0,n=!1;const r=this.Db.get(t);if(r!==void 0)if(this.Db.size===1)s=!1,n=!0,this.Rb.clear();else for(const a of this.Ab)a.pointData.Cb.delete(t)&&(n=!0);let l=[];if(e.length!==0){const a=e.map(d=>d.time),h=this.N_.createConverterToInternalObj(e),u=Co(t.Yh()),c=t.ga(),f=t.Ma();l=e.map((d,m)=>{const p=h(d.time),x=this.N_.key(p);let y=this.Rb.get(x);y===void 0&&(y=Mo(p),this.Rb.set(x,y),n=!0);const _=u(p,y.ie,d,a[m],c,f);return y.Cb.set(t,_),_})}s&&this.Bb(),this.Ib(t,l);let o=-1;if(n){const a=[];this.Rb.forEach(h=>{a.push({timeWeight:0,time:h.ia,pointData:h,originalTime:Eo(h.Cb)})}),a.sort((h,u)=>this.N_.key(h.time)-this.N_.key(u.time)),o=this.zb(a)}return this.Lb(t,o,function(a,h,u){const c=Oo(a,u),f=Oo(h,u);if(c!==void 0&&f!==void 0)return{Xl:c.Pb>=f.Pb&&c.Tb>=f.Tb}}(this.Db.get(t),r,this.N_))}ld(t){return this.Vb(t,[])}Eb(t,e){const s=e;(function(p){p.wb===void 0&&(p.wb=p.time)})(s),this.N_.preprocessData(e);const n=this.N_.createConverterToInternalObj([e])(e.time),r=this.Ob.get(t);if(r!==void 0&&this.N_.key(n)<this.N_.key(r))throw new Error(`Cannot update oldest data, last time=${r}, new time=${n}`);let l=this.Rb.get(this.N_.key(n));const o=l===void 0;l===void 0&&(l=Mo(n),this.Rb.set(this.N_.key(n),l));const a=Co(t.Yh()),h=t.ga(),u=t.Ma(),c=a(n,l.ie,e,s.wb,h,u);l.Cb.set(t,c),this.Nb(t,c);const f={Xl:gs(c)};if(!o)return this.Lb(t,-1,f);const d={timeWeight:0,time:l.ia,pointData:l,originalTime:Eo(l.Cb)},m=Xi(this.Ab,this.N_.key(d.time),(p,x)=>this.N_.key(p.time)<x);this.Ab.splice(m,0,d);for(let p=m;p<this.Ab.length;++p)Nn(this.Ab[p].pointData,p);return this.N_.fillWeightsForPoints(this.Ab,m),this.Lb(t,m,f)}Nb(t,e){let s=this.Db.get(t);s===void 0&&(s=[],this.Db.set(t,s));const n=s.length!==0?s[s.length-1]:null;n===null||this.N_.key(e.ot)>this.N_.key(n.ot)?gs(e)&&s.push(e):gs(e)?s[s.length-1]=e:s.splice(-1,1),this.Ob.set(t,e.ot)}Ib(t,e){e.length!==0?(this.Db.set(t,e.filter(gs)),this.Ob.set(t,e[e.length-1].ot)):(this.Db.delete(t),this.Ob.delete(t))}Bb(){for(const t of this.Ab)t.pointData.Cb.size===0&&this.Rb.delete(this.N_.key(t.time))}zb(t){let e=-1;for(let s=0;s<this.Ab.length&&s<t.length;++s){const n=this.Ab[s],r=t[s];if(this.N_.key(n.time)!==this.N_.key(r.time)){e=s;break}r.timeWeight=n.timeWeight,Nn(r.pointData,s)}if(e===-1&&this.Ab.length!==t.length&&(e=Math.min(this.Ab.length,t.length)),e===-1)return-1;for(let s=e;s<t.length;++s)Nn(t[s].pointData,s);return this.N_.fillWeightsForPoints(t,e),this.Ab=t,e}Fb(){if(this.Db.size===0)return null;let t=0;return this.Db.forEach(e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].ie))}),t}Lb(t,e,s){const n={Wb:new Map,St:{Au:this.Fb()}};if(e!==-1)this.Db.forEach((r,l)=>{n.Wb.set(l,{We:r,jb:l===t?s:void 0})}),this.Db.has(t)||n.Wb.set(t,{We:[],jb:s}),n.St.Hb=this.Ab,n.St.$b=e;else{const r=this.Db.get(t);n.Wb.set(t,{We:r||[],jb:s})}return n}}function Nn(i,t){i.ie=t,i.Cb.forEach(e=>{e.ie=t})}function Vr(i){const t={value:i.Ot[3],time:i.wb};return i.yb!==void 0&&(t.customValues=i.yb),t}function To(i){const t=Vr(i);return i.O!==void 0&&(t.color=i.O),t}function mp(i){const t=Vr(i);return i.lt!==void 0&&(t.lineColor=i.lt),i.ys!==void 0&&(t.topColor=i.ys),i.Cs!==void 0&&(t.bottomColor=i.Cs),t}function gp(i){const t=Vr(i);return i.Ce!==void 0&&(t.topLineColor=i.Ce),i.Te!==void 0&&(t.bottomLineColor=i.Te),i.Me!==void 0&&(t.topFillColor1=i.Me),i.xe!==void 0&&(t.topFillColor2=i.xe),i.Se!==void 0&&(t.bottomFillColor1=i.Se),i.ke!==void 0&&(t.bottomFillColor2=i.ke),t}function uh(i){const t={open:i.Ot[0],high:i.Ot[1],low:i.Ot[2],close:i.Ot[3],time:i.wb};return i.yb!==void 0&&(t.customValues=i.yb),t}function bp(i){const t=uh(i);return i.O!==void 0&&(t.color=i.O),t}function yp(i){const t=uh(i),{O:e,At:s,Hh:n}=i;return e!==void 0&&(t.color=e),s!==void 0&&(t.borderColor=s),n!==void 0&&(t.wickColor=n),t}function rr(i){return{Area:mp,Line:To,Baseline:gp,Histogram:To,Bar:bp,Candlestick:yp,Custom:wp}[i]}function wp(i){const t=i.wb;return Object.assign(Object.assign({},i.We),{time:t})}const _p={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},xp={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},Sp={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Ir},An={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},Cp={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},Mp={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Ir,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function zo(){return{width:0,height:0,autoSize:!1,layout:Sp,crosshair:_p,grid:xp,overlayPriceScales:Object.assign({},An),leftPriceScale:Object.assign(Object.assign({},An),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},An),{visible:!0}),timeScale:Cp,watermark:Mp,localization:{locale:yi?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}let Op=class{constructor(t,e){this.Ub=t,this.qb=e}applyOptions(t){this.Ub.$t().Lc(this.qb,t)}options(){return this.zi().W()}width(){return Ks(this.qb)?this.Ub.sb(this.qb):0}zi(){return R(this.Ub.$t().Ec(this.qb)).Dt}};function Io(i,t,e){const s=hh(i,["time","originalTime"]),n=Object.assign({time:t},s);return e!==void 0&&(n.originalTime=e),n}const Ep={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};let Tp=class{constructor(t){this.Vh=t}applyOptions(t){this.Vh.Eh(t)}options(){return this.Vh.W()}Yb(){return this.Vh}};class zp{constructor(t,e,s,n,r){this.Xb=new yt,this.Is=t,this.Kb=e,this.Zb=s,this.N_=r,this.Gb=n}S(){this.Xb.S()}priceFormatter(){return this.Is.ca()}priceToCoordinate(t){const e=this.Is.Ct();return e===null?null:this.Is.Dt().Rt(t,e.Ot)}coordinateToPrice(t){const e=this.Is.Ct();return e===null?null:this.Is.Dt().fn(t,e.Ot)}barsInLogicalRange(t){if(t===null)return null;const e=new vi(new Ai(t.from,t.to)).iu(),s=this.Is.Vn();if(s.Ei())return null;const n=s.il(e.Rs(),1),r=s.il(e.ui(),-1),l=R(s.Jh()),o=R(s.An());if(n!==null&&r!==null&&n.ie>r.ie)return{barsBefore:t.from-l,barsAfter:o-t.to};const a={barsBefore:n===null||n.ie===l?t.from-l:n.ie-l,barsAfter:r===null||r.ie===o?o-t.to:o-r.ie};return n!==null&&r!==null&&(a.from=n.wb,a.to=r.wb),a}setData(t){this.N_,this.Is.Yh(),this.Kb.Jb(this.Is,t),this.Qb("full")}update(t){this.Is.Yh(),this.Kb.tw(this.Is,t),this.Qb("update")}dataByIndex(t,e){const s=this.Is.Vn().il(t,e);return s===null?null:rr(this.seriesType())(s)}data(){const t=rr(this.seriesType());return this.Is.Vn().Qs().map(e=>t(e))}subscribeDataChanged(t){this.Xb.l(t)}unsubscribeDataChanged(t){this.Xb.v(t)}setMarkers(t){this.N_;const e=t.map(s=>Io(s,this.N_.convertHorzItemToInternal(s.time),s.time));this.Is.Zl(e)}markers(){return this.Is.Gl().map(t=>Io(t,t.originalTime,void 0))}applyOptions(t){this.Is.Eh(t)}options(){return me(this.Is.W())}priceScale(){return this.Zb.priceScale(this.Is.Dt().xa())}createPriceLine(t){const e=se(me(Ep),t),s=this.Is.Jl(e);return new Tp(s)}removePriceLine(t){this.Is.Ql(t.Yb())}seriesType(){return this.Is.Yh()}attachPrimitive(t){this.Is.ba(t),t.attached&&t.attached({chart:this.Gb,series:this,requestUpdate:()=>this.Is.$t().$l()})}detachPrimitive(t){this.Is.wa(t),t.detached&&t.detached()}Qb(t){this.Xb.M()&&this.Xb.m(t)}}let Ip=class{constructor(t,e,s){this.iw=new yt,this.uu=new yt,this.um=new yt,this.Hi=t,this.wl=t.St(),this.Um=e,this.wl.Ku().l(this.nw.bind(this)),this.wl.Zu().l(this.sw.bind(this)),this.Um.Mm().l(this.ew.bind(this)),this.N_=s}S(){this.wl.Ku().p(this),this.wl.Zu().p(this),this.Um.Mm().p(this),this.iw.S(),this.uu.S(),this.um.S()}scrollPosition(){return this.wl.Lu()}scrollToPosition(t,e){e?this.wl.qu(t,1e3):this.Hi.Zn(t)}scrollToRealTime(){this.wl.Uu()}getVisibleRange(){const t=this.wl.yu();return t===null?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.N_.convertHorzItemToInternal(t.from),to:this.N_.convertHorzItemToInternal(t.to)},s=this.wl.Ru(e);this.Hi.ad(s)}getVisibleLogicalRange(){const t=this.wl.ku();return t===null?null:{from:t.Rs(),to:t.ui()}}setVisibleLogicalRange(t){$e(t.from<=t.to,"The from index cannot be after the to index."),this.Hi.ad(t)}resetTimeScale(){this.Hi.Xn()}fitContent(){this.Hi.Qu()}logicalToCoordinate(t){const e=this.Hi.St();return e.Ei()?null:e.It(t)}coordinateToLogical(t){return this.wl.Ei()?null:this.wl.Vu(t)}timeToCoordinate(t){const e=this.N_.convertHorzItemToInternal(t),s=this.wl.ya(e,!1);return s===null?null:this.wl.It(s)}coordinateToTime(t){const e=this.Hi.St(),s=e.Vu(t),n=e.$i(s);return n===null?null:n.originalTime}width(){return this.Um.Up().width}height(){return this.Um.Up().height}subscribeVisibleTimeRangeChange(t){this.iw.l(t)}unsubscribeVisibleTimeRangeChange(t){this.iw.v(t)}subscribeVisibleLogicalRangeChange(t){this.uu.l(t)}unsubscribeVisibleLogicalRangeChange(t){this.uu.v(t)}subscribeSizeChange(t){this.um.l(t)}unsubscribeSizeChange(t){this.um.v(t)}applyOptions(t){this.wl.Eh(t)}options(){return Object.assign(Object.assign({},me(this.wl.W())),{barSpacing:this.wl.ee()})}nw(){this.iw.M()&&this.iw.m(this.getVisibleRange())}sw(){this.uu.M()&&this.uu.m(this.getVisibleLogicalRange())}ew(t){this.um.m(t.width,t.height)}};function Rp(i){if(i===void 0||i.type==="custom")return;const t=i;t.minMove!==void 0&&t.precision===void 0&&(t.precision=function(e){if(e>=1)return 0;let s=0;for(;s<8;s++){const n=Math.round(e);if(Math.abs(n-e)<1e-8)return s;e*=10}return s}(t.minMove))}function Ro(i){return function(t){if(as(t.handleScale)){const s=t.handleScale;t.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(t.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:n}=t.handleScale;as(s)&&(t.handleScale.axisPressedMouseMove={time:s,price:s}),as(n)&&(t.handleScale.axisDoubleClickReset={time:n,price:n})}const e=t.handleScroll;as(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(i),i}class Lp{constructor(t,e,s){this.rw=new Map,this.hw=new Map,this.lw=new yt,this.aw=new yt,this.ow=new yt,this._w=new vp(e);const n=s===void 0?me(zo()):se(me(zo()),Ro(s));this.N_=e,this.Ub=new hp(t,n,e),this.Ub.Wp().l(l=>{this.lw.M()&&this.lw.m(this.uw(l()))},this),this.Ub.jp().l(l=>{this.aw.M()&&this.aw.m(this.uw(l()))},this),this.Ub.jc().l(l=>{this.ow.M()&&this.ow.m(this.uw(l()))},this);const r=this.Ub.$t();this.cw=new Ip(r,this.Ub.Gm(),this.N_)}remove(){this.Ub.Wp().p(this),this.Ub.jp().p(this),this.Ub.jc().p(this),this.cw.S(),this.Ub.S(),this.rw.clear(),this.hw.clear(),this.lw.S(),this.aw.S(),this.ow.S(),this._w.S()}resize(t,e,s){this.autoSizeActive()||this.Ub.Ym(t,e,s)}addCustomSeries(t,e){const s=hi(t),n=Object.assign(Object.assign({},Ba),s.defaultOptions());return this.dw("Custom",n,e,s)}addAreaSeries(t){return this.dw("Area",gf,t)}addBaselineSeries(t){return this.dw("Baseline",bf,t)}addBarSeries(t){return this.dw("Bar",vf,t)}addCandlestickSeries(t={}){return function(e){e.borderColor!==void 0&&(e.borderUpColor=e.borderColor,e.borderDownColor=e.borderColor),e.wickColor!==void 0&&(e.wickUpColor=e.wickColor,e.wickDownColor=e.wickColor)}(t),this.dw("Candlestick",pf,t)}addHistogramSeries(t){return this.dw("Histogram",yf,t)}addLineSeries(t){return this.dw("Line",mf,t)}removeSeries(t){const e=At(this.rw.get(t)),s=this._w.ld(e);this.Ub.$t().ld(e),this.fw(s),this.rw.delete(t),this.hw.delete(e)}Jb(t,e){this.fw(this._w.Vb(t,e))}tw(t,e){this.fw(this._w.Eb(t,e))}subscribeClick(t){this.lw.l(t)}unsubscribeClick(t){this.lw.v(t)}subscribeCrosshairMove(t){this.ow.l(t)}unsubscribeCrosshairMove(t){this.ow.v(t)}subscribeDblClick(t){this.aw.l(t)}unsubscribeDblClick(t){this.aw.v(t)}priceScale(t){return new Op(this.Ub,t)}timeScale(){return this.cw}applyOptions(t){this.Ub.Eh(Ro(t))}options(){return this.Ub.W()}takeScreenshot(){return this.Ub.ib()}autoSizeActive(){return this.Ub.hb()}chartElement(){return this.Ub.lb()}paneSize(){const t=this.Ub.ob();return{height:t.height,width:t.width}}setCrosshairPosition(t,e,s){const n=this.rw.get(s);if(n===void 0)return;const r=this.Ub.$t()._r(n);r!==null&&this.Ub.$t().td(t,e,r)}clearCrosshairPosition(){this.Ub.$t().nd(!0)}dw(t,e,s={},n){Rp(s.priceFormat);const r=se(me(Va),me(e),s),l=this.Ub.$t().rd(t,r,n),o=new zp(l,this,this,this,this.N_);return this.rw.set(o,l),this.hw.set(l,o),o}fw(t){const e=this.Ub.$t();e.sd(t.St.Au,t.St.Hb,t.St.$b),t.Wb.forEach((s,n)=>n.J(s.We,s.jb)),e.Iu()}pw(t){return At(this.hw.get(t))}uw(t){const e=new Map;t.xb.forEach((n,r)=>{const l=r.Yh(),o=rr(l)(n);if(l!=="Custom")$e(function(a){return a.open!==void 0||a.value!==void 0}(o));else{const a=r.Ma();$e(!a||a(o)===!1)}e.set(this.pw(r),o)});const s=t.Mb===void 0?void 0:this.pw(t.Mb);return{time:t.wb,logical:t.ie,point:t.gb,hoveredSeries:s,hoveredObjectId:t.Sb,seriesData:e,sourceEvent:t.kb}}}function kp(i,t,e){let s;if(Qi(i)){const r=document.getElementById(i);$e(r!==null,`Cannot find element in DOM with id=${i}`),s=r}else s=i;const n=new Lp(s,t,e);return t.setOptions(n.options()),n}function Pp(i,t){return kp(i,new go,go.Pd(t))}Object.assign(Object.assign({},Va),Ba);const $p=ct({__name:"LWChart",props:{type:{},data:{},autosize:{},chartOptions:{},seriesOptions:{},timeScaleOptions:{},priceScaleOptions:{}},setup(i,{expose:t}){const e=i;function s(c){return`add${c.charAt(0).toUpperCase()+c.slice(1)}Series`}let n,r;const l=W();t({fitContent:()=>{r&&r.timeScale().fitContent()},getChart:()=>r});const h=()=>{if(!r||!l.value)return;const c=l.value.getBoundingClientRect();r.resize(c.width,c.height)},u=c=>{r==null||r.addCandlestickSeries;const f=s(c.type);r&&(n=r[f](c.seriesOptions),n&&n.setData(c.data))};return xt(()=>{r=Pp(l.value,e.chartOptions),u(e),e.priceScaleOptions&&r.priceScale("").applyOptions(e.priceScaleOptions),e.timeScaleOptions&&r.timeScale().applyOptions(e.timeScaleOptions),r.timeScale().fitContent(),e.autosize&&window.addEventListener("resize",h)}),Ae(()=>{r&&(r.remove(),r=null),n&&(n=null),window.removeEventListener("resize",h)}),ft(()=>e.autosize,c=>{if(!c){window.removeEventListener("resize",h);return}window.addEventListener("resize",h)}),ft(()=>e.type,()=>{n&&r&&r.removeSeries(n),u(e)}),ft(()=>e.data,c=>{n&&n.setData(c)}),ft(()=>e.chartOptions,c=>{!r||!c||r.applyOptions(c)}),ft(()=>e.seriesOptions,c=>{!n||!c||n.applyOptions(c)}),ft(()=>e.priceScaleOptions,c=>{!r||!c||r.priceScale("").applyOptions(c)}),ft(()=>e.timeScaleOptions,c=>{!r||!c||r.timeScale().applyOptions(c)}),(c,f)=>(at(),_t("div",{class:"lw-chart h-full",ref_key:"chartContainer",ref:l},null,512))}}),Np={class:"chart-container h-[60vh] min-h-36 p-5"},Ap=ct({__name:"RenderChart",props:{serverData:{},chartType:{}},setup(i){const t=i,e=W(t.serverData),s=Et("isDarkMode",W(!1));ft(()=>t.serverData,()=>{e.value=t.serverData});const n=F(()=>s.value?{layout:{background:{color:"#222"},textColor:"#DDD"},grid:{vertLines:{color:"#444"},horzLines:{color:"#444"}}}:{layout:{background:{color:"#FFFFFF"},textColor:"#191919"},grid:{vertLines:{color:"#D6DCDE"},horzLines:{color:"#D6DCDE"}}}),r=W({color:"#90400e"}),l=W();return(o,a)=>(at(),_t("div",Np,[ht($p,{type:t.chartType,data:e.value,autosize:!0,"chart-options":n.value,"series-options":r.value,ref_key:"lwChart",ref:l},null,8,["type","data","chart-options","series-options"])]))}}),ch="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2024%2024'%20stroke-width='1.5'%20stroke='currentColor'%20class='w-6%20h-6'%3e%3cpath%20stroke-linecap='round'%20stroke-linejoin='round'%20d='m4.5%2012.75%206%206%209-13.5'%20stroke='%23d97706'%20/%3e%3c/svg%3e";function li(i,t,e){let s=e.initialDeps??[],n;return()=>{var r,l,o,a;let h;e.key&&((r=e.debug)!=null&&r.call(e))&&(h=Date.now());const u=i();if(!(u.length!==s.length||u.some((d,m)=>s[m]!==d)))return n;s=u;let f;if(e.key&&((l=e.debug)!=null&&l.call(e))&&(f=Date.now()),n=t(...u),e.key&&((o=e.debug)!=null&&o.call(e))){const d=Math.round((Date.now()-h)*100)/100,m=Math.round((Date.now()-f)*100)/100,p=m/16,x=(y,_)=>{for(y=String(y);y.length<_;)y=" "+y;return y};console.info(`%c ${x(m,5)} /${x(d,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*p,120))}deg 100% 31%);`,e==null?void 0:e.key)}return(a=e==null?void 0:e.onChange)==null||a.call(e,n),n}}function Dn(i,t){if(i===void 0)throw new Error(`Unexpected undefined${t?`: ${t}`:""}`);return i}const Dp=(i,t)=>Math.abs(i-t)<1,Fp=i=>i,Bp=i=>{const t=Math.max(i.startIndex-i.overscan,0),e=Math.min(i.endIndex+i.overscan,i.count-1),s=[];for(let n=t;n<=e;n++)s.push(n);return s},Vp=(i,t)=>{const e=i.scrollElement;if(!e)return;const s=r=>{const{width:l,height:o}=r;t({width:Math.round(l),height:Math.round(o)})};if(s(e.getBoundingClientRect()),typeof ResizeObserver>"u")return()=>{};const n=new ResizeObserver(r=>{const l=r[0];if(l!=null&&l.borderBoxSize){const o=l.borderBoxSize[0];if(o){s({width:o.inlineSize,height:o.blockSize});return}}s(e.getBoundingClientRect())});return n.observe(e,{box:"border-box"}),()=>{n.unobserve(e)}},jp=(i,t)=>{const e=i.scrollElement;if(!e)return;const s=()=>{t(e[i.options.horizontal?"scrollLeft":"scrollTop"])};return s(),e.addEventListener("scroll",s,{passive:!0}),()=>{e.removeEventListener("scroll",s)}},Wp=(i,t,e)=>{if(t!=null&&t.borderBoxSize){const s=t.borderBoxSize[0];if(s)return Math.round(s[e.options.horizontal?"inlineSize":"blockSize"])}return Math.round(i.getBoundingClientRect()[e.options.horizontal?"width":"height"])},Hp=(i,{adjustments:t=0,behavior:e},s)=>{var n,r;const l=i+t;(r=(n=s.scrollElement)==null?void 0:n.scrollTo)==null||r.call(n,{[s.options.horizontal?"left":"top"]:l,behavior:e})};class Up{constructor(t){this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let e=null;const s=()=>e||(typeof ResizeObserver<"u"?e=new ResizeObserver(n=>{n.forEach(r=>{this._measureElement(r.target,r)})}):null);return{disconnect:()=>{var n;return(n=s())==null?void 0:n.disconnect()},observe:n=>{var r;return(r=s())==null?void 0:r.observe(n,{box:"border-box"})},unobserve:n=>{var r;return(r=s())==null?void 0:r.unobserve(n)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([s,n])=>{typeof n>"u"&&delete e[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Fp,rangeExtractor:Bp,onChange:()=>{},measureElement:Wp,initialRect:{width:0,height:0},scrollMargin:0,gap:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,...e}},this.notify=e=>{var s,n;(n=(s=this.options).onChange)==null||n.call(s,this,e)},this.maybeNotify=li(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{const e=this.options.getScrollElement();this.scrollElement!==e&&(this.cleanup(),this.scrollElement=e,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,s=>{this.scrollAdjustments=0,this.scrollOffset!==s&&(this.isScrollingTimeoutId!==null&&(clearTimeout(this.isScrollingTimeoutId),this.isScrollingTimeoutId=null),this.isScrolling=!0,this.scrollDirection=this.scrollOffset<s?"forward":"backward",this.scrollOffset=s,this.maybeNotify(),this.isScrollingTimeoutId=setTimeout(()=>{this.isScrollingTimeoutId=null,this.isScrolling=!1,this.scrollDirection=null,this.maybeNotify()},this.options.scrollingDelay))})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.memoOptions=li(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey],(e,s,n,r)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:s,scrollMargin:n,getItemKey:r}),{key:!1}),this.getFurthestMeasurement=(e,s)=>{const n=new Map,r=new Map;for(let l=s-1;l>=0;l--){const o=e[l];if(n.has(o.lane))continue;const a=r.get(o.lane);if(a==null||o.end>a.end?r.set(o.lane,o):o.end<a.end&&n.set(o.lane,!0),n.size===this.options.lanes)break}return r.size===this.options.lanes?Array.from(r.values()).sort((l,o)=>l.end===o.end?l.index-o.index:l.end-o.end)[0]:void 0},this.getMeasurements=li(()=>[this.memoOptions(),this.itemSizeCache],({count:e,paddingStart:s,scrollMargin:n,getItemKey:r},l)=>{const o=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const a=this.measurementsCache.slice(0,o);for(let h=o;h<e;h++){const u=r(h),c=this.options.lanes===1?a[h-1]:this.getFurthestMeasurement(a,h),f=c?c.end+this.options.gap:s+n,d=l.get(u),m=typeof d=="number"?d:this.options.estimateSize(h),p=f+m,x=c?c.lane:h%this.options.lanes;a[h]={index:h,start:f,size:m,end:p,key:u,lane:x}}return this.measurementsCache=a,a},{key:!1,debug:()=>this.options.debug}),this.calculateRange=li(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(e,s,n)=>this.range=e.length>0&&s>0?Kp({measurements:e,outerSize:s,scrollOffset:n}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=li(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(e,s,n,r)=>s===null?[]:e({...s,overscan:n,count:r}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const s=this.options.indexAttribute,n=e.getAttribute(s);return n?parseInt(n,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(e,s)=>{const n=this.measurementsCache[this.indexFromElement(e)];if(!n||!e.isConnected){this.measureElementCache.forEach((o,a)=>{o===e&&(this.observer.unobserve(e),this.measureElementCache.delete(a))});return}const r=this.measureElementCache.get(n.key);r!==e&&(r&&this.observer.unobserve(r),this.observer.observe(e),this.measureElementCache.set(n.key,e));const l=this.options.measureElement(e,s,this);this.resizeItem(n,l)},this.resizeItem=(e,s)=>{const n=this.itemSizeCache.get(e.key)??e.size,r=s-n;r!==0&&(e.start<this.scrollOffset+this.scrollAdjustments&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=r,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(e.index),this.itemSizeCache=new Map(this.itemSizeCache.set(e.key,s)),this.notify(!1))},this.measureElement=e=>{e&&this._measureElement(e,void 0)},this.getVirtualItems=li(()=>[this.getIndexes(),this.getMeasurements()],(e,s)=>{const n=[];for(let r=0,l=e.length;r<l;r++){const o=e[r],a=s[o];n.push(a)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const s=this.getMeasurements();return Dn(s[fh(0,s.length-1,n=>Dn(s[n]).start,e)])},this.getOffsetForAlignment=(e,s)=>{const n=this.getSize();s==="auto"&&(e<=this.scrollOffset?s="start":e>=this.scrollOffset+n?s="end":s="start"),s==="start"?e=e:s==="end"?e=e-n:s==="center"&&(e=e-n/2);const r=this.options.horizontal?"scrollWidth":"scrollHeight",o=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[r]:this.scrollElement[r]:0)-this.getSize();return Math.max(Math.min(o,e),0)},this.getOffsetForIndex=(e,s="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=Dn(this.getMeasurements()[e]);if(s==="auto")if(n.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)s="end";else if(n.start<=this.scrollOffset+this.options.scrollPaddingStart)s="start";else return[this.scrollOffset,s];const r=s==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(r,s),s]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&(clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:s="start",behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,s),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:s="auto",behavior:n}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[r,l]=this.getOffsetForIndex(e,s);this._scrollToOffset(r,{adjustments:void 0,behavior:n}),n!=="smooth"&&this.isDynamicMode()&&(this.scrollToIndexTimeoutId=setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.measureElementCache.has(this.options.getItemKey(e))){const[a]=this.getOffsetForIndex(e,l);Dp(a,this.scrollOffset)||this.scrollToIndex(e,{align:l,behavior:n})}else this.scrollToIndex(e,{align:l,behavior:n})}))},this.scrollBy=(e,{behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+e,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var e;const s=this.getMeasurements();let n;return s.length===0?n=this.options.paddingStart:n=this.options.lanes===1?((e=s[s.length-1])==null?void 0:e.end)??0:Math.max(...s.slice(-this.options.lanes).map(r=>r.end)),n-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(e,{adjustments:s,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(e=>{this.itemSizeCache.set(e.key,e.size)}),this.maybeNotify()}}const fh=(i,t,e,s)=>{for(;i<=t;){const n=(i+t)/2|0,r=e(n);if(r<s)i=n+1;else if(r>s)t=n-1;else return n}return i>0?i-1:0};function Kp({measurements:i,outerSize:t,scrollOffset:e}){const s=i.length-1,r=fh(0,s,o=>i[o].start,e);let l=r;for(;l<s&&i[l].end<e+t;)l++;return{startIndex:r,endIndex:l}}function qp(i){const t=new Up(rt(i)),e=aa(t),s=t._didMount();return ft(()=>rt(i).getScrollElement(),n=>{n&&t._willUpdate()},{immediate:!0}),ft(()=>rt(i),n=>{t.setOptions({...n,onChange:(r,l)=>{var o;al(e),(o=n.onChange)==null||o.call(n,r,l)}}),t._willUpdate(),al(e)},{immediate:!0}),Yh(s),e}function Zp(i){return qp(F(()=>({observeElementRect:Vp,observeElementOffset:jp,scrollToFn:Hp,...rt(i)})))}function jr(i,t,e){let s=W(e==null?void 0:e.value),n=F(()=>i.value!==void 0);return[F(()=>n.value?i.value:s.value),function(r){return n.value||(s.value=r),t==null?void 0:t(r)}]}let Yp=Symbol("headlessui.useid"),Qp=0;function de(){return Et(Yp,()=>`${++Qp}`)()}function j(i){var t;if(i==null||i.value==null)return null;let e=(t=i.value.$el)!=null?t:i.value;return e instanceof Node?e:null}function gt(i,t,...e){if(i in t){let n=t[i];return typeof n=="function"?n(...e):n}let s=new Error(`Tried to handle "${i}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(n=>`"${n}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,gt),s}var Xp=Object.defineProperty,Gp=(i,t,e)=>t in i?Xp(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,Lo=(i,t,e)=>(Gp(i,typeof t!="symbol"?t+"":t,e),e);let Jp=class{constructor(){Lo(this,"current",this.detect()),Lo(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},Ys=new Jp;function Qs(i){if(Ys.isServer)return null;if(i instanceof Node)return i.ownerDocument;if(i!=null&&i.hasOwnProperty("value")){let t=j(i);if(t)return t.ownerDocument}return document}let lr=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(i=>`${i}:not([tabindex='-1'])`).join(",");var te=(i=>(i[i.First=1]="First",i[i.Previous=2]="Previous",i[i.Next=4]="Next",i[i.Last=8]="Last",i[i.WrapAround=16]="WrapAround",i[i.NoScroll=32]="NoScroll",i))(te||{}),Ei=(i=>(i[i.Error=0]="Error",i[i.Overflow=1]="Overflow",i[i.Success=2]="Success",i[i.Underflow=3]="Underflow",i))(Ei||{}),tv=(i=>(i[i.Previous=-1]="Previous",i[i.Next=1]="Next",i))(tv||{});function ev(i=document.body){return i==null?[]:Array.from(i.querySelectorAll(lr)).sort((t,e)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(e.tabIndex||Number.MAX_SAFE_INTEGER)))}var Wr=(i=>(i[i.Strict=0]="Strict",i[i.Loose=1]="Loose",i))(Wr||{});function dh(i,t=0){var e;return i===((e=Qs(i))==null?void 0:e.body)?!1:gt(t,{0(){return i.matches(lr)},1(){let s=i;for(;s!==null;){if(s.matches(lr))return!0;s=s.parentElement}return!1}})}var iv=(i=>(i[i.Keyboard=0]="Keyboard",i[i.Mouse=1]="Mouse",i))(iv||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",i=>{i.metaKey||i.altKey||i.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",i=>{i.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:i.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let sv=["textarea","input"].join(",");function nv(i){var t,e;return(e=(t=i==null?void 0:i.matches)==null?void 0:t.call(i,sv))!=null?e:!1}function Te(i,t=e=>e){return i.slice().sort((e,s)=>{let n=t(e),r=t(s);if(n===null||r===null)return 0;let l=n.compareDocumentPosition(r);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function oi(i,t,{sorted:e=!0,relativeTo:s=null,skipElements:n=[]}={}){var r;let l=(r=Array.isArray(i)?i.length>0?i[0].ownerDocument:document:i==null?void 0:i.ownerDocument)!=null?r:document,o=Array.isArray(i)?e?Te(i):i:ev(i);n.length>0&&o.length>1&&(o=o.filter(m=>!n.includes(m))),s=s??l.activeElement;let a=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),h=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(s))-1;if(t&4)return Math.max(0,o.indexOf(s))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},c=0,f=o.length,d;do{if(c>=f||c+f<=0)return 0;let m=h+c;if(t&16)m=(m+f)%f;else{if(m<0)return 3;if(m>=f)return 1}d=o[m],d==null||d.focus(u),c+=a}while(d!==l.activeElement);return t&6&&nv(d)&&d.select(),2}function rv(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function lv(){return/Android/gi.test(window.navigator.userAgent)}function ph(){return rv()||lv()}function bs(i,t,e){Ys.isServer||jt(s=>{document.addEventListener(i,t,e),s(()=>document.removeEventListener(i,t,e))})}function ov(i,t,e){Ys.isServer||jt(s=>{window.addEventListener(i,t,e),s(()=>window.removeEventListener(i,t,e))})}function vh(i,t,e=F(()=>!0)){function s(r,l){if(!e.value||r.defaultPrevented)return;let o=l(r);if(o===null||!o.getRootNode().contains(o))return;let a=function h(u){return typeof u=="function"?h(u()):Array.isArray(u)||u instanceof Set?u:[u]}(i);for(let h of a){if(h===null)continue;let u=h instanceof HTMLElement?h:j(h);if(u!=null&&u.contains(o)||r.composed&&r.composedPath().includes(u))return}return!dh(o,Wr.Loose)&&o.tabIndex!==-1&&r.preventDefault(),t(r,o)}let n=W(null);bs("pointerdown",r=>{var l,o;e.value&&(n.value=((o=(l=r.composedPath)==null?void 0:l.call(r))==null?void 0:o[0])||r.target)},!0),bs("mousedown",r=>{var l,o;e.value&&(n.value=((o=(l=r.composedPath)==null?void 0:l.call(r))==null?void 0:o[0])||r.target)},!0),bs("click",r=>{ph()||n.value&&(s(r,()=>n.value),n.value=null)},!0),bs("touchend",r=>s(r,()=>r.target instanceof HTMLElement?r.target:null),!0),ov("blur",r=>s(r,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function ko(i,t){if(i)return i;let e=t??"button";if(typeof e=="string"&&e.toLowerCase()==="button")return"button"}function Xs(i,t){let e=W(ko(i.value.type,i.value.as));return xt(()=>{e.value=ko(i.value.type,i.value.as)}),jt(()=>{var s;e.value||j(t)&&j(t)instanceof HTMLButtonElement&&!((s=j(t))!=null&&s.hasAttribute("type"))&&(e.value="button")}),e}function Po(i){return[i.screenX,i.screenY]}function mh(){let i=W([-1,-1]);return{wasMoved(t){let e=Po(t);return i.value[0]===e[0]&&i.value[1]===e[1]?!1:(i.value=e,!0)},update(t){i.value=Po(t)}}}function av({container:i,accept:t,walk:e,enabled:s}){jt(()=>{let n=i.value;if(!n||s!==void 0&&!s.value)return;let r=Qs(i);if(!r)return;let l=Object.assign(a=>t(a),{acceptNode:t}),o=r.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,l,!1);for(;o.nextNode();)e(o.currentNode)})}var Ne=(i=>(i[i.None=0]="None",i[i.RenderStrategy=1]="RenderStrategy",i[i.Static=2]="Static",i))(Ne||{}),Ie=(i=>(i[i.Unmount=0]="Unmount",i[i.Hidden=1]="Hidden",i))(Ie||{});function Lt({visible:i=!0,features:t=0,ourProps:e,theirProps:s,...n}){var r;let l=bh(s,e),o=Object.assign(n,{props:l});if(i||t&2&&l.static)return Fn(o);if(t&1){let a=(r=l.unmount)==null||r?0:1;return gt(a,{0(){return null},1(){return Fn({...n,props:{...l,hidden:!0,style:{display:"none"}}})}})}return Fn(o)}function Fn({props:i,attrs:t,slots:e,slot:s,name:n}){var r,l;let{as:o,...a}=De(i,["unmount","static"]),h=(r=e.default)==null?void 0:r.call(e,s),u={};if(s){let c=!1,f=[];for(let[d,m]of Object.entries(s))typeof m=="boolean"&&(c=!0),m===!0&&f.push(d);c&&(u["data-headlessui-state"]=f.join(" "))}if(o==="template"){if(h=gh(h??[]),Object.keys(a).length>0||Object.keys(t).length>0){let[c,...f]=h??[];if(!hv(c)||f.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${n} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(a).concat(Object.keys(t)).map(p=>p.trim()).filter((p,x,y)=>y.indexOf(p)===x).sort((p,x)=>p.localeCompare(x)).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`));let d=bh((l=c.props)!=null?l:{},a,u),m=fe(c,d,!0);for(let p in d)p.startsWith("on")&&(m.props||(m.props={}),m.props[p]=d[p]);return m}return Array.isArray(h)&&h.length===1?h[0]:h}return Nt(o,Object.assign({},a,u),{default:()=>h})}function gh(i){return i.flatMap(t=>t.type===bt?gh(t.children):[t])}function bh(...i){if(i.length===0)return{};if(i.length===1)return i[0];let t={},e={};for(let s of i)for(let n in s)n.startsWith("on")&&typeof s[n]=="function"?(e[n]!=null||(e[n]=[]),e[n].push(s[n])):t[n]=s[n];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(e).map(s=>[s,void 0])));for(let s in e)Object.assign(t,{[s](n,...r){let l=e[s];for(let o of l){if(n instanceof Event&&n.defaultPrevented)return;o(n,...r)}}});return t}function Hr(i){let t=Object.assign({},i);for(let e in t)t[e]===void 0&&delete t[e];return t}function De(i,t=[]){let e=Object.assign({},i);for(let s of t)s in e&&delete e[s];return e}function hv(i){return i==null?!1:typeof i.type=="string"||typeof i.type=="object"||typeof i.type=="function"}var Gi=(i=>(i[i.None=1]="None",i[i.Focusable=2]="Focusable",i[i.Hidden=4]="Hidden",i))(Gi||{});let Gs=ct({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(i,{slots:t,attrs:e}){return()=>{var s;let{features:n,...r}=i,l={"aria-hidden":(n&2)===2?!0:(s=r["aria-hidden"])!=null?s:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return Lt({ourProps:l,theirProps:r,slot:{},attrs:e,slots:t,name:"Hidden"})}}}),yh=Symbol("Context");var Ot=(i=>(i[i.Open=1]="Open",i[i.Closed=2]="Closed",i[i.Closing=4]="Closing",i[i.Opening=8]="Opening",i))(Ot||{});function uv(){return Js()!==null}function Js(){return Et(yh,null)}function Ur(i){ie(yh,i)}var X=(i=>(i.Space=" ",i.Enter="Enter",i.Escape="Escape",i.Backspace="Backspace",i.Delete="Delete",i.ArrowLeft="ArrowLeft",i.ArrowUp="ArrowUp",i.ArrowRight="ArrowRight",i.ArrowDown="ArrowDown",i.Home="Home",i.End="End",i.PageUp="PageUp",i.PageDown="PageDown",i.Tab="Tab",i))(X||{});function cv(i){function t(){document.readyState!=="loading"&&(i(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let qe=[];cv(()=>{function i(t){t.target instanceof HTMLElement&&t.target!==document.body&&qe[0]!==t.target&&(qe.unshift(t.target),qe=qe.filter(e=>e!=null&&e.isConnected),qe.splice(10))}window.addEventListener("click",i,{capture:!0}),window.addEventListener("mousedown",i,{capture:!0}),window.addEventListener("focus",i,{capture:!0}),document.body.addEventListener("click",i,{capture:!0}),document.body.addEventListener("mousedown",i,{capture:!0}),document.body.addEventListener("focus",i,{capture:!0})});function fv(i){throw new Error("Unexpected object: "+i)}var ot=(i=>(i[i.First=0]="First",i[i.Previous=1]="Previous",i[i.Next=2]="Next",i[i.Last=3]="Last",i[i.Specific=4]="Specific",i[i.Nothing=5]="Nothing",i))(ot||{});function or(i,t){let e=t.resolveItems();if(e.length<=0)return null;let s=t.resolveActiveIndex(),n=s??-1;switch(i.focus){case 0:{for(let r=0;r<e.length;++r)if(!t.resolveDisabled(e[r],r,e))return r;return s}case 1:{n===-1&&(n=e.length);for(let r=n-1;r>=0;--r)if(!t.resolveDisabled(e[r],r,e))return r;return s}case 2:{for(let r=n+1;r<e.length;++r)if(!t.resolveDisabled(e[r],r,e))return r;return s}case 3:{for(let r=e.length-1;r>=0;--r)if(!t.resolveDisabled(e[r],r,e))return r;return s}case 4:{for(let r=0;r<e.length;++r)if(t.resolveId(e[r],r,e)===i.id)return r;return s}case 5:return null;default:fv(i)}}function wh(i){typeof queueMicrotask=="function"?queueMicrotask(i):Promise.resolve().then(i).catch(t=>setTimeout(()=>{throw t}))}function qi(){let i=[],t={addEventListener(e,s,n,r){return e.addEventListener(s,n,r),t.add(()=>e.removeEventListener(s,n,r))},requestAnimationFrame(...e){let s=requestAnimationFrame(...e);t.add(()=>cancelAnimationFrame(s))},nextFrame(...e){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...e)})},setTimeout(...e){let s=setTimeout(...e);t.add(()=>clearTimeout(s))},microTask(...e){let s={current:!0};return wh(()=>{s.current&&e[0]()}),t.add(()=>{s.current=!1})},style(e,s,n){let r=e.style.getPropertyValue(s);return Object.assign(e.style,{[s]:n}),this.add(()=>{Object.assign(e.style,{[s]:r})})},group(e){let s=qi();return e(s),this.add(()=>s.dispose())},add(e){return i.push(e),()=>{let s=i.indexOf(e);if(s>=0)for(let n of i.splice(s,1))n()}},dispose(){for(let e of i.splice(0))e()}};return t}function Kr(i={},t=null,e=[]){for(let[s,n]of Object.entries(i))xh(e,_h(t,s),n);return e}function _h(i,t){return i?i+"["+t+"]":t}function xh(i,t,e){if(Array.isArray(e))for(let[s,n]of e.entries())xh(i,_h(t,s.toString()),n);else e instanceof Date?i.push([t,e.toISOString()]):typeof e=="boolean"?i.push([t,e?"1":"0"]):typeof e=="string"?i.push([t,e]):typeof e=="number"?i.push([t,`${e}`]):e==null?i.push([t,""]):Kr(e,t,i)}function dv(i){var t,e;let s=(t=i==null?void 0:i.form)!=null?t:i.closest("form");if(s){for(let n of s.elements)if(n!==i&&(n.tagName==="INPUT"&&n.type==="submit"||n.tagName==="BUTTON"&&n.type==="submit"||n.nodeName==="INPUT"&&n.type==="image")){n.click();return}(e=s.requestSubmit)==null||e.call(s)}}var pv={};function vv(i,t){return i===t}var mv=(i=>(i[i.Open=0]="Open",i[i.Closed=1]="Closed",i))(mv||{}),gv=(i=>(i[i.Single=0]="Single",i[i.Multi=1]="Multi",i))(gv||{}),bv=(i=>(i[i.Pointer=0]="Pointer",i[i.Focus=1]="Focus",i[i.Other=2]="Other",i))(bv||{});let Sh=Symbol("ComboboxContext");function xi(i){let t=Et(Sh,null);if(t===null){let e=new Error(`<${i} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,xi),e}return t}let Ch=Symbol("VirtualContext"),yv=ct({name:"VirtualProvider",setup(i,{slots:t}){let e=xi("VirtualProvider"),s=F(()=>{let o=j(e.optionsRef);if(!o)return{start:0,end:0};let a=window.getComputedStyle(o);return{start:parseFloat(a.paddingBlockStart||a.paddingTop),end:parseFloat(a.paddingBlockEnd||a.paddingBottom)}}),n=Zp(F(()=>({scrollPaddingStart:s.value.start,scrollPaddingEnd:s.value.end,count:e.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return j(e.optionsRef)},overscan:12}))),r=F(()=>{var o;return(o=e.virtual.value)==null?void 0:o.options}),l=W(0);return ft([r],()=>{l.value+=1}),ie(Ch,e.virtual.value?n:null),()=>[Nt("div",{style:{position:"relative",width:"100%",height:`${n.value.getTotalSize()}px`},ref:o=>{if(o){if(typeof process<"u"&&pv.JEST_WORKER_ID!==void 0||e.activationTrigger.value===0)return;e.activeOptionIndex.value!==null&&e.virtual.value.options.length>e.activeOptionIndex.value&&n.value.scrollToIndex(e.activeOptionIndex.value)}}},n.value.getVirtualItems().map(o=>fe(t.default({option:e.virtual.value.options[o.index],open:e.comboboxState.value===0})[0],{key:`${l.value}-${o.index}`,"data-index":o.index,"aria-setsize":e.virtual.value.options.length,"aria-posinset":o.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${o.start}px)`,overflowAnchor:"none"}})))]}}),wv=ct({name:"Combobox",emits:{"update:modelValue":i=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(i,{slots:t,attrs:e,emit:s}){let n=W(1),r=W(null),l=W(null),o=W(null),a=W(null),h=W({static:!1,hold:!1}),u=W([]),c=W(null),f=W(2),d=W(!1);function m(E=A=>A){let A=c.value!==null?u.value[c.value]:null,L=E(u.value.slice()),B=L.length>0&&L[0].dataRef.order.value!==null?L.sort((et,G)=>et.dataRef.order.value-G.dataRef.order.value):Te(L,et=>j(et.dataRef.domRef)),Y=A?B.indexOf(A):null;return Y===-1&&(Y=null),{options:B,activeOptionIndex:Y}}let p=F(()=>i.multiple?1:0),x=F(()=>i.nullable),[y,_]=jr(F(()=>i.modelValue),E=>s("update:modelValue",E),F(()=>i.defaultValue)),w=F(()=>y.value===void 0?gt(p.value,{1:[],0:void 0}):y.value),b=null,M=null;function O(E){return gt(p.value,{0(){return _==null?void 0:_(E)},1:()=>{let A=q(S.value.value).slice(),L=q(E),B=A.findIndex(Y=>S.compare(L,q(Y)));return B===-1?A.push(L):A.splice(B,1),_==null?void 0:_(A)}})}let N=F(()=>{});ft([N],([E],[A])=>{if(S.virtual.value&&E&&A&&c.value!==null){let L=E.indexOf(A[c.value]);L!==-1?c.value=L:c.value=null}});let S={comboboxState:n,value:w,mode:p,compare(E,A){if(typeof i.by=="string"){let L=i.by;return(E==null?void 0:E[L])===(A==null?void 0:A[L])}return i.by===null?vv(E,A):i.by(E,A)},calculateIndex(E){return S.virtual.value?i.by===null?S.virtual.value.options.indexOf(E):S.virtual.value.options.findIndex(A=>S.compare(A,E)):u.value.findIndex(A=>S.compare(A.dataRef.value,E))},defaultValue:F(()=>i.defaultValue),nullable:x,immediate:F(()=>!1),virtual:F(()=>null),inputRef:l,labelRef:r,buttonRef:o,optionsRef:a,disabled:F(()=>i.disabled),options:u,change(E){_(E)},activeOptionIndex:F(()=>{if(d.value&&c.value===null&&(S.virtual.value?S.virtual.value.options.length>0:u.value.length>0)){if(S.virtual.value){let A=S.virtual.value.options.findIndex(L=>{var B;return!((B=S.virtual.value)!=null&&B.disabled(L))});if(A!==-1)return A}let E=u.value.findIndex(A=>!A.dataRef.disabled);if(E!==-1)return E}return c.value}),activationTrigger:f,optionsPropsRef:h,closeCombobox(){d.value=!1,!i.disabled&&n.value!==1&&(n.value=1,c.value=null)},openCombobox(){if(d.value=!0,!i.disabled&&n.value!==0){if(S.value.value){let E=S.calculateIndex(S.value.value);E!==-1&&(c.value=E)}n.value=0}},setActivationTrigger(E){f.value=E},goToOption(E,A,L){d.value=!1,b!==null&&cancelAnimationFrame(b),b=requestAnimationFrame(()=>{if(i.disabled||a.value&&!h.value.static&&n.value===1)return;if(S.virtual.value){c.value=E===ot.Specific?A:or({focus:E},{resolveItems:()=>S.virtual.value.options,resolveActiveIndex:()=>{var et,G;return(G=(et=S.activeOptionIndex.value)!=null?et:S.virtual.value.options.findIndex(lt=>{var tt;return!((tt=S.virtual.value)!=null&&tt.disabled(lt))}))!=null?G:null},resolveDisabled:et=>S.virtual.value.disabled(et),resolveId(){throw new Error("Function not implemented.")}}),f.value=L??2;return}let B=m();if(B.activeOptionIndex===null){let et=B.options.findIndex(G=>!G.dataRef.disabled);et!==-1&&(B.activeOptionIndex=et)}let Y=E===ot.Specific?A:or({focus:E},{resolveItems:()=>B.options,resolveActiveIndex:()=>B.activeOptionIndex,resolveId:et=>et.id,resolveDisabled:et=>et.dataRef.disabled});c.value=Y,f.value=L??2,u.value=B.options})},selectOption(E){let A=u.value.find(B=>B.id===E);if(!A)return;let{dataRef:L}=A;O(L.value)},selectActiveOption(){if(S.activeOptionIndex.value!==null){if(S.virtual.value)O(S.virtual.value.options[S.activeOptionIndex.value]);else{let{dataRef:E}=u.value[S.activeOptionIndex.value];O(E.value)}S.goToOption(ot.Specific,S.activeOptionIndex.value)}},registerOption(E,A){let L=Zi({id:E,dataRef:A});if(S.virtual.value){u.value.push(L);return}M&&cancelAnimationFrame(M);let B=m(Y=>(Y.push(L),Y));c.value===null&&S.isSelected(A.value.value)&&(B.activeOptionIndex=B.options.indexOf(L)),u.value=B.options,c.value=B.activeOptionIndex,f.value=2,B.options.some(Y=>!j(Y.dataRef.domRef))&&(M=requestAnimationFrame(()=>{let Y=m();u.value=Y.options,c.value=Y.activeOptionIndex}))},unregisterOption(E,A){if(b!==null&&cancelAnimationFrame(b),A&&(d.value=!0),S.virtual.value){u.value=u.value.filter(B=>B.id!==E);return}let L=m(B=>{let Y=B.findIndex(et=>et.id===E);return Y!==-1&&B.splice(Y,1),B});u.value=L.options,c.value=L.activeOptionIndex,f.value=2},isSelected(E){return gt(p.value,{0:()=>S.compare(q(S.value.value),q(E)),1:()=>q(S.value.value).some(A=>S.compare(q(A),q(E)))})},isActive(E){return c.value===S.calculateIndex(E)}};vh([l,o,a],()=>S.closeCombobox(),F(()=>n.value===0)),ie(Sh,S),Ur(F(()=>gt(n.value,{0:Ot.Open,1:Ot.Closed})));let H=F(()=>{var E;return(E=j(l))==null?void 0:E.closest("form")});return xt(()=>{ft([H],()=>{if(!H.value||i.defaultValue===void 0)return;function E(){S.change(i.defaultValue)}return H.value.addEventListener("reset",E),()=>{var A;(A=H.value)==null||A.removeEventListener("reset",E)}},{immediate:!0})}),()=>{var E,A,L;let{name:B,disabled:Y,form:et,...G}=i,lt={open:n.value===0,disabled:Y,activeIndex:S.activeOptionIndex.value,activeOption:S.activeOptionIndex.value===null?null:S.virtual.value?S.virtual.value.options[(E=S.activeOptionIndex.value)!=null?E:0]:(L=(A=S.options.value[S.activeOptionIndex.value])==null?void 0:A.dataRef.value)!=null?L:null,value:w.value};return Nt(bt,[...B!=null&&w.value!=null?Kr({[B]:w.value}).map(([tt,Dt])=>Nt(Gs,Hr({features:Gi.Hidden,key:tt,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:et,name:tt,value:Dt}))):[],Lt({theirProps:{...e,...De(G,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:lt,slots:t,attrs:e,name:"Combobox"})])}}}),_v=ct({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(i,{attrs:t,slots:e,expose:s}){var n;let r=(n=i.id)!=null?n:`headlessui-combobox-button-${de()}`,l=xi("ComboboxButton");s({el:l.buttonRef,$el:l.buttonRef});function o(u){l.disabled.value||(l.comboboxState.value===0?l.closeCombobox():(u.preventDefault(),l.openCombobox()),Pt(()=>{var c;return(c=j(l.inputRef))==null?void 0:c.focus({preventScroll:!0})}))}function a(u){switch(u.key){case X.ArrowDown:u.preventDefault(),u.stopPropagation(),l.comboboxState.value===1&&l.openCombobox(),Pt(()=>{var c;return(c=l.inputRef.value)==null?void 0:c.focus({preventScroll:!0})});return;case X.ArrowUp:u.preventDefault(),u.stopPropagation(),l.comboboxState.value===1&&(l.openCombobox(),Pt(()=>{l.value.value||l.goToOption(ot.Last)})),Pt(()=>{var c;return(c=l.inputRef.value)==null?void 0:c.focus({preventScroll:!0})});return;case X.Escape:if(l.comboboxState.value!==0)return;u.preventDefault(),l.optionsRef.value&&!l.optionsPropsRef.value.static&&u.stopPropagation(),l.closeCombobox(),Pt(()=>{var c;return(c=l.inputRef.value)==null?void 0:c.focus({preventScroll:!0})});return}}let h=Xs(F(()=>({as:i.as,type:t.type})),l.buttonRef);return()=>{var u,c;let f={open:l.comboboxState.value===0,disabled:l.disabled.value,value:l.value.value},{...d}=i,m={ref:l.buttonRef,id:r,type:h.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(u=j(l.optionsRef))==null?void 0:u.id,"aria-expanded":l.comboboxState.value===0,"aria-labelledby":l.labelRef.value?[(c=j(l.labelRef))==null?void 0:c.id,r].join(" "):void 0,disabled:l.disabled.value===!0?!0:void 0,onKeydown:a,onClick:o};return Lt({ourProps:m,theirProps:d,slot:f,attrs:t,slots:e,name:"ComboboxButton"})}}}),xv=ct({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:i=>!0},setup(i,{emit:t,attrs:e,slots:s,expose:n}){var r;let l=(r=i.id)!=null?r:`headlessui-combobox-input-${de()}`,o=xi("ComboboxInput"),a=F(()=>Qs(j(o.inputRef))),h={value:!1};n({el:o.inputRef,$el:o.inputRef});function u(){o.change(null);let b=j(o.optionsRef);b&&(b.scrollTop=0),o.goToOption(ot.Nothing)}let c=F(()=>{var b;let M=o.value.value;return j(o.inputRef)?typeof i.displayValue<"u"&&M!==void 0?(b=i.displayValue(M))!=null?b:"":typeof M=="string"?M:"":""});xt(()=>{ft([c,o.comboboxState,a],([b,M],[O,N])=>{if(h.value)return;let S=j(o.inputRef);S&&((N===0&&M===1||b!==O)&&(S.value=b),requestAnimationFrame(()=>{var H;if(h.value||!S||((H=a.value)==null?void 0:H.activeElement)!==S)return;let{selectionStart:E,selectionEnd:A}=S;Math.abs((A??0)-(E??0))===0&&E===0&&S.setSelectionRange(S.value.length,S.value.length)}))},{immediate:!0}),ft([o.comboboxState],([b],[M])=>{if(b===0&&M===1){if(h.value)return;let O=j(o.inputRef);if(!O)return;let N=O.value,{selectionStart:S,selectionEnd:H,selectionDirection:E}=O;O.value="",O.value=N,E!==null?O.setSelectionRange(S,H,E):O.setSelectionRange(S,H)}})});let f=W(!1);function d(){f.value=!0}function m(){qi().nextFrame(()=>{f.value=!1})}function p(b){switch(h.value=!0,b.key){case X.Enter:if(h.value=!1,o.comboboxState.value!==0||f.value)return;if(b.preventDefault(),b.stopPropagation(),o.activeOptionIndex.value===null){o.closeCombobox();return}o.selectActiveOption(),o.mode.value===0&&o.closeCombobox();break;case X.ArrowDown:return h.value=!1,b.preventDefault(),b.stopPropagation(),gt(o.comboboxState.value,{0:()=>o.goToOption(ot.Next),1:()=>o.openCombobox()});case X.ArrowUp:return h.value=!1,b.preventDefault(),b.stopPropagation(),gt(o.comboboxState.value,{0:()=>o.goToOption(ot.Previous),1:()=>{o.openCombobox(),Pt(()=>{o.value.value||o.goToOption(ot.Last)})}});case X.Home:if(b.shiftKey)break;return h.value=!1,b.preventDefault(),b.stopPropagation(),o.goToOption(ot.First);case X.PageUp:return h.value=!1,b.preventDefault(),b.stopPropagation(),o.goToOption(ot.First);case X.End:if(b.shiftKey)break;return h.value=!1,b.preventDefault(),b.stopPropagation(),o.goToOption(ot.Last);case X.PageDown:return h.value=!1,b.preventDefault(),b.stopPropagation(),o.goToOption(ot.Last);case X.Escape:if(h.value=!1,o.comboboxState.value!==0)return;b.preventDefault(),o.optionsRef.value&&!o.optionsPropsRef.value.static&&b.stopPropagation(),o.nullable.value&&o.mode.value===0&&o.value.value===null&&u(),o.closeCombobox();break;case X.Tab:if(h.value=!1,o.comboboxState.value!==0)return;o.mode.value===0&&o.activationTrigger.value!==1&&o.selectActiveOption(),o.closeCombobox();break}}function x(b){t("change",b),o.nullable.value&&o.mode.value===0&&b.target.value===""&&u(),o.openCombobox()}function y(b){var M,O,N;let S=(M=b.relatedTarget)!=null?M:qe.find(H=>H!==b.currentTarget);if(h.value=!1,!((O=j(o.optionsRef))!=null&&O.contains(S))&&!((N=j(o.buttonRef))!=null&&N.contains(S))&&o.comboboxState.value===0)return b.preventDefault(),o.mode.value===0&&(o.nullable.value&&o.value.value===null?u():o.activationTrigger.value!==1&&o.selectActiveOption()),o.closeCombobox()}function _(b){var M,O,N;let S=(M=b.relatedTarget)!=null?M:qe.find(H=>H!==b.currentTarget);(O=j(o.buttonRef))!=null&&O.contains(S)||(N=j(o.optionsRef))!=null&&N.contains(S)||o.disabled.value||o.immediate.value&&o.comboboxState.value!==0&&(o.openCombobox(),qi().nextFrame(()=>{o.setActivationTrigger(1)}))}let w=F(()=>{var b,M,O,N;return(N=(O=(M=i.defaultValue)!=null?M:o.defaultValue.value!==void 0?(b=i.displayValue)==null?void 0:b.call(i,o.defaultValue.value):null)!=null?O:o.defaultValue.value)!=null?N:""});return()=>{var b,M,O,N,S,H,E;let A={open:o.comboboxState.value===0},{displayValue:L,onChange:B,...Y}=i,et={"aria-controls":(b=o.optionsRef.value)==null?void 0:b.id,"aria-expanded":o.comboboxState.value===0,"aria-activedescendant":o.activeOptionIndex.value===null?void 0:o.virtual.value?(M=o.options.value.find(G=>!o.virtual.value.disabled(G.dataRef.value)&&o.compare(G.dataRef.value,o.virtual.value.options[o.activeOptionIndex.value])))==null?void 0:M.id:(O=o.options.value[o.activeOptionIndex.value])==null?void 0:O.id,"aria-labelledby":(H=(N=j(o.labelRef))==null?void 0:N.id)!=null?H:(S=j(o.buttonRef))==null?void 0:S.id,"aria-autocomplete":"list",id:l,onCompositionstart:d,onCompositionend:m,onKeydown:p,onInput:x,onFocus:_,onBlur:y,role:"combobox",type:(E=e.type)!=null?E:"text",tabIndex:0,ref:o.inputRef,defaultValue:w.value,disabled:o.disabled.value===!0?!0:void 0};return Lt({ourProps:et,theirProps:Y,slot:A,attrs:e,slots:s,features:Ne.RenderStrategy|Ne.Static,name:"ComboboxInput"})}}}),Sv=ct({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(i,{attrs:t,slots:e,expose:s}){let n=xi("ComboboxOptions"),r=`headlessui-combobox-options-${de()}`;s({el:n.optionsRef,$el:n.optionsRef}),jt(()=>{n.optionsPropsRef.value.static=i.static}),jt(()=>{n.optionsPropsRef.value.hold=i.hold});let l=Js(),o=F(()=>l!==null?(l.value&Ot.Open)===Ot.Open:n.comboboxState.value===0);return av({container:F(()=>j(n.optionsRef)),enabled:F(()=>n.comboboxState.value===0),accept(a){return a.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}}),()=>{var a,h,u;let c={open:n.comboboxState.value===0},f={"aria-labelledby":(u=(a=j(n.labelRef))==null?void 0:a.id)!=null?u:(h=j(n.buttonRef))==null?void 0:h.id,id:r,ref:n.optionsRef,role:"listbox","aria-multiselectable":n.mode.value===1?!0:void 0},d=De(i,["hold"]);return Lt({ourProps:f,theirProps:d,slot:c,attrs:t,slots:n.virtual.value&&n.comboboxState.value===0?{...e,default:()=>[Nt(yv,{},e.default)]}:e,features:Ne.RenderStrategy|Ne.Static,visible:o.value,name:"ComboboxOptions"})}}}),Cv=ct({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(i,{slots:t,attrs:e,expose:s}){let n=xi("ComboboxOption"),r=`headlessui-combobox-option-${de()}`,l=W(null);s({el:l,$el:l});let o=F(()=>{var y;return n.virtual.value?n.activeOptionIndex.value===n.calculateIndex(i.value):n.activeOptionIndex.value===null?!1:((y=n.options.value[n.activeOptionIndex.value])==null?void 0:y.id)===r}),a=F(()=>n.isSelected(i.value)),h=Et(Ch,null),u=F(()=>({disabled:i.disabled,value:i.value,domRef:l,order:F(()=>i.order)}));xt(()=>n.registerOption(r,u)),Ae(()=>n.unregisterOption(r,o.value)),jt(()=>{let y=j(l);y&&(h==null||h.value.measureElement(y))}),jt(()=>{n.comboboxState.value===0&&o.value&&(n.virtual.value||n.activationTrigger.value!==0&&Pt(()=>{var y,_;return(_=(y=j(l))==null?void 0:y.scrollIntoView)==null?void 0:_.call(y,{block:"nearest"})}))});function c(y){var _;if(i.disabled||(_=n.virtual.value)!=null&&_.disabled(i.value))return y.preventDefault();n.selectOption(r),ph()||requestAnimationFrame(()=>{var w;return(w=j(n.inputRef))==null?void 0:w.focus({preventScroll:!0})}),n.mode.value===0&&requestAnimationFrame(()=>n.closeCombobox())}function f(){var y;if(i.disabled||(y=n.virtual.value)!=null&&y.disabled(i.value))return n.goToOption(ot.Nothing);let _=n.calculateIndex(i.value);n.goToOption(ot.Specific,_)}let d=mh();function m(y){d.update(y)}function p(y){var _;if(!d.wasMoved(y)||i.disabled||(_=n.virtual.value)!=null&&_.disabled(i.value)||o.value)return;let w=n.calculateIndex(i.value);n.goToOption(ot.Specific,w,0)}function x(y){var _;d.wasMoved(y)&&(i.disabled||(_=n.virtual.value)!=null&&_.disabled(i.value)||o.value&&(n.optionsPropsRef.value.hold||n.goToOption(ot.Nothing)))}return()=>{let{disabled:y}=i,_={active:o.value,selected:a.value,disabled:y},w={id:r,ref:l,role:"option",tabIndex:y===!0?void 0:-1,"aria-disabled":y===!0?!0:void 0,"aria-selected":a.value,disabled:void 0,onClick:c,onFocus:f,onPointerenter:m,onMouseenter:m,onPointermove:p,onMousemove:p,onPointerleave:x,onMouseleave:x},b=De(i,["order","value"]);return Lt({ourProps:w,theirProps:b,slot:_,attrs:e,slots:t,name:"ComboboxOption"})}}}),$o=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function No(i){var t,e;let s=(t=i.innerText)!=null?t:"",n=i.cloneNode(!0);if(!(n instanceof HTMLElement))return s;let r=!1;for(let o of n.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))o.remove(),r=!0;let l=r?(e=n.innerText)!=null?e:"":s;return $o.test(l)&&(l=l.replace($o,"")),l}function Mv(i){let t=i.getAttribute("aria-label");if(typeof t=="string")return t.trim();let e=i.getAttribute("aria-labelledby");if(e){let s=e.split(" ").map(n=>{let r=document.getElementById(n);if(r){let l=r.getAttribute("aria-label");return typeof l=="string"?l.trim():No(r).trim()}return null}).filter(Boolean);if(s.length>0)return s.join(", ")}return No(i).trim()}function Ov(i){let t=W(""),e=W("");return()=>{let s=j(i);if(!s)return"";let n=s.innerText;if(t.value===n)return e.value;let r=Mv(s).trim().toLowerCase();return t.value=n,e.value=r,r}}function Ev(i,t){return i===t}var Tv=(i=>(i[i.Open=0]="Open",i[i.Closed=1]="Closed",i))(Tv||{}),zv=(i=>(i[i.Single=0]="Single",i[i.Multi=1]="Multi",i))(zv||{}),Iv=(i=>(i[i.Pointer=0]="Pointer",i[i.Other=1]="Other",i))(Iv||{});function Rv(i){requestAnimationFrame(()=>requestAnimationFrame(i))}let Mh=Symbol("ListboxContext");function tn(i){let t=Et(Mh,null);if(t===null){let e=new Error(`<${i} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,tn),e}return t}let Lv=ct({name:"Listbox",emits:{"update:modelValue":i=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Ev},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(i,{slots:t,attrs:e,emit:s}){let n=W(1),r=W(null),l=W(null),o=W(null),a=W([]),h=W(""),u=W(null),c=W(1);function f(w=b=>b){let b=u.value!==null?a.value[u.value]:null,M=Te(w(a.value.slice()),N=>j(N.dataRef.domRef)),O=b?M.indexOf(b):null;return O===-1&&(O=null),{options:M,activeOptionIndex:O}}let d=F(()=>i.multiple?1:0),[m,p]=jr(F(()=>i.modelValue),w=>s("update:modelValue",w),F(()=>i.defaultValue)),x=F(()=>m.value===void 0?gt(d.value,{1:[],0:void 0}):m.value),y={listboxState:n,value:x,mode:d,compare(w,b){if(typeof i.by=="string"){let M=i.by;return(w==null?void 0:w[M])===(b==null?void 0:b[M])}return i.by(w,b)},orientation:F(()=>i.horizontal?"horizontal":"vertical"),labelRef:r,buttonRef:l,optionsRef:o,disabled:F(()=>i.disabled),options:a,searchQuery:h,activeOptionIndex:u,activationTrigger:c,closeListbox(){i.disabled||n.value!==1&&(n.value=1,u.value=null)},openListbox(){i.disabled||n.value!==0&&(n.value=0)},goToOption(w,b,M){if(i.disabled||n.value===1)return;let O=f(),N=or(w===ot.Specific?{focus:ot.Specific,id:b}:{focus:w},{resolveItems:()=>O.options,resolveActiveIndex:()=>O.activeOptionIndex,resolveId:S=>S.id,resolveDisabled:S=>S.dataRef.disabled});h.value="",u.value=N,c.value=M??1,a.value=O.options},search(w){if(i.disabled||n.value===1)return;let b=h.value!==""?0:1;h.value+=w.toLowerCase();let M=(u.value!==null?a.value.slice(u.value+b).concat(a.value.slice(0,u.value+b)):a.value).find(N=>N.dataRef.textValue.startsWith(h.value)&&!N.dataRef.disabled),O=M?a.value.indexOf(M):-1;O===-1||O===u.value||(u.value=O,c.value=1)},clearSearch(){i.disabled||n.value!==1&&h.value!==""&&(h.value="")},registerOption(w,b){let M=f(O=>[...O,{id:w,dataRef:b}]);a.value=M.options,u.value=M.activeOptionIndex},unregisterOption(w){let b=f(M=>{let O=M.findIndex(N=>N.id===w);return O!==-1&&M.splice(O,1),M});a.value=b.options,u.value=b.activeOptionIndex,c.value=1},theirOnChange(w){i.disabled||p(w)},select(w){i.disabled||p(gt(d.value,{0:()=>w,1:()=>{let b=q(y.value.value).slice(),M=q(w),O=b.findIndex(N=>y.compare(M,q(N)));return O===-1?b.push(M):b.splice(O,1),b}}))}};vh([l,o],(w,b)=>{var M;y.closeListbox(),dh(b,Wr.Loose)||(w.preventDefault(),(M=j(l))==null||M.focus())},F(()=>n.value===0)),ie(Mh,y),Ur(F(()=>gt(n.value,{0:Ot.Open,1:Ot.Closed})));let _=F(()=>{var w;return(w=j(l))==null?void 0:w.closest("form")});return xt(()=>{ft([_],()=>{if(!_.value||i.defaultValue===void 0)return;function w(){y.theirOnChange(i.defaultValue)}return _.value.addEventListener("reset",w),()=>{var b;(b=_.value)==null||b.removeEventListener("reset",w)}},{immediate:!0})}),()=>{let{name:w,modelValue:b,disabled:M,form:O,...N}=i,S={open:n.value===0,disabled:M,value:x.value};return Nt(bt,[...w!=null&&x.value!=null?Kr({[w]:x.value}).map(([H,E])=>Nt(Gs,Hr({features:Gi.Hidden,key:H,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:O,name:H,value:E}))):[],Lt({ourProps:{},theirProps:{...e,...De(N,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:S,slots:t,attrs:e,name:"Listbox"})])}}}),kv=ct({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(i,{attrs:t,slots:e,expose:s}){var n;let r=(n=i.id)!=null?n:`headlessui-listbox-button-${de()}`,l=tn("ListboxButton");s({el:l.buttonRef,$el:l.buttonRef});function o(c){switch(c.key){case X.Space:case X.Enter:case X.ArrowDown:c.preventDefault(),l.openListbox(),Pt(()=>{var f;(f=j(l.optionsRef))==null||f.focus({preventScroll:!0}),l.value.value||l.goToOption(ot.First)});break;case X.ArrowUp:c.preventDefault(),l.openListbox(),Pt(()=>{var f;(f=j(l.optionsRef))==null||f.focus({preventScroll:!0}),l.value.value||l.goToOption(ot.Last)});break}}function a(c){switch(c.key){case X.Space:c.preventDefault();break}}function h(c){l.disabled.value||(l.listboxState.value===0?(l.closeListbox(),Pt(()=>{var f;return(f=j(l.buttonRef))==null?void 0:f.focus({preventScroll:!0})})):(c.preventDefault(),l.openListbox(),Rv(()=>{var f;return(f=j(l.optionsRef))==null?void 0:f.focus({preventScroll:!0})})))}let u=Xs(F(()=>({as:i.as,type:t.type})),l.buttonRef);return()=>{var c,f;let d={open:l.listboxState.value===0,disabled:l.disabled.value,value:l.value.value},{...m}=i,p={ref:l.buttonRef,id:r,type:u.value,"aria-haspopup":"listbox","aria-controls":(c=j(l.optionsRef))==null?void 0:c.id,"aria-expanded":l.listboxState.value===0,"aria-labelledby":l.labelRef.value?[(f=j(l.labelRef))==null?void 0:f.id,r].join(" "):void 0,disabled:l.disabled.value===!0?!0:void 0,onKeydown:o,onKeyup:a,onClick:h};return Lt({ourProps:p,theirProps:m,slot:d,attrs:t,slots:e,name:"ListboxButton"})}}}),Pv=ct({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(i,{attrs:t,slots:e,expose:s}){var n;let r=(n=i.id)!=null?n:`headlessui-listbox-options-${de()}`,l=tn("ListboxOptions"),o=W(null);s({el:l.optionsRef,$el:l.optionsRef});function a(c){switch(o.value&&clearTimeout(o.value),c.key){case X.Space:if(l.searchQuery.value!=="")return c.preventDefault(),c.stopPropagation(),l.search(c.key);case X.Enter:if(c.preventDefault(),c.stopPropagation(),l.activeOptionIndex.value!==null){let f=l.options.value[l.activeOptionIndex.value];l.select(f.dataRef.value)}l.mode.value===0&&(l.closeListbox(),Pt(()=>{var f;return(f=j(l.buttonRef))==null?void 0:f.focus({preventScroll:!0})}));break;case gt(l.orientation.value,{vertical:X.ArrowDown,horizontal:X.ArrowRight}):return c.preventDefault(),c.stopPropagation(),l.goToOption(ot.Next);case gt(l.orientation.value,{vertical:X.ArrowUp,horizontal:X.ArrowLeft}):return c.preventDefault(),c.stopPropagation(),l.goToOption(ot.Previous);case X.Home:case X.PageUp:return c.preventDefault(),c.stopPropagation(),l.goToOption(ot.First);case X.End:case X.PageDown:return c.preventDefault(),c.stopPropagation(),l.goToOption(ot.Last);case X.Escape:c.preventDefault(),c.stopPropagation(),l.closeListbox(),Pt(()=>{var f;return(f=j(l.buttonRef))==null?void 0:f.focus({preventScroll:!0})});break;case X.Tab:c.preventDefault(),c.stopPropagation();break;default:c.key.length===1&&(l.search(c.key),o.value=setTimeout(()=>l.clearSearch(),350));break}}let h=Js(),u=F(()=>h!==null?(h.value&Ot.Open)===Ot.Open:l.listboxState.value===0);return()=>{var c,f;let d={open:l.listboxState.value===0},{...m}=i,p={"aria-activedescendant":l.activeOptionIndex.value===null||(c=l.options.value[l.activeOptionIndex.value])==null?void 0:c.id,"aria-multiselectable":l.mode.value===1?!0:void 0,"aria-labelledby":(f=j(l.buttonRef))==null?void 0:f.id,"aria-orientation":l.orientation.value,id:r,onKeydown:a,role:"listbox",tabIndex:0,ref:l.optionsRef};return Lt({ourProps:p,theirProps:m,slot:d,attrs:t,slots:e,features:Ne.RenderStrategy|Ne.Static,visible:u.value,name:"ListboxOptions"})}}}),$v=ct({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(i,{slots:t,attrs:e,expose:s}){var n;let r=(n=i.id)!=null?n:`headlessui-listbox-option-${de()}`,l=tn("ListboxOption"),o=W(null);s({el:o,$el:o});let a=F(()=>l.activeOptionIndex.value!==null?l.options.value[l.activeOptionIndex.value].id===r:!1),h=F(()=>gt(l.mode.value,{0:()=>l.compare(q(l.value.value),q(i.value)),1:()=>q(l.value.value).some(w=>l.compare(q(w),q(i.value)))})),u=F(()=>gt(l.mode.value,{1:()=>{var w;let b=q(l.value.value);return((w=l.options.value.find(M=>b.some(O=>l.compare(q(O),q(M.dataRef.value)))))==null?void 0:w.id)===r},0:()=>h.value})),c=Ov(o),f=F(()=>({disabled:i.disabled,value:i.value,get textValue(){return c()},domRef:o}));xt(()=>l.registerOption(r,f)),Ae(()=>l.unregisterOption(r)),xt(()=>{ft([l.listboxState,h],()=>{l.listboxState.value===0&&h.value&&gt(l.mode.value,{1:()=>{u.value&&l.goToOption(ot.Specific,r)},0:()=>{l.goToOption(ot.Specific,r)}})},{immediate:!0})}),jt(()=>{l.listboxState.value===0&&a.value&&l.activationTrigger.value!==0&&Pt(()=>{var w,b;return(b=(w=j(o))==null?void 0:w.scrollIntoView)==null?void 0:b.call(w,{block:"nearest"})})});function d(w){if(i.disabled)return w.preventDefault();l.select(i.value),l.mode.value===0&&(l.closeListbox(),Pt(()=>{var b;return(b=j(l.buttonRef))==null?void 0:b.focus({preventScroll:!0})}))}function m(){if(i.disabled)return l.goToOption(ot.Nothing);l.goToOption(ot.Specific,r)}let p=mh();function x(w){p.update(w)}function y(w){p.wasMoved(w)&&(i.disabled||a.value||l.goToOption(ot.Specific,r,0))}function _(w){p.wasMoved(w)&&(i.disabled||a.value&&l.goToOption(ot.Nothing))}return()=>{let{disabled:w}=i,b={active:a.value,selected:h.value,disabled:w},{value:M,disabled:O,...N}=i,S={id:r,ref:o,role:"option",tabIndex:w===!0?void 0:-1,"aria-disabled":w===!0?!0:void 0,"aria-selected":h.value,disabled:void 0,onClick:d,onFocus:m,onPointerenter:x,onMouseenter:x,onPointermove:y,onMousemove:y,onPointerleave:_,onMouseleave:_};return Lt({ourProps:S,theirProps:N,slot:b,attrs:e,slots:t,name:"ListboxOption"})}}}),Nv=Symbol("GroupContext"),Av=ct({name:"Switch",emits:{"update:modelValue":i=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null}},inheritAttrs:!1,setup(i,{emit:t,attrs:e,slots:s,expose:n}){var r;let l=(r=i.id)!=null?r:`headlessui-switch-${de()}`,o=Et(Nv,null),[a,h]=jr(F(()=>i.modelValue),_=>t("update:modelValue",_),F(()=>i.defaultChecked));function u(){h(!a.value)}let c=W(null),f=o===null?c:o.switchRef,d=Xs(F(()=>({as:i.as,type:e.type})),f);n({el:f,$el:f});function m(_){_.preventDefault(),u()}function p(_){_.key===X.Space?(_.preventDefault(),u()):_.key===X.Enter&&dv(_.currentTarget)}function x(_){_.preventDefault()}let y=F(()=>{var _,w;return(w=(_=j(f))==null?void 0:_.closest)==null?void 0:w.call(_,"form")});return xt(()=>{ft([y],()=>{if(!y.value||i.defaultChecked===void 0)return;function _(){h(i.defaultChecked)}return y.value.addEventListener("reset",_),()=>{var w;(w=y.value)==null||w.removeEventListener("reset",_)}},{immediate:!0})}),()=>{let{name:_,value:w,form:b,...M}=i,O={checked:a.value},N={id:l,ref:f,role:"switch",type:d.value,tabIndex:0,"aria-checked":a.value,"aria-labelledby":o==null?void 0:o.labelledby.value,"aria-describedby":o==null?void 0:o.describedby.value,onClick:m,onKeyup:p,onKeypress:x};return Nt(bt,[_!=null&&a.value!=null?Nt(Gs,Hr({features:Gi.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:a.value,form:b,name:_,value:w})):null,Lt({ourProps:N,theirProps:{...e,...De(M,["modelValue","defaultChecked"])},slot:O,attrs:e,slots:s,name:"Switch"})])}}}),Dv=ct({props:{onFocus:{type:Function,required:!0}},setup(i){let t=W(!0);return()=>t.value?Nt(Gs,{as:"button",type:"button",features:Gi.Focusable,onFocus(e){e.preventDefault();let s,n=50;function r(){var l;if(n--<=0){s&&cancelAnimationFrame(s);return}if((l=i.onFocus)!=null&&l.call(i)){t.value=!1,cancelAnimationFrame(s);return}s=requestAnimationFrame(r)}s=requestAnimationFrame(r)}}):null}});var Fv=(i=>(i[i.Forwards=0]="Forwards",i[i.Backwards=1]="Backwards",i))(Fv||{}),Bv=(i=>(i[i.Less=-1]="Less",i[i.Equal=0]="Equal",i[i.Greater=1]="Greater",i))(Bv||{});let Oh=Symbol("TabsContext");function qr(i){let t=Et(Oh,null);if(t===null){let e=new Error(`<${i} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,qr),e}return t}let Eh=Symbol("TabsSSRContext"),Vv=ct({name:"TabGroup",emits:{change:i=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(i,{slots:t,attrs:e,emit:s}){var n;let r=W((n=i.selectedIndex)!=null?n:i.defaultIndex),l=W([]),o=W([]),a=F(()=>i.selectedIndex!==null),h=F(()=>a.value?i.selectedIndex:r.value);function u(p){var x;let y=Te(c.tabs.value,j),_=Te(c.panels.value,j),w=y.filter(b=>{var M;return!((M=j(b))!=null&&M.hasAttribute("disabled"))});if(p<0||p>y.length-1){let b=gt(r.value===null?0:Math.sign(p-r.value),{[-1]:()=>1,0:()=>gt(Math.sign(p),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),M=gt(b,{0:()=>y.indexOf(w[0]),1:()=>y.indexOf(w[w.length-1])});M!==-1&&(r.value=M),c.tabs.value=y,c.panels.value=_}else{let b=y.slice(0,p),M=[...y.slice(p),...b].find(N=>w.includes(N));if(!M)return;let O=(x=y.indexOf(M))!=null?x:c.selectedIndex.value;O===-1&&(O=c.selectedIndex.value),r.value=O,c.tabs.value=y,c.panels.value=_}}let c={selectedIndex:F(()=>{var p,x;return(x=(p=r.value)!=null?p:i.defaultIndex)!=null?x:null}),orientation:F(()=>i.vertical?"vertical":"horizontal"),activation:F(()=>i.manual?"manual":"auto"),tabs:l,panels:o,setSelectedIndex(p){h.value!==p&&s("change",p),a.value||u(p)},registerTab(p){var x;if(l.value.includes(p))return;let y=l.value[r.value];l.value.push(p),l.value=Te(l.value,j);let _=(x=l.value.indexOf(y))!=null?x:r.value;_!==-1&&(r.value=_)},unregisterTab(p){let x=l.value.indexOf(p);x!==-1&&l.value.splice(x,1)},registerPanel(p){o.value.includes(p)||(o.value.push(p),o.value=Te(o.value,j))},unregisterPanel(p){let x=o.value.indexOf(p);x!==-1&&o.value.splice(x,1)}};ie(Oh,c);let f=W({tabs:[],panels:[]}),d=W(!1);xt(()=>{d.value=!0}),ie(Eh,F(()=>d.value?null:f.value));let m=F(()=>i.selectedIndex);return xt(()=>{ft([m],()=>{var p;return u((p=i.selectedIndex)!=null?p:i.defaultIndex)},{immediate:!0})}),jt(()=>{if(!a.value||h.value==null||c.tabs.value.length<=0)return;let p=Te(c.tabs.value,j);p.some((x,y)=>j(c.tabs.value[y])!==j(x))&&c.setSelectedIndex(p.findIndex(x=>j(x)===j(c.tabs.value[h.value])))}),()=>{let p={selectedIndex:r.value};return Nt(bt,[l.value.length<=0&&Nt(Dv,{onFocus:()=>{for(let x of l.value){let y=j(x);if((y==null?void 0:y.tabIndex)===0)return y.focus(),!0}return!1}}),Lt({theirProps:{...e,...De(i,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:p,slots:t,attrs:e,name:"TabGroup"})])}}}),jv=ct({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(i,{attrs:t,slots:e}){let s=qr("TabList");return()=>{let n={selectedIndex:s.selectedIndex.value},r={role:"tablist","aria-orientation":s.orientation.value};return Lt({ourProps:r,theirProps:i,slot:n,attrs:t,slots:e,name:"TabList"})}}}),Wv=ct({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(i,{attrs:t,slots:e,expose:s}){var n;let r=(n=i.id)!=null?n:`headlessui-tabs-tab-${de()}`,l=qr("Tab"),o=W(null);s({el:o,$el:o}),xt(()=>l.registerTab(o)),Ae(()=>l.unregisterTab(o));let a=Et(Eh),h=F(()=>{if(a.value){let _=a.value.tabs.indexOf(r);return _===-1?a.value.tabs.push(r)-1:_}return-1}),u=F(()=>{let _=l.tabs.value.indexOf(o);return _===-1?h.value:_}),c=F(()=>u.value===l.selectedIndex.value);function f(_){var w;let b=_();if(b===Ei.Success&&l.activation.value==="auto"){let M=(w=Qs(o))==null?void 0:w.activeElement,O=l.tabs.value.findIndex(N=>j(N)===M);O!==-1&&l.setSelectedIndex(O)}return b}function d(_){let w=l.tabs.value.map(b=>j(b)).filter(Boolean);if(_.key===X.Space||_.key===X.Enter){_.preventDefault(),_.stopPropagation(),l.setSelectedIndex(u.value);return}switch(_.key){case X.Home:case X.PageUp:return _.preventDefault(),_.stopPropagation(),f(()=>oi(w,te.First));case X.End:case X.PageDown:return _.preventDefault(),_.stopPropagation(),f(()=>oi(w,te.Last))}if(f(()=>gt(l.orientation.value,{vertical(){return _.key===X.ArrowUp?oi(w,te.Previous|te.WrapAround):_.key===X.ArrowDown?oi(w,te.Next|te.WrapAround):Ei.Error},horizontal(){return _.key===X.ArrowLeft?oi(w,te.Previous|te.WrapAround):_.key===X.ArrowRight?oi(w,te.Next|te.WrapAround):Ei.Error}}))===Ei.Success)return _.preventDefault()}let m=W(!1);function p(){var _;m.value||(m.value=!0,!i.disabled&&((_=j(o))==null||_.focus({preventScroll:!0}),l.setSelectedIndex(u.value),wh(()=>{m.value=!1})))}function x(_){_.preventDefault()}let y=Xs(F(()=>({as:i.as,type:t.type})),o);return()=>{var _;let w={selected:c.value},{...b}=i,M={ref:o,onKeydown:d,onMousedown:x,onClick:p,id:r,role:"tab",type:y.value,"aria-controls":(_=j(l.panels.value[u.value]))==null?void 0:_.id,"aria-selected":c.value,tabIndex:c.value?0:-1,disabled:i.disabled?!0:void 0};return Lt({ourProps:M,theirProps:b,slot:w,attrs:t,slots:e,name:"Tab"})}}});function Hv(i){let t={called:!1};return(...e)=>{if(!t.called)return t.called=!0,i(...e)}}function Bn(i,...t){i&&t.length>0&&i.classList.add(...t)}function ys(i,...t){i&&t.length>0&&i.classList.remove(...t)}var ar=(i=>(i.Finished="finished",i.Cancelled="cancelled",i))(ar||{});function Uv(i,t){let e=qi();if(!i)return e.dispose;let{transitionDuration:s,transitionDelay:n}=getComputedStyle(i),[r,l]=[s,n].map(o=>{let[a=0]=o.split(",").filter(Boolean).map(h=>h.includes("ms")?parseFloat(h):parseFloat(h)*1e3).sort((h,u)=>u-h);return a});return r!==0?e.setTimeout(()=>t("finished"),r+l):t("finished"),e.add(()=>t("cancelled")),e.dispose}function Ao(i,t,e,s,n,r){let l=qi(),o=r!==void 0?Hv(r):()=>{};return ys(i,...n),Bn(i,...t,...e),l.nextFrame(()=>{ys(i,...e),Bn(i,...s),l.add(Uv(i,a=>(ys(i,...s,...t),Bn(i,...n),o(a))))}),l.add(()=>ys(i,...t,...e,...s,...n)),l.add(()=>o("cancelled")),l.dispose}function He(i=""){return i.split(/\s+/).filter(t=>t.length>1)}let Zr=Symbol("TransitionContext");var Kv=(i=>(i.Visible="visible",i.Hidden="hidden",i))(Kv||{});function qv(){return Et(Zr,null)!==null}function Zv(){let i=Et(Zr,null);if(i===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return i}function Yv(){let i=Et(Yr,null);if(i===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return i}let Yr=Symbol("NestingContext");function en(i){return"children"in i?en(i.children):i.value.filter(({state:t})=>t==="visible").length>0}function Th(i){let t=W([]),e=W(!1);xt(()=>e.value=!0),Ae(()=>e.value=!1);function s(r,l=Ie.Hidden){let o=t.value.findIndex(({id:a})=>a===r);o!==-1&&(gt(l,{[Ie.Unmount](){t.value.splice(o,1)},[Ie.Hidden](){t.value[o].state="hidden"}}),!en(t)&&e.value&&(i==null||i()))}function n(r){let l=t.value.find(({id:o})=>o===r);return l?l.state!=="visible"&&(l.state="visible"):t.value.push({id:r,state:"visible"}),()=>s(r,Ie.Unmount)}return{children:t,register:n,unregister:s}}let zh=Ne.RenderStrategy,Qv=ct({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(i,{emit:t,attrs:e,slots:s,expose:n}){let r=W(0);function l(){r.value|=Ot.Opening,t("beforeEnter")}function o(){r.value&=~Ot.Opening,t("afterEnter")}function a(){r.value|=Ot.Closing,t("beforeLeave")}function h(){r.value&=~Ot.Closing,t("afterLeave")}if(!qv()&&uv())return()=>Nt(Ih,{...i,onBeforeEnter:l,onAfterEnter:o,onBeforeLeave:a,onAfterLeave:h},s);let u=W(null),c=F(()=>i.unmount?Ie.Unmount:Ie.Hidden);n({el:u,$el:u});let{show:f,appear:d}=Zv(),{register:m,unregister:p}=Yv(),x=W(f.value?"visible":"hidden"),y={value:!0},_=de(),w={value:!1},b=Th(()=>{!w.value&&x.value!=="hidden"&&(x.value="hidden",p(_),h())});xt(()=>{let B=m(_);Ae(B)}),jt(()=>{if(c.value===Ie.Hidden&&_){if(f.value&&x.value!=="visible"){x.value="visible";return}gt(x.value,{hidden:()=>p(_),visible:()=>m(_)})}});let M=He(i.enter),O=He(i.enterFrom),N=He(i.enterTo),S=He(i.entered),H=He(i.leave),E=He(i.leaveFrom),A=He(i.leaveTo);xt(()=>{jt(()=>{if(x.value==="visible"){let B=j(u);if(B instanceof Comment&&B.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function L(B){let Y=y.value&&!d.value,et=j(u);!et||!(et instanceof HTMLElement)||Y||(w.value=!0,f.value&&l(),f.value||a(),B(f.value?Ao(et,M,O,N,S,G=>{w.value=!1,G===ar.Finished&&o()}):Ao(et,H,E,A,S,G=>{w.value=!1,G===ar.Finished&&(en(b)||(x.value="hidden",p(_),h()))})))}return xt(()=>{ft([f],(B,Y,et)=>{L(et),y.value=!1},{immediate:!0})}),ie(Yr,b),Ur(F(()=>gt(x.value,{visible:Ot.Open,hidden:Ot.Closed})|r.value)),()=>{let{appear:B,show:Y,enter:et,enterFrom:G,enterTo:lt,entered:tt,leave:Dt,leaveFrom:pe,leaveTo:qt,...Wt}=i,Ji={ref:u},sn={...Wt,...d.value&&f.value&&Ys.isServer?{class:Kt([e.class,Wt.class,...M,...O])}:{}};return Lt({theirProps:sn,ourProps:Ji,slot:{},slots:s,attrs:e,features:zh,visible:x.value==="visible",name:"TransitionChild"})}}}),Xv=Qv,Ih=ct({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(i,{emit:t,attrs:e,slots:s}){let n=Js(),r=F(()=>i.show===null&&n!==null?(n.value&Ot.Open)===Ot.Open:i.show);jt(()=>{if(![!0,!1].includes(r.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let l=W(r.value?"visible":"hidden"),o=Th(()=>{l.value="hidden"}),a=W(!0),h={show:r,appear:F(()=>i.appear||!a.value)};return xt(()=>{jt(()=>{a.value=!1,r.value?l.value="visible":en(o)||(l.value="hidden")})}),ie(Yr,o),ie(Zr,h),()=>{let u=De(i,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),c={unmount:i.unmount};return Lt({ourProps:{...c,as:"template"},theirProps:{},slot:{},slots:{...s,default:()=>[Nt(Xv,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...e,...c,...u},s.default)]},attrs:{},features:zh,visible:l.value==="visible",name:"Transition"})}}});const Rh=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
    class="w-6 h-6">
    <path fill="var(--foreground)" stroke-linecap="round" stroke-linejoin="round"
        d="M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9" />
</svg>`;function Gv(i){return i.split(`
`).map(e=>{const s=e.split(","),n=s[0];return{time:new Date(parseInt(n.substring(4,6))+2e3,parseInt(n.substring(2,4))-1,parseInt(n.substring(0,2))).getTime()/1e3,open:parseInt(s[3]),high:parseInt(s[4]),low:parseInt(s[5]),close:parseInt(s[6]),value:parseInt(s[7])}}).filter(e=>e.time).sort((e,s)=>e.time-s.time)}async function Jv(i,t){if(!i.ok||!i.body)throw new Error(`HTTP error! status: ${i.status}`);const e=i.body.pipeThrough(new TextDecoderStream).getReader(),s=r=>{const l=r.split(",");return{id:l[0],name:l[1],symbol:l[2],ISIN:l[3]}};let n="";for(;;){const{value:r,done:l}=await e.read();if(l)break;n+=r;const o=n.split(`
`),a=o.map(h=>s(h));t(a),n=o[o.length-1]}n&&t([s(n)])}const tm={class:"relative mt-1"},em={class:"flex h-10 w-full items-center"},im={class:"h-5 w-5 top-5 left-5 self-center"},sm=["innerHTML"],nm={key:0,class:"relative cursor-default select-none px-4 py-2 text-gray-700"},rm=st("img",{class:"h-5 w-5",src:ch},null,-1),lm=[rm],om={key:1,class:"relative cursor-default select-none px-4 py-2 text-gray-700"},am={key:2,class:"relative cursor-default select-none px-4 py-2 text-gray-700"},hm=ct({__name:"ComboboxComp",emits:["update","errorFetching"],setup(i,{emit:t}){const e=W(),s=t;ft(e,u=>{u!=null&&u.id&&s("update",u.id)});const n=aa([]),r=W(!0);fetch("https://raw.githubusercontent.com/ketan-10/stock-data-visualization/master/cron/Equity.csv").then(u=>Jv(u,c=>{n.value=[...n.value,...c]})).then(()=>{r.value=!1}).catch(u=>{s("errorFetching",u??"Server Error")});let l=W(""),o=W(l.value),a=W();ft(l,async u=>{clearTimeout(a.value),a.value=setTimeout(()=>{o.value=u},200)});let h=F(()=>l.value===""?n.value.slice(0,20):o.value===""?[]:n.value.filter(u=>{const c=o.value.toLowerCase().replace(/\s+/g,"");return u.name.toLowerCase().replace(/\s+/g,"").includes(c)||u.symbol.toLowerCase().replace(/\s+/g,"").includes(c)}).slice(0,20));return(u,c)=>(at(),ce(rt(wv),Na({modelValue:e.value,"onUpdate:modelValue":c[2]||(c[2]=f=>e.value=f)},u.$attrs),{default:It(({open:f})=>[st("div",tm,[st("div",em,[ht(rt(xv),{class:"rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed w-full",displayValue:d=>f?"":d==null?void 0:d.name,onChange:c[0]||(c[0]=d=>Tt(l)?l.value=d.target.value:l=d.target.value),placeholder:"Search company name"},null,8,["displayValue"]),ht(rt(_v),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:It(()=>[st("div",im,[st("div",{class:"object-contain h-full w-full",innerHTML:rt(Rh)},null,8,sm)])]),_:1})]),ht(rt(Ih),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:c[1]||(c[1]=d=>Tt(l)?l.value="":l="")},{default:It(()=>[ht(rt(Sv),{class:"overflow-auto absolute z-50 mt-1 w-full max-h-60 text-base bg-popover text-popover-foreground rounded-md ring-1 ring-black ring-opacity-5 shadow-lg focus:outline-none sm:text-sm"},{default:It(()=>[rt(h).length===0&&rt(l)!==""?(at(),_t("div",nm," Nothing found. ")):ze("",!0),(at(!0),_t(bt,null,Cr(rt(h),d=>(at(),ce(rt(Cv),{as:"template",key:d.id,value:d},{default:It(({selected:m,active:p})=>[st("li",{class:Kt(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-amber-600 text-amber-900":p,"":!p}])},[st("span",{class:Kt(["block truncate",{"font-medium":m,"font-normal":!m}])},Re(d.name),3),m?(at(),_t("span",{key:0,class:Kt(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":p,"text-amber-600":!p}])},lm,2)):ze("",!0)],2)]),_:2},1032,["value"]))),128)),rt(h).length===20?(at(),_t("div",om," Search to load more... ")):ze("",!0),r.value?(at(),_t("div",am," loading more... ")):ze("",!0)]),_:1})]),_:1})])]),_:1},16,["modelValue"]))}}),um={class:"relative mt-1"},cm={key:0,class:"block truncate"},fm={key:1,class:"text-gray-500"},dm={class:"flex absolute inset-y-0 right-0 items-center pr-2 pointer-events-none"},pm={class:"h-5 w-5 top-5 left-5 self-center"},vm=["innerHTML"],mm={key:0,class:"flex absolute inset-y-0 left-0 items-center pl-3 text-amber-600"},gm=st("img",{class:"h-5 w-5",src:ch},null,-1),bm=[gm],ym=ct({__name:"SelectComp",props:{modelValue:{},options:{},placeholder:{default:"Select option"}},emits:["update:modelValue"],setup(i,{emit:t}){const e=i,s=t,n=F(()=>e.options.filter(r=>Array.isArray(e.modelValue)?e.modelValue.includes(r.value):e.modelValue===r.value).map(r=>r.label).join(", "));return(r,l)=>(at(),ce(rt(Lv),{"model-value":e.modelValue,"onUpdate:modelValue":l[0]||(l[0]=o=>s("update:modelValue",o))},{default:It(()=>[st("div",um,[ht(rt(kv),{class:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed"},{default:It(()=>[n.value?(at(),_t("span",cm,Re(n.value),1)):(at(),_t("span",fm,Re(e.placeholder),1)),st("span",dm,[st("div",pm,[st("div",{class:"object-contain h-full w-full",innerHTML:rt(Rh)},null,8,vm)])])]),_:1}),ht(zr,{"leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:It(()=>[ht(rt(Pv),{class:"overflow-auto absolute z-50 mt-1 w-full max-h-60 text-base bg-popover text-popover-foreground rounded-md ring-1 ring-black ring-opacity-5 shadow-lg focus:outline-none sm:text-sm"},{default:It(()=>[(at(!0),_t(bt,null,Cr(e.options,o=>(at(),ce(rt($v),{key:o.label,value:o.value,as:"template",disabled:o.disable},{default:It(({active:a,selected:h})=>[st("li",{class:Kt([a?"bg-amber-200 text-amber-900":"","relative flex w-full cursor-default select-none items-center rounded-sm py-2 pl-10 pr-4 focus:bg-accent focus:text-accent-foreground",o.disable?"bg-gray-300 cursor-not-allowed":""])},[st("span",{class:Kt([h?"font-medium":"font-normal","block truncate"])},Re(o.label),3),h?(at(),_t("span",mm,bm)):ze("",!0)],2)]),_:2},1032,["value","disabled"]))),128))]),_:1})]),_:1})])]),_:1},8,["model-value"]))}}),wm=ct({__name:"ButtonComp",props:{modelValue:{},class:{}},setup(i){const t=i;return(e,s)=>(at(),_t("button",{class:Kt(["h-full w-full px-4 py-2 bg-primary text-primary-foreground hover:bg-primary/90 inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ",t.class])},[Zu(e.$slots,"default")],2))}}),_m={class:"w-60 flex-grow"},xm=st("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Symbol: ",-1),Sm={class:"min-h-[18px] inline-block text-[0.8rem] font-medium text-destructive"},Cm={class:"w-60 flex-grow"},Mm=st("label",{class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Period: ",-1),Om={class:"min-h-[18px] inline-block text-[0.8rem] font-medium text-destructive"},Em={class:"flex-grow max-w-40 align-middle"},Tm={key:0,class:"flex text-[0.8rem] mt-[-18px] font-medium text-destructive justify-center"},zm=ct({__name:"FormView",props:{isLoading:{type:Boolean}},emits:["onChartData","update:isLoading"],setup(i,{emit:t}){const e=i,s=t,n=F({get(){return e.isLoading},set(u){s("update:isLoading",u)}}),r=[{value:"daily",label:"Daily"},{value:"hourly",label:"Hourly",disable:!0}],l=Zi({symbol:{value:"",errorMsg:""},period:{value:"daily",errorMsg:""}}),o=()=>{let u=!0;return l.period.value||(l.period.errorMsg="Please select an period",u=!1),l.symbol.value?l.symbol.value.length>10||l.symbol.value.length<2?(l.symbol.errorMsg="symbol lenght must be between 2 & 5.",u=!1):/[^a-zA-Z0-9]/.test(l.symbol.value)&&(l.symbol.errorMsg="symbol should not have special characters.",u=!1):(l.symbol.errorMsg="Required",u=!1),u},a=W(""),h=async()=>{if(o()){l.period.errorMsg="",l.symbol.errorMsg="",a.value="",n.value=!0;try{const u=await fetch(`https://raw.githubusercontent.com/ketan-10/stock-data-visualization/master/cron/output/${l.symbol.value}.csv`),c=Gv(await u.text());if(!u.ok)throw new Error("failed to load data");s("onChartData",c)}catch(u){a.value=(u==null?void 0:u.message)??"Server error"}finally{n.value=!1}}};return(u,c)=>(at(),_t(bt,null,[st("form",{autocomplete:"off",onSubmit:tf(h,["prevent"]),class:"py-2 px-6 flex gap-x-5 max-w-3xl items-center self-center flex-wrap justify-center"},[st("div",_m,[xm,ht(hm,{onUpdate:c[0]||(c[0]=f=>l.symbol.value=f),onChange:c[1]||(c[1]=f=>l.symbol.errorMsg=""),onErrorFetching:c[2]||(c[2]=f=>a.value=f)}),st("span",Sm,Re(l.symbol.errorMsg),1)]),st("div",Cm,[Mm,ht(ym,{placeholder:"Select period",modelValue:l.period.value,"onUpdate:modelValue":[c[3]||(c[3]=f=>l.period.value=f),c[4]||(c[4]=f=>l.period.errorMsg="")],options:r},null,8,["modelValue"]),st("span",Om,Re(l.period.errorMsg),1)]),st("div",Em,[ht(wm,{type:"submit"},{default:It(()=>[$a(" Search ")]),_:1})])],32),a.value?(at(),_t("div",Tm,Re(a.value),1)):ze("",!0)],64))}}),Im=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
    class="bg-secondary rounded-full py-[3px] aspect-square">
    <path stroke-linecap="round" stroke-linejoin="round"
        d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"
        stroke="var(--forground)" />
</svg>`,Rm=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
    class="bg-secondary rounded-full py-[3px] aspect-square">
    <path stroke-linecap="round" stroke-linejoin="round"
        d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"
        stroke="var(--forground)" />
</svg>`,Lm=`<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 30 30">
    <path fill="var(--foreground)"
        d="M15,3C8.373,3,3,8.373,3,15c0,5.623,3.872,10.328,9.092,11.63C12.036,26.468,12,26.28,12,26.047v-2.051 c-0.487,0-1.303,0-1.508,0c-0.821,0-1.551-0.353-1.905-1.009c-0.393-0.729-0.461-1.844-1.435-2.526 c-0.289-0.227-0.069-0.486,0.264-0.451c0.615,0.174,1.125,0.596,1.605,1.222c0.478,0.627,0.703,0.769,1.596,0.769 c0.433,0,1.081-0.025,1.691-0.121c0.328-0.833,0.895-1.6,1.588-1.962c-3.996-0.411-5.903-2.399-5.903-5.098 c0-1.162,0.495-2.286,1.336-3.233C9.053,10.647,8.706,8.73,9.435,8c1.798,0,2.885,1.166,3.146,1.481C13.477,9.174,14.461,9,15.495,9 c1.036,0,2.024,0.174,2.922,0.483C18.675,9.17,19.763,8,21.565,8c0.732,0.731,0.381,2.656,0.102,3.594 c0.836,0.945,1.328,2.066,1.328,3.226c0,2.697-1.904,4.684-5.894,5.097C18.199,20.49,19,22.1,19,23.313v2.734 c0,0.104-0.023,0.179-0.035,0.268C23.641,24.676,27,20.236,27,15C27,8.373,21.627,3,15,3z">
    </path>
</svg>`,km={class:"bg-primary-foreground flex w-full shadow align-middle"},Pm={class:"flex justify-between w-full items-center p-3"},$m=st("div",{class:"text-xl pl-4"},"Stocks visualizer",-1),Nm={class:"flex gap-5"},Am={class:"h-8 top-5 left-5 self-center w-10"},Dm=["innerHTML"],Fm={class:"self-center leading-none"},Bm=st("span",{class:"sr-only"},"Dark Mode",-1),Vm=["innerHTML"],jm=ct({__name:"HeaderView",setup(i){const t=Et("isDarkMode",W(!1));return ft(t,e=>{e?(document.documentElement.classList.add("dark"),localStorage.setItem("isDarkMode","true")):(document.documentElement.classList.remove("dark"),localStorage.removeItem("isDarkMode"))}),(e,s)=>(at(),_t("div",km,[st("div",Pm,[$m,st("div",Nm,[st("div",Am,[st("a",{class:"object-contain h-full w-full cursor-pointer",innerHTML:rt(Lm),href:"https://github.com/ketan-10/stock-data-visualization",target:"_blank"},null,8,Dm)]),st("div",Fm,[ht(rt(Av),{modelValue:rt(t),"onUpdate:modelValue":s[0]||(s[0]=n=>Tt(t)?t.value=n:null),class:Kt([rt(t)?"bg-amber-900":"bg-amber-600","relative inline-flex h-[25px] w-[45px] shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75 dark:focus-visible:ring-black/75"])},{default:It(()=>[Bm,st("span",{class:Kt([rt(t)?"translate-x-5":"translate-x-0 white","flex object-contain p-[1.4px] h-full w-full shadow-lg ring-0 transform transition duration-200 ease-in-out"]),innerHTML:rt(t)?rt(Rm):rt(Im)},null,10,Vm)]),_:1},8,["modelValue","class"])])])])]))}}),Wm=ct({__name:"TabComp",props:{modelValue:{},tabs:{}},emits:["update:modelValue"],setup(i){const t=i;return(e,s)=>(at(),ce(rt(Vv),{selectedIndex:t.tabs.findIndex(n=>n==t.modelValue),onChange:s[0]||(s[0]=n=>e.$emit("update:modelValue",t.tabs[n]))},{default:It(()=>[ht(rt(jv),{class:"flex space-x-1 rounded-xl bg-amber-900/20 p-1"},{default:It(()=>[(at(!0),_t(bt,null,Cr(t.tabs,n=>(at(),ce(rt(Wv),{as:"template",key:n},{default:It(({selected:r})=>[st("button",{class:Kt(["w-full rounded-lg py-2.5 text-sm font-medium leading-5","ring-white/60 ring-offset-2 ring-offset-amber-400 focus:outline-none focus:ring-2",r?"bg-white text-amber-700 shadow":"text-yellow-600 hover:bg-white/[0.12] hover:text-amber-900"])},Re(n),3)]),_:2},1024))),128))]),_:1})]),_:1},8,["selectedIndex"]))}}),Hm={class:"flex w-full flex-col"},Um={class:"w-full z-[9999] top-0 left-0 fixed h-14 flex"},Km={class:"pt-14 w-full min-h-screen flex flex-col"},qm={key:0,id:"spinner"},Zm={class:"w-full md:w-80 self-center mb-5 px-5"},Ym=ct({__name:"App",setup(i){const t=W(!!localStorage.getItem("isDarkMode"));ie("isDarkMode",t);const e=W(!1),s=["candlestick","line"],n=W("candlestick"),r=W([]),l=o=>{r.value=o};return(o,a)=>(at(),_t("div",Hm,[st("div",Um,[ht(jm)]),st("div",Km,[ht(zm,{isLoading:e.value,"onUpdate:isLoading":a[0]||(a[0]=h=>e.value=h),onOnChartData:l},null,8,["isLoading"]),e.value?(at(),_t("div",qm)):(at(),_t(bt,{key:1},[st("div",Zm,[r.value.length?(at(),ce(Wm,{key:0,modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=h=>n.value=h),tabs:s},null,8,["modelValue"])):ze("",!0)]),r.value.length?(at(),ce(Ap,{key:0,serverData:r.value,chartType:n.value},null,8,["serverData","chartType"])):ze("",!0)],64))])]))}});nf(Ym).mount("#app");
